!function t(e,i,o){function r(h,l){if(!i[h]){if(!e[h]){var s="function"==typeof require&&require;if(!l&&s)return s(h,!0);if(n)return n(h,!0);var a=new Error("Cannot find module '"+h+"'");throw a.code="MODULE_NOT_FOUND",a}var d=i[h]={exports:{}};e[h][0].call(d.exports,function(t){return r(e[h][1][t]||t)},d,d.exports,t,e,i,o)}return i[h].exports}for(var n="function"==typeof require&&require,h=0;h<o.length;h++)r(o[h]);return r}({1:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const o=t("./mapGenerationFunctions.component"),r=t("./config.component");i.default=class{constructor(){this.config=new r.default,this.calculations=new o.MapGenerationFunctions}showData(t){let e='<div class="showData">';return e+=`map width: ${t.mapWidth} tiles<br>map length: ${t.mapLength} tiles<br>`,e+=`tile width: ${this.config.tileWidth}<br>tile length: ${this.config.tileLength}<br>`,e+="</div>"}build2DMap(t){let e=`<div class="map" style="width:${this.config.getMapWidth(t.mapWidth)}px;">`;for(let i=0;i<t.mapLength;i++)for(let o=0;o<t.mapWidth;o++)if(e+=`<div class="tile" style="width:${this.config.tileWidth}px;height:${this.config.tileLength}px;`,t.getColumn(o,i).isDefined){let r=t.getTopTile(o,i),n=r.getColor();e+=`background-color:${`rgb(${n.r}, ${n.g}, ${n.b})`};">${r.id}<br>(${o}, ${i})</div>`}else e+=`">${o}, ${i}</div>`;return e+="</div>"}buildMap(t){this.config.getMapWidth(t.mapWidth),this.config.getMapLength(t.mapLength);return'<svg width="" height=""></svg>'}createTile(){let t=this.config.tileWidth,e=this.config.tileLength,i=this.config.tileAngle,o=Math.sin(i)*t,r=Math.sin(i)*e,n=(Math.sqrt(Math.pow(t,2)-Math.pow(o,2)),Math.sqrt(Math.pow(e,2)-Math.pow(r,2)),this.calculations.calculateStraightLinesFromIsometricSquare(t,e));console.log(n);var h=`<svg width="${n.totalWidth}" height="${n.totalHeight+2}" style="border:#666 solid 1px;">\n\t\t\t\t<path fill="red" \n\t\t\t\t\td="M 0 ${n.verticalHeightFromTop} \n\t\t\t\t\tL${n.horizontalWidthFromBottom} ${n.totalHeight}\n\t\t\t\t\tL${n.totalWidth} ${n.verticalHeightFromBottom}\n\t\t\t\t\tL${n.horizontalWidthFromTop} 0 \n\t\t\t\t\tL0 ${n.verticalHeightFromTop} Z" />`;return h+="</svg>"}}},{"./config.component":2,"./mapGenerationFunctions.component":4}],2:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});i.default=class{constructor(){this._tileWidth=400,this._tileLength=400,this._tileHeight=20,this._tileAngle=20}get tileWidth(){return this._tileWidth}get tileLength(){return this._tileLength}get tileHeight(){return this._tileHeight}get tileAngle(){return this._tileAngle}getMapWidth(t){return t*this._tileWidth}getMapLength(t){return t*this._tileLength}}},{}],3:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const o=t("./mapper.component"),r=t("./builder.component");const n=new class{constructor(){this._builder=new r.default,this._map=new o.default(25,25,10,2,4+Math.floor(7*Math.random()),2,4)}get map(){return this._map}colorMap(){return this._builder.showData(this._map)+this._builder.build2DMap(this._map)}drawTile(){return this._builder.createTile()}};console.log(n.map.map),console.log("column on 15, 17: ",n.map.getColumn(15,17)),document.querySelector("#world").innerHTML=n.drawTile()},{"./builder.component":1,"./mapper.component":5}],4:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});i.MapGenerationFunctions=class{constructor(){this.smallAngle=80,this.largeAngle=90}calculateAdditionalBlockIterations(t){return 2+Math.floor(Math.random()*t)}calculateTriangleHypotenuse(t,e){let i=Math.pow(t,2)+Math.pow(e,2);return Math.sqrt(i)}calculateStraightLinesFromIsometricSquare(t,e){let i=(180-this.smallAngle)/2,o=(180-this.largeAngle)/2,r=this.getHorizontalBottomShortestWidth(t,i),n=this.getVerticalBottomShortestHeight(r,i),h=this.getHorizontalTopLongestWidth(e,o),l=this.getVerticalTopLongestHeight(h,o);return{totalWidth:r+h,totalHeight:n+l,horizontalWidthFromBottom:r,horizontalWidthFromTop:h,verticalHeightFromBottom:n,verticalHeightFromTop:l}}getHorizontalBottomShortestWidth(t,e){return Math.round(t*Math.sin(this.toRadians(e))*100)/100}getVerticalBottomShortestHeight(t,e){return Math.round(t*Math.cos(this.toRadians(e))*100)/100}getHorizontalTopLongestWidth(t,e){return Math.round(t*Math.sin(this.toRadians(e))*100)/100}getVerticalTopLongestHeight(t,e){return Math.floor(t*Math.cos(this.toRadians(e)))}toRadians(t){return t*(Math.PI/180)}},function(t){t[t.Red=125+Math.floor(75*Math.random())]="Red",t[t.Green=170+Math.floor(40*Math.random())]="Green",t[t.Blue=180+Math.floor(30*Math.random())]="Blue"}(i.TileColor||(i.TileColor={})),function(t){t.TallCenter="tallcenter",t.TallSurrounds="tallsurrounds",t.Random="random"}(i.BuildingHeightVariations||(i.BuildingHeightVariations={}))},{}],5:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const o=t("./mapGenerationFunctions.component"),r=t("./tile.component");i.default=class{constructor(t,e,i,h,l,s,a){this._mapGenerationFunctions=new o.MapGenerationFunctions,this._blockHeightVariationLabels=[o.BuildingHeightVariations.TallCenter,o.BuildingHeightVariations.TallSurrounds,o.BuildingHeightVariations.Random],this._blockHeightVariation=this._blockHeightVariationLabels[Math.floor(3*Math.random())],this._mapWidth=t,this._mapLength=e,this._mapMaxHeight=i,this._mapEdgeWidth=h,this._averageBuildingSize=l,this._blockHeight=s,this._maximumBlockIterations=a,this._additionalBlockIterations=this._mapGenerationFunctions.calculateAdditionalBlockIterations(a),this._blockGroups=[];let d=Math.floor(e/2),g=(Math.floor(t/2),this._averageBuildingSize+1+Math.floor(6*Math.random())),u=this._averageBuildingSize+Math.floor(5*Math.random()),c=6+Math.floor(6*Math.random()),p=Math.floor(g/2),_=(Math.floor(u/2),Math.floor(this._mapWidth/2)-Math.floor(c/2));this._world=[];let m,f=0;this._blockHeightVariation==o.BuildingHeightVariations.TallCenter?m=2*s:this._blockHeightVariation==o.BuildingHeightVariations.TallSurrounds?s=m=1+Math.round(Math.random()):m=s;for(let t=0;t<this.mapLength;t++){this._world[t]=[];for(let e=0;e<this.mapWidth;e++){let i=0,h=new n(!1,e,t,0);if(t>=d&&t<=d+p&&e>_&&e<=_+u){i=1;let l=[];for(let n=0;n<m;n++){let h=0,s=0,a=n===m-1;l.push(new r.Tile(f,e,t,n,r.TileType.Body,o.TileColor.Red,o.TileColor.Green,o.TileColor.Blue,{roof:a,pillar:h,windowed:s,tower:!1})),-1==this._blockGroups.indexOf(i)?this._blockGroups[i]=new Array([t,e]):this._blockGroups[i].push([t,e]),f++}(h=new n(!0,e,t,m)).blockGroup=i,h.height=m,h.corner=!1,h.tileStack=l}this._world[t][e]=h}}this.setEdges()}get mapWidth(){return this._mapWidth}get mapLength(){return this._mapLength}get map(){return this._world}getColumn(t,e){return this._world[e][t]}getTiles(t,e){return this._world[e][t].tileStack}getTile(t,e,i){return this._world[e][t].getTile(i)}getTopTile(t,e){let i=this._world[e][t].height;return this._world[e][t].getTile(i-1)}setEdges(){for(let t=0;t<this.mapLength;t++)for(let e=0;e<this.mapWidth;e++)t>0&&e>0&&t<this.mapLength-1&&e<this.mapWidth-1&&this._world[t][e].isDefined&&(this._world[t-1][e].isDefined||(this._world[t][e].edge.top=!0),this._world[t+1][e].isDefined||(this._world[t][e].edge.bottom=!0),this._world[t][e-1].isDefined||(this._world[t][e].edge.left=!0),this._world[t][e+1].isDefined||(this._world[t][e].edge.right=!0),(this._world[t][e].edge.top&&this._world[t][e].edge.right||this._world[t][e].edge.top&&this._world[t][e].edge.left||this._world[t][e].edge.bottom&&this._world[t][e].edge.right||this._world[t][e].edge.bottom&&this._world[t][e].edge.left)&&(this._world[t][e].corner=!0))}};class n{constructor(t,e,i,o){this.defined=t,this.colX=e,this.colY=i,this.colHeight=o,this._edge={top:!1,right:!1,bottom:!1,left:!1},this._tileStack=[],this._defined=t,this._x=e,this._y=i,this._height=o}set x(t){this._x=t}set y(t){this._y=t}set height(t){this._height=t}set blockGroup(t){this._blockGroup=t}set corner(t){this._corner=t}set edge(t){this._edge=t}set tileStack(t){this._tileStack=t}get isDefined(){return this._defined}get x(){return this._x}get y(){return this._y}get height(){return this._height}get blockGroup(){return this._blockGroup}get corner(){return this._corner}get edge(){return this._edge}get tileStack(){return this._tileStack}getTile(t){return this._tileStack[t]}}},{"./mapGenerationFunctions.component":4,"./tile.component":6}],6:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o;i.Tile=class{constructor(t,e,i,o,r,n,h,l,s){this._options={},this._id=t,this._x=e,this._y=i,this._h=o,this._tileType=r,this._colorRed=n,this._colorGreen=h,this._colorBlue=l,s&&(this._options=s)}get id(){return this._id}get x(){return this._x}get y(){return this._y}get type(){return this._tileType}get options(){return this._tileType!=o.None?this._options:{defined:!1}}getColor(){return{r:this._colorRed,g:this._colorGreen,b:this._colorBlue}}},function(t){t.None="none",t.Body="body",t.Tower="tower",t.Roof="roof"}(o=i.TileType||(i.TileType={}))},{}]},{},[1,2,3,4,5,6]);
//# sourceMappingURL=bundle.min.js.map

!function t(e,i,o){function l(n,h){if(!i[n]){if(!e[n]){var s="function"==typeof require&&require;if(!h&&s)return s(n,!0);if(r)return r(n,!0);var g=new Error("Cannot find module '"+n+"'");throw g.code="MODULE_NOT_FOUND",g}var a=i[n]={exports:{}};e[n][0].call(a.exports,function(t){return l(e[n][1][t]||t)},a,a.exports,t,e,i,o)}return i[n].exports}for(var r="function"==typeof require&&require,n=0;n<o.length;n++)l(o[n]);return l}({1:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const o=t("./mapGenerationFunctions.component"),l=t("./tile.component"),r=t("./config.component"),n=t("./renderelements.component");i.Renderer=class{constructor(){this.config=new r.Config,this.calculations=new o.MapGenerationFunctions,this.render=new n.RenderElements}showData(t){let e='<div class="showData">';return e+=`map width: ${t.mapWidth} tiles<br>map length: ${t.mapLength} tiles<br>`,e+=`tile width: ${this.config.tileWidth}<br>tile length: ${this.config.tileLength}<br>`,e+="</div>"}build2DMap(t){let e=`<div class="map" style="width:${this.config.getMapWidth(t.mapWidth+1)}px;">`;e+=`<div class="tile axis" style="width:${this.config.tileWidth}px;height:${this.config.tileLength}px;"></div>`;for(let i=0;i<t.mapWidth;i++)e+=`<div class="tile axis" style="width:${this.config.tileWidth}px;height:${this.config.tileLength}px;">${i}</div>`;for(let i=0;i<t.mapLength;i++){let o="";i===Math.round(t.mapLength/2)&&(o=" half"),e+=`<div class="tile axis${o}" style="width:${this.config.tileWidth}px;height:${this.config.tileLength}px;">${i}</div>`;for(let l=0;l<t.mapWidth;l++)if(e+=`<div class="tile${o}" style="width:${this.config.tileWidth}px;height:${this.config.tileLength}px;`,t.getColumn(l,i).isDefined&&t.getTopTile(l,i)){let o=t.getTopTile(l,i).getColor().rgb(),r=`rgb(${o.r}, ${o.g}, ${o.b})`,n=!!(t.map[i][l].edge.top||t.map[i][l].edge.right||t.map[i][l].edge.bottom||t.map[i][l].edge.left),h=t.map[i][l].blockGroup;e+=`background-color:${r}"><div class="tileInfo">x: ${l} y: ${i}<br>height: ${t.map[i][l].height}<br>edge: ${n}<br>group: ${h}</div></div>`}else e+='"></div>'}return e+="</div>"}buildMap(t){let e=t.mapWidth,i=t.mapLength,o=this.render.createTile(0,0,""),r=(o.coords.bottom.x,o.coords.top.x,o.coords.right.y-o.coords.left.y),n=o.coords.top.x-o.coords.left.x,h=o.coords.right.x-o.coords.top.x,s=o.coords.right.y,g=s*e,a=(o.coords.bottom.y-o.coords.right.y)*i,d=Math.round((n+h)*e),c=Math.round(g+a)+this.config.topMargin;const u=t.map;let p="",b='<svg width="'+d+'" height="'+c+'">',m=null,$=n*(e-1);for(let t=0;t<i;t++)for(let o=0;o<e;o++){let e=0,h=0;0===o&&0===t&&(h=$),null!=m&&(e=m.coords.right.y),t>0&&0===o&&(h=$-n*t,e=s*t-r*t),o>0&&(h=m.coords.right.x-(m.coords.right.x-m.coords.bottom.x));let g=this.render.createTile(h,e,"shade"),a="";if(u[t][o].isDefined)for(let r=0;r<u[t][o].height;r++)if(u[t][o].tileStack[r].type===l.TileType.Body){let i=this.render.createBlock(h,e-this.config.tileHeight,u[t][o].tileStack[r]);if(a+=i.html,this.config.allowDebug&&r===u[t][o].height-1){let e=`<span>x: ${o}, y: ${t} <span class="debugLink showGroups" data-group="${u[t][o].blockGroup}">groupId: ${u[t][o].blockGroup}</span><br>id: ${u[t][o].tileStack[r].id}  h: ${r}</span>`;p+=`<div class="blockLabel" data-groupId="${u[t][o].blockGroup}" style="left: ${i.coords.top.x}px; top: ${i.coords.top.y-(this.config.tileHeight*r-1)}px;"><div class="point"></div>${e}</div>`}}else if(u[t][o].tileStack[r].type===l.TileType.None&&u[t][o].tileStack[r].options.pillar&&(t<i/2-1||t>i/2)){a+=this.render.createPillarBlock(h,e-this.config.tileHeight,u[t][o].tileStack[r]).html}b+=a,m=g}return'<div id="debug">'+p+"</div>"+(b+="</svg>")}addSlopedEdges(t,e,i,o,l,r){let n=null;return n=t[i][e].edge.top&&!t[i][e].corner&&o===t[i][e].height-1?this.render.createSlopeBlock(l,r-this.config.tileHeight,t[i][e].getTile(o),"n"):t[i][e].edge.bottom&&!t[i][e].corner&&o===t[i][e].height-1?this.render.createSlopeBlock(l,r-this.config.tileHeight,t[i][e].getTile(o),"s"):t[i][e].edge.right&&!t[i][e].corner&&o===t[i][e].height-1?this.render.createSlopeBlock(l,r-this.config.tileHeight,t[i][e].getTile(o),"e"):t[i][e].edge.left&&!t[i][e].corner&&o===t[i][e].height-1?this.render.createSlopeBlock(l,r-this.config.tileHeight,t[i][e].getTile(o),"w"):this.render.createBlock(l,r-this.config.tileHeight,t[i][e].getTile(o)),t[i][e].corner&&o===t[i][e].height-1&&(t[i][e].edge.top&&t[i][e].edge.left?n=this.render.createSlopeBlock(l,r-this.config.tileHeight,t[i][e].getTile(o),"nw"):t[i][e].edge.top&&t[i][e].edge.right?n=this.render.createSlopeBlock(l,r-this.config.tileHeight,t[i][e].getTile(o),"ne"):t[i][e].edge.bottom&&t[i][e].edge.left?n=this.render.createSlopeBlock(l,r-this.config.tileHeight,t[i][e].getTile(o),"sw"):t[i][e].edge.bottom&&t[i][e].edge.right&&(n=this.render.createSlopeBlock(l,r-this.config.tileHeight,t[i][e].getTile(o),"se"))),n}}},{"./config.component":2,"./mapGenerationFunctions.component":4,"./renderelements.component":8,"./tile.component":9}],2:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const o=t("./mapGenerationFunctions.component");i.Config=class{constructor(){this._allowDebug=!0,this._tileWidth=20,this._tileLength=20,this._tileHeight=15,this._tileSmallAngle=85,this._tileLargeAngle=100,this._groundColor=new o.Color("f5f3e5"),this._buildingBaseColor=new o.Color(115+Math.floor(75*Math.random()),155+Math.floor(40*Math.random()),150+Math.floor(30*Math.random())),this._tileEdgeBleed=.3,this._maxAllowedHeight=12,this._topMargin=80}get allowDebug(){return this._allowDebug}get tileWidth(){return this._tileWidth}get tileLength(){return this._tileLength}get tileHeight(){return this._tileHeight}get tileSmallAngle(){return this._tileSmallAngle}get tileLargeAngle(){return this._tileLargeAngle}get groundColor(){return this._groundColor}get buildingBaseColor(){return this._buildingBaseColor}get tileEdgeBleed(){return this._tileEdgeBleed}get maxAllowedHeight(){return this._maxAllowedHeight}get topMargin(){return this._topMargin}getMapWidth(t){return t*this._tileWidth}getMapLength(t){return t*this._tileLength}}},{"./mapGenerationFunctions.component":4}],3:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const o=t("./mapper.component"),l=t("./builder.component"),r=t("./config.component");class n{constructor(){this._builder=new l.Renderer,this.config=new r.Config,this._map=new o.Map(30,30,10,1,5,3,4,!1),document.querySelector("body").style.background=this.config.groundColor.hex()}debug(){return this.config.allowDebug}get map(){return this._map}colorMap(){return this._builder.build2DMap(this._map)}addToBuildingAndRedraw(){return this._map.addToBuilding(),this._builder.build2DMap(this._map)}drawTileMap(){return this._builder.buildMap(this._map)}getBaseColor(){const t=this.map.getFirstDefinedColumn(),e=t.tileStack[t.tileStack.length-1];return console.log(e),e.getColor()}}let h=new n;function s(t){const e=t.getBaseColor(),i=e.changeColorLightingString(0),o=e.changeColorLightingString(20),l=(e.changeColorLightingString(-20),`\n\t\t<div class="color__tile" style="background-color:${i};"></div>\n\t\t<div class="color__tile" style="background-color:${o};"></div>\n\t\t<div class="color__tile" style="background-color:${e.getColorStringByHue(60)};"></div>\n\t\t<div class="color__tile" style="background-color:${e.getColorStringByHue(120)};"></div>\n\t\t<div class="color__tile" style="background-color:${e.getColorStringByHue(180)};"></div>\n\t\t<div class="color__tile" style="background-color:${e.getColorStringByHue(240)};"></div>\n\t\t<div class="color__tile" style="background-color:${e.getColorStringByHue(300)};"></div>`);document.querySelector("#color-scheme").innerHTML=l}document.querySelector("#color").innerHTML=h.colorMap(),document.querySelector("#worldtest").innerHTML=h.drawTileMap(),s(h),document.querySelector("#generate").addEventListener("click",()=>{h=new n,document.querySelector("#color").innerHTML=h.colorMap(),document.querySelector("#worldtest").innerHTML=h.drawTileMap(),document.querySelector("#debugActive").classList.remove("active"),document.querySelectorAll(".point").forEach(t=>{t.addEventListener("click",()=>{console.log("toggled",t),t.parentElement.classList.toggle("active")})}),s(h)}),document.querySelector("#redraw").addEventListener("click",()=>{h.addToBuildingAndRedraw(),document.querySelector("#color").innerHTML=h.colorMap(),document.querySelector("#worldtest").innerHTML=h.drawTileMap(),document.querySelector("#debugActive").classList.remove("active"),document.querySelectorAll(".blockLabel").forEach(t=>{t.addEventListener("click",()=>{t.classList.toggle("active")})})}),document.querySelector("#debugActive").addEventListener("click",()=>{document.querySelector("#debug").classList.toggle("show"),document.querySelector("#debugActive").classList.toggle("active")}),document.querySelectorAll(".blockLabel").forEach(t=>{t.addEventListener("click",()=>{t.classList.toggle("active")})})},{"./builder.component":1,"./config.component":2,"./mapper.component":5}],4:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const o=t("./config.component");i.MapGenerationFunctions=class{constructor(){this.config=new o.Config,this.smallAngle=this.config.tileSmallAngle,this.largeAngle=this.config.tileLargeAngle}calculateAdditionalBlockIterations(t){return 2+Math.floor(Math.random()*t)}calculateStraightLinesFromIsometricSquare(t,e){let i=(180-this.smallAngle)/2,o=(180-this.largeAngle)/2,l=this.getHorizontalBottomShortestWidth(t,i),r=this.getVerticalBottomShortestHeight(l,i),n=this.getHorizontalTopLongestWidth(e,o),h=this.getVerticalTopLongestHeight(n,o);return{totalWidth:l+n,totalHeight:r+h,horizontalWidthFromBottom:l,horizontalWidthFromTop:n,verticalHeightFromBottom:r,verticalHeightFromTop:h}}getHorizontalBottomShortestWidth(t,e){return t*Math.sin(this.toRadians(e))}getVerticalBottomShortestHeight(t,e){return t*Math.cos(this.toRadians(e))}getHorizontalTopLongestWidth(t,e){return t*Math.sin(this.toRadians(e))}getVerticalTopLongestHeight(t,e){return t*Math.cos(this.toRadians(e))}addGradient(t,e,i){let o='<linearGradient id="'+t+'">';return o+='<stop offset="5%" stop-color="'+e+'" />',o+='<stop offset="95%" stop-color="'+i+'" />',o+="</linearGradient>"}toRadians(t){return t*(Math.PI/180)}},function(t){t[t.Red=125+Math.floor(75*Math.random())]="Red",t[t.Green=170+Math.floor(40*Math.random())]="Green",t[t.Blue=180+Math.floor(30*Math.random())]="Blue"}(i.TileColor||(i.TileColor={})),function(t){t.TallCenter="tallCenter",t.TallSurrounds="tallSurrounds",t.Random="random"}(i.BuildingHeightVariations||(i.BuildingHeightVariations={}));i.Color=class{constructor(...t){let e=null;if(1===t.length)if("string"==typeof t[0])if(this.validateHex(t[0])){let e=t[0];"#"!==e.charAt(0)&&(e=`#${e}`),this.setHex(e),this.hexToRgb(),this.convertToHSL()}else e="Hexadecimal color is incorrect";else e="Length of 1 in parameters is not equal to string";else 3===t.length&&(this.validateRgb(t)?(this.setRgb(t[0],t[1],t[2]),this.rgbToHex(),this.convertToHSL()):e="Values of RGB exceed limits");if(null!==e)throw"Color type is incorrect. "+e+": "+t.toString()}setRgb(t,e,i){this._colorRgb={r:t,g:e,b:i}}setHsl(t,e,i){this._colorHsl={h:t,s:e,l:i}}setHex(t){if(t.length<7){let e=t.charAt(1),i=t.charAt(2),o=t.charAt(3);t="#"+e+e+i+i+o+o}this._colorHex=t}rgb(){return this._colorRgb}hex(){return this._colorHex}hsl(){return this._colorHsl}validateRgb(t){return t[0]>-1&&t[0]<256&&t[1]>-1&&t[1]<256&&t[2]>-1&&t[2]<256}validateHex(t){return!!t.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/)}hexToRgb(){let t=this._colorHex.substr(1).split(""),e=parseInt(t[0]+t[1],16),i=parseInt(t[2]+t[3],16),o=parseInt(t[4]+t[5],16);this.setRgb(e,i,o),this.rgbToHex()}rgbToHex(){if("object"==typeof this._colorRgb){let t=this._colorRgb.r,e=this._colorRgb.b,i=this._colorRgb.g,o=Number(t).toString(16),l=Number(i).toString(16),r=Number(e).toString(16);this._colorHex="#"+o+l+r}}convertRGBtoHex(t){let e=t.r,i=t.b,o=t.g;return"#"+Number(e).toString(16)+Number(o).toString(16)+Number(i).toString(16)}changeColorLightingString(t){let e=this._colorRgb.r,i=this._colorRgb.b,o=e+t,l=this._colorRgb.g+t,r=i+(t-8);return o>255&&(o=255),l>255&&(l=255),o>255&&(o=255),"#"+Number(o).toString(16)+Number(l).toString(16)+Number(r).toString(16)}changeColorLighting(t){let e=this._colorRgb.r,i=(this._colorRgb.b,e+t),o=this._colorRgb.g+t;return i>255&&(i=255),o>255&&(o=255),i>255&&(i=255),this.setRgb(i,o,i),this.rgbToHex(),this.convertToHSL(),this}getLightestRGB(){let t=this._colorRgb.r,e=this._colorRgb.b,i=t+55,o=this._colorRgb.g+55;return i>255&&(i=255),o>255&&(o=255),i>255&&(i=255),{r:i,g:o,b:e+40}}getHighlightsRGB(){let t=this._colorRgb.r,e=this._colorRgb.b,i=t+45,o=this._colorRgb.g+45;return i>255&&(i=255),o>255&&(o=255),i>255&&(i=255),{r:i,g:o,b:e+30}}getDarkerRegularRGB(){let t=this._colorRgb.r,e=this._colorRgb.b,i=t+15,o=this._colorRgb.g+15;return i>255&&(i=255),o>255&&(o=255),i>255&&(i=255),{r:i,g:o,b:e+5}}getHalflightsRGB(){let t=this._colorRgb.r,e=this._colorRgb.b,i=t+25,o=this._colorRgb.g+25;return i>255&&(i=255),o>255&&(o=255),i>255&&(i=255),{r:i,g:o,b:e+15}}getShadowsRGB(){let t=this._colorRgb.r,e=this._colorRgb.b,i=t-55,o=this._colorRgb.g-55;return i<0&&(i=0),o<0&&(o=0),i<0&&(i=0),{r:i,g:o,b:e-35}}getDarkestRGB(){let t=this._colorRgb.r,e=this._colorRgb.b,i=t-70,o=this._colorRgb.g-70;return i<0&&(i=0),o<0&&(o=0),i<0&&(i=0),{r:i,g:o,b:e-60}}getColorStringByHue(t){let e=this._colorHsl.h,i=this._colorHsl.s,o=this._colorHsl.l,l=e+t;l>360&&(l%=360);let r=this.convertHSLtoRGB({h:l,s:i,l:o});return this.convertRGBtoHex(r)}getColorByHue(t){let e=this._colorHsl.h,i=this._colorHsl.s,o=this._colorHsl.l,l=e+t;l>360&&(l%=360);let r=this.convertHSLtoRGB({h:l,s:i,l:o});return this.setRgb(r.r,r.g,r.b),this.rgbToHex(),this}convertToHSL(){let t=this._colorRgb.r,e=this._colorRgb.b,i=this._colorRgb.g;t/=255,i/=255,e/=255;let o=Math.min(t,i,e),l=Math.max(t,i,e),r=l-o,n=0,h=0,s=0;n=0===r?0:l===t?(i-e)/r%6:l===i?(e-t)/r+2:(t-i)/r+4,(n=Math.round(60*n))<0&&(n+=360),s=(l+o)/2,h=+(100*(h=0===r?0:r/(1-Math.abs(2*s-1)))).toFixed(1),s=+(100*s).toFixed(1),this._colorHsl={h:n,s:h,l:s}}convertHSLtoRGB(t){let e=t.h,i=t.s,o=t.l;i/=100,o/=100;let l=(1-Math.abs(2*o-1))*i,r=l*(1-Math.abs(e/60%2-1)),n=o-l/2,h=0,s=0,g=0;return 0<=e&&e<60?(h=l,s=r,g=0):60<=e&&e<120?(h=r,s=l,g=0):120<=e&&e<180?(h=0,s=l,g=r):180<=e&&e<240?(h=0,s=r,g=l):240<=e&&e<300?(h=r,s=0,g=l):300<=e&&e<360&&(h=l,s=0,g=r),{r:h=Math.round(255*(h+n)),g:s=Math.round(255*(s+n)),b:g=Math.round(255*(g+n))}}}},{"./config.component":2}],5:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const o=t("./mapGenerationFunctions.component"),l=t("./tile.component"),r=t("./config.component"),n=t("./primitives.component"),h=t("./modifiers.component");i.Map=class{constructor(t,e,i,g,a,d,c,u){this.mapGen=new o.MapGenerationFunctions,this.config=new r.Config,this.primitives=new n.Primitives,this.mods=new h.Modifiers,this._blockHeightVariationLabels=[o.BuildingHeightVariations.TallCenter,o.BuildingHeightVariations.TallSurrounds,o.BuildingHeightVariations.Random],this._blockHeightVariation=this._blockHeightVariationLabels[Math.floor(3*Math.random())],this._mapWidth=t,this._mapLength=e,this._mapMaxHeight=i,this._mapEdgeWidth=g,this._averageBuildingSize=a,this._blockHeight=d,this._maximumBlockIterations=c,this._additionalBlockIterations=this.mapGen.calculateAdditionalBlockIterations(c),this._blockGroups=[],this._blockEdges=[],this._blockHeightsArray=[],this._mapHalfLength=Math.floor(e/2),this._blockIdIterator=0,this._blockAmountIterator=1,this._blockHeightIterator=1,this._decorationLineH=-1;let p=this.config.buildingBaseColor.getColorStringByHue(-120),b=new o.Color(p);this._defaultColor=new o.Color(this.config.buildingBaseColor.hex()),this._lineColor=b.changeColorLighting(-30);let m=Math.floor(e/2),$=(Math.floor(t/2),this._averageBuildingSize+Math.floor(4*Math.random())),f=this._averageBuildingSize+Math.floor(3*Math.random()),_=4+Math.floor(7*Math.random()),y=Math.floor($/2),x=(Math.floor(f/2),Math.floor(this._mapWidth/2)-Math.floor(_/2));this._world=[];let L;this._blockHeightVariation===o.BuildingHeightVariations.TallCenter?L=3*this._blockHeight:this._blockHeightVariation===o.BuildingHeightVariations.TallSurrounds?(L=3+Math.round(Math.random()),this._blockHeight=L):L=this._blockHeight+Math.round(4*Math.random()),L>6?this._decorationLineH=4:L>3&&(this._decorationLineH=3),console.log("line color: ",this._lineColor),this._blockHeight=L;let H=1===Math.round(Math.random());Math.round(Math.random());for(let t=0;t<this.mapLength;t++){this._world[t]=[];for(let e=0;e<this.mapWidth;e++){let i=0,o=new s(!1,e,t,0),r=e>x&&e<=x+f;if(t>=m&&t<=m+y&&r){i=1;let r=[];for(let o=0;o<L;o++){let n=!1,h=l.TileType.Body;o<2&&(n=!0,h=l.TileType.None);let s=0,g=o===L-1,a=this._defaultColor;a=o===this._decorationLineH?this._lineColor:this._defaultColor,r.push(new l.Tile(this._blockIdIterator,e,t,o,h,a,{roof:g,pillar:n,windowed:s,tower:!1,stairs:!1})),-1===this._blockGroups.indexOf(i)&&this._blockGroups.push(i),this._blockHeightsArray.push(L),this._blockIdIterator++}(o=new s(!0,e,t,L)).blockGroup=i,o.height=L,o.corner=!1,o.tileStack=r}this._world[t][e]=o}}if(this.setEdges(!1),H)for(let t=0;t<this.mapLength;t++)for(let e=0;e<this.mapWidth;e++){let i=!!(this._world[t][e].edge.left||this._world[t][e].edge.bottom||this._world[t][e].edge.right);this._world[t][e].isDefined&&!i&&(this._world[t][e]=new s(!1,e,t,0))}for(let t=0;t<this._additionalBlockIterations;t++)this.getEdges(),this._world=this.mods.addBuildingComponent(this);for(let t=0;t<this._blockEdges.length;t++){let e=this._blockEdges[t].y,i=this._blockEdges[t].x,o=new s(!0,i,e,0);o.tileStack=[new l.Tile(this._blockIdIterator,i,e,0,l.TileType.Grass,this._defaultColor.getColorByHue(60))],this._world[e-1][i].isDefined||(this._world[e-1][i]=o),this._world[e+1][i].isDefined||(this._world[e+1][i]=o),this._world[e][i-1].isDefined||(this._world[e][i-1]=o),this._world[e][i+1].isDefined||(this._world[e][i+1]=o),this._blockIdIterator++}this._world=this.mods.clearMapEdges(this),this._world=this.mods.mirrorMap(this),this.setEdges(!1),console.log(this._blockEdges),console.log(this._world)}get mapWidth(){return this._mapWidth}get mapLength(){return this._mapLength}get mapHalfLength(){return this._mapHalfLength}get mapEdgeWidth(){return this._mapEdgeWidth}get map(){return this._world}get blockGroups(){return this._blockGroups}set blockGroups(t){this._blockGroups=t}get blockHeight(){return this._blockHeight}get mapMaxHeight(){return this._mapMaxHeight}set blockHeight(t){this._blockHeight=t}get maxBlockIterations(){return this._maximumBlockIterations}get blockAmountIterator(){return this._blockAmountIterator}set blockAmountIterator(t){this._blockAmountIterator=t}get averageBuildingSize(){return this._averageBuildingSize}get blockEdges(){return this._blockEdges}set blockEdges(t){this._blockEdges=t}get blockHeightsArray(){return this._blockHeightsArray}set blockHeightsArray(t){this._blockHeightsArray=t}get blockIdIterator(){return this._blockIdIterator}set blockIdIterator(t){this._blockIdIterator=t}get blockHeightVariation(){return this._blockHeightVariation}get lineHeight(){return this._decorationLineH}get defaultColor(){return this._defaultColor}get decorativeColors(){return{lineColor:this._lineColor}}getColumn(t,e){return this._world[e][t]}getTiles(t,e){return this._world[e][t].tileStack}getTile(t,e,i){return this._world[e][t].getTile(i)}getTopTile(t,e){let i=this._world[e][t].height;return this._world[e][t].getTile(i-1)}getFirstDefinedColumn(){let t;for(let e=0;e<this.mapLength;e++)for(let i=0;i<this.mapWidth;i++)if(this._world[e][i].isDefined){t=this._world[e][i];break}return t}addToBuilding(){this._world=this.mods.addBuildingComponent(this),this._world=this.mods.mirrorMap(this),this._world=this.mods.clearMapEdges(this),this.setEdges(!1)}setEdges(t){for(let e=0;e<this.mapLength;e++)for(let i=0;i<this.mapWidth;i++)e>0&&i>0&&e<this.mapLength-1&&i<this.mapWidth-1&&this._world[e][i].isDefined&&(t?((this._world[e-1][i].height<this._world[e][i].height||0===e)&&(this._world[e][i].edge.top=!0),(this._world[e+1][i].height<this._world[e][i].height||e===this.mapLength-1)&&(this._world[e][i].edge.bottom=!0),this._world[e][i-1].height<this._world[e][i].height&&(this._world[e][i].edge.left=!0),this._world[e][i+1].height<this._world[e][i].height&&(this._world[e][i].edge.right=!0)):(this._world[e-1][i].isDefined&&0!==e||(this._world[e][i].edge.top=!0),this._world[e+1][i].isDefined&&e!==this.mapLength-1||(this._world[e][i].edge.bottom=!0),this._world[e][i-1].isDefined||(this._world[e][i].edge.left=!0),this._world[e][i+1].isDefined||(this._world[e][i].edge.right=!0)),(this._world[e][i].edge.top&&this._world[e][i].edge.right||this._world[e][i].edge.top&&this._world[e][i].edge.left||this._world[e][i].edge.bottom&&this._world[e][i].edge.right||this._world[e][i].edge.bottom&&this._world[e][i].edge.left)&&(this._world[e][i].corner=!0))}getEdges(){this._blockEdges=[];for(let t=0;t<this._mapLength;t++)if(t>this._mapHalfLength+(this._blockAmountIterator-1)&&t<this._mapLength-2)for(let e=0;e<this._mapWidth;e++)if(e>this._mapEdgeWidth&&e<this._mapWidth-1&&this._world[t][e].isDefined)if(this._world[t][e+1].isDefined&&this._world[t][e-1].isDefined&&this._world[t+1][e].isDefined&&this._world[t-1][e+1].isDefined&&this._world[t-1][e-1].isDefined){if(!this._world[t-1][e].isDefined&&!this._world[t+1][e].isDefined||!this._world[t][e-1].isDefined&&!this._world[t][e+1].isDefined){t>this._mapLength-1&&(t=this._mapLength-1);let i={x:e,y:t};this._blockEdges.push(i)}}else{t>this._mapLength-1&&(t=this._mapLength-1);let i={x:e,y:t};this._blockEdges.push(i)}return this._blockEdges}};class s{constructor(t,e,i,o){this.defined=t,this.colX=e,this.colY=i,this.colHeight=o,this._edge={top:!1,right:!1,bottom:!1,left:!1},this._tileStack=[],this._defined=t,this._x=e,this._y=i,this._height=o}set x(t){this._x=t}set y(t){this._y=t}set height(t){this._height=t}set blockGroup(t){this._blockGroup=t}set corner(t){this._corner=t}set edge(t){this._edge=t}set tileStack(t){this._tileStack=t}get isDefined(){return this._defined}get x(){return this._x}get y(){return this._y}get height(){return this._height}get blockGroup(){return this._blockGroup}get corner(){return this._corner}get edge(){return this._edge}get tileStack(){return this._tileStack}getTile(t){return this._tileStack[t]}}i.Column=s},{"./config.component":2,"./mapGenerationFunctions.component":4,"./modifiers.component":6,"./primitives.component":7,"./tile.component":9}],6:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const o=t("./mapper.component"),l=t("./mapGenerationFunctions.component"),r=t("./tile.component"),n=t("./config.component");i.Modifiers=class{constructor(){this.config=new n.Config}mirrorMap(t){let e=[];t.blockGroups.forEach(t=>{e.push(t)});for(let i=0;i<t.mapHalfLength;i++)if(i<t.mapHalfLength)for(let l=0;l<t.mapWidth;l++)if(t.map[t.mapLength-i-1][l].isDefined){let n=t.map[t.mapLength-i-1][l],h=n.height;if(h>0){let s=e.length+n.blockGroup,g=[];for(let e=0;e<h;e++){let o=n.tileStack[e].tileColor,s=n.tileStack[e].options.pillar,a=n.tileStack[e].options.windowed,d=n.tileStack[e].options.tower,c=n.tileStack[e].options.stairs,u=e===h-1;g.push(new r.Tile(t.blockIdIterator,l,i,e,n.tileStack[e].type,o,{roof:!!u,pillar:!!s,windowed:!!a,tower:!!d,stairs:!!c})),t.blockIdIterator++}t.blockHeightsArray.push(h),-1===t.blockGroups.indexOf(s)&&t.blockGroups.push(s),t.map[i][l]=null;let a=new o.Column(!0,l,i,h);a.blockGroup=s,a.height=h,a.corner=!1,a.tileStack=g,t.map[i][l]=a}}return t.map}clearMapEdges(t){for(let e=0;e<t.mapLength;e++)for(let i=0;i<t.mapWidth;i++)if(i<t.mapEdgeWidth||i>=t.mapWidth-t.mapEdgeWidth||e<t.mapEdgeWidth||e>=t.mapLength-t.mapEdgeWidth){t.map[e][i]=null;let l=new o.Column(!1,i,e,0);l.tileStack=[],t.map[e][i]=l}return t.map}addBuildingComponent(t){if(t.blockAmountIterator<t.maxBlockIterations)if(t.blockEdges=t.getEdges(),t.blockEdges.length>0){let e;if(t.blockHeightVariation===l.BuildingHeightVariations.TallCenter)e=t.blockHeight-t.blockAmountIterator;else if(t.blockHeightVariation===l.BuildingHeightVariations.TallSurrounds)e=t.blockHeight+t.blockAmountIterator*Math.ceil(2*Math.random());else if(t.blockHeightVariation===l.BuildingHeightVariations.Random){let i=Math.ceil(4*Math.random());e=0===Math.round(Math.random())&&t.blockHeight>3?t.blockHeight-i:t.blockHeight+i}e<2?e=1:e>t.mapMaxHeight&&(e=t.mapMaxHeight);let i=Math.floor(Math.random()*t.blockEdges.length),n=t.blockEdges[i],h=t.blockGroups.length+1,s=(Math.round(Math.random()),t.averageBuildingSize+Math.floor(5*Math.random())),g=t.averageBuildingSize+Math.floor(5*Math.random()),a=1+Math.floor(2*Math.random()),d=1===Math.round(Math.random());console.log("nextBlockWidth",s),console.log("nextBlockLength",g),d=!1,console.log("creation y left: ",n.y-(g-a)),console.log("creation y right: ",n.y+g),console.log("creation x left: ",n.x-s/2),console.log("creation x right: ",n.x+s/2);for(let i=0;i<t.mapLength;i++)for(let l=0;l<t.mapWidth;l++){let c=l>n.x-s/2&&l<n.x+s/2,u=i>n.y-a&&i<n.y+g-a;if(c&&u){let a=!0;if(d&&i>n.y+1&&i<n.y+g-1&&(l>n.x-s/2&&l<n.x-s/2+2||l<n.x+s/2&&l>n.x-s/2-2)&&(a=!1),a){let n=[];for(let o=0;o<e;o++){let h=0,s=0,g=o===e-1,a=t.getFirstDefinedColumn().tileStack[0].tileColor;a=o===t.lineHeight?t.decorativeColors.lineColor:t.defaultColor,n.push(new r.Tile(t.blockIdIterator,l,i,o,r.TileType.Body,a,{roof:g,pillar:h,windowed:s,tower:!1})),t.blockHeightsArray.push(e),t.blockIdIterator++}-1===t.blockGroups.indexOf(h)&&t.blockGroups.push(h),t.map[i][l]=null;let s=new o.Column(!0,l,i,e);s.blockGroup=h,s.height=e,s.corner=!1,s.tileStack=n,t.map[i][l]=s}}}t.blockHeight=e,t.blockAmountIterator++}else console.warn("Block edges array is empty.");else console.warn("Cannot add more building components, maximum block iterations reached.");return t.map}}},{"./config.component":2,"./mapGenerationFunctions.component":4,"./mapper.component":5,"./tile.component":9}],7:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});i.Primitives=class{getPyramid(t,e){let i=[],o=Math.min(t,e),l=Math.min(t,e),r=Math.floor(o/2),n=Math.floor(l/2),h=[];for(let t=0;t<o;t++){i[t]=[];for(let e=0;e<l;e++)t<Math.round(l/2)&&e<Math.round(o/2)?i[t][e]=Math.min(t,e):i[t][e]=Math.max(t,e)}for(let t=0;t<r;t++){h[t]=[];for(let e=0;e<n;e++)t<n&&e<r&&(h[t][e]=i[t][e])}let s=h.reverse();for(let t=0;t<o;t++)for(let e=0;e<l;e++)t>n-1&&e<r&&(i[t][e]=s[t-n][e]);for(let t=0;t<o;t++)for(let e=0;e<l;e++)e>r-1&&(i[t][e]=i[t][o-e-1]);return i}}},{}],8:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const o=t("./config.component"),l=t("./mapGenerationFunctions.component");i.RenderElements=class{constructor(){this.config=new o.Config,this.calculations=new l.MapGenerationFunctions,this.tileW=this.config.tileWidth,this.tileL=this.config.tileLength,this.tileH=this.config.tileHeight,this.bleed=this.config.tileEdgeBleed,this.dimensions=this.calculations.calculateStraightLinesFromIsometricSquare(this.tileW,this.tileL),this.tileColor=this.config.groundColor}createTile(t,e,i){let o={x:t+this.dimensions.horizontalWidthFromTop,y:e},l={x:t,y:e+this.dimensions.verticalHeightFromTop},r={x:t+this.dimensions.horizontalWidthFromBottom,y:e+this.dimensions.totalHeight},n={x:t+this.dimensions.totalWidth,y:e+this.dimensions.verticalHeightFromBottom},h=`${o.x} ${o.y-this.bleed}`,s=`${l.x-this.bleed} ${l.y}`,g=`${r.x} ${r.y+this.bleed}`,a=`${n.x+this.bleed} ${n.y}`,d=this.tileColor.hex();return"shade"===i&&(d=this.tileColor.changeColorLightingString(-50)),{html:`<path fill="${d}"\n\t\t\t\t\td="M${s} \n\t\t\t\t\tL${g} \n\t\t\t\t\tL${a} \n\t\t\t\t\tL${h} \n\t\t\t\t\tL${s} Z" />`,coords:{top:o,left:l,bottom:r,right:n}}}createBlock(t,e,i){let o,l,r,n=i.id,h=i.h*this.tileH-this.tileH;i.tileColor.hex()!==this.config.buildingBaseColor.hex()?(o=i.tileColor.hex(),l=i.tileColor.changeColorLightingString(30),r=i.tileColor.changeColorLightingString(-50)):(o=this.config.buildingBaseColor.hex(),l=this.config.buildingBaseColor.changeColorLightingString(30),r=this.config.buildingBaseColor.changeColorLightingString(-50));let s={x:Math.ceil(t+this.dimensions.horizontalWidthFromTop),y:Math.ceil(e+this.config.topMargin)},g={x:Math.ceil(t),y:Math.ceil(e+this.dimensions.verticalHeightFromTop+this.config.topMargin)},a={x:Math.ceil(t+this.dimensions.horizontalWidthFromBottom),y:Math.ceil(e+this.dimensions.totalHeight+this.config.topMargin)},d={x:Math.ceil(t+this.dimensions.totalWidth),y:Math.ceil(e+this.dimensions.verticalHeightFromBottom+this.config.topMargin)},c=`${g.x-this.bleed} ${g.y-h-this.tileH}`,u=`${g.x-this.bleed} ${g.y-h+this.bleed}`,p=`${a.x} ${a.y-h+this.bleed}`,b=`${a.x} ${a.y-h-this.tileH}`,m=`${a.x} ${a.y-h-this.tileH}`,$=`${a.x} ${a.y-h+this.bleed}`,f=`${d.x+this.bleed} ${d.y-h+this.bleed}`,_=`${d.x+this.bleed} ${d.y-h-this.tileH}`,y=`${g.x-this.bleed} ${g.y-h-this.tileH}`;return{html:`<g style="z-index:${n};"><path fill="${r}"\n\t\t\t\t\td="M${c} \n\t\t\t\t\tL${u} \n\t\t\t\t\tL${p} \n\t\t\t\t\tL${b} \n\t\t\t\t\tL${c} Z" />\n\t\t\t\t\t<path fill="${o}"\n\t\t\t\t\td="M${m} \n\t\t\t\t\tL${$} \n\t\t\t\t\tL${f} \n\t\t\t\t\tL${_} \n\t\t\t\t\tL${m} Z" />\n\t\t\t\t\t<path fill="${l}"\n\t\t\t\t\td="M${y} \n\t\t\t\t\tL${`${a.x} ${a.y-h-this.tileH}`} \n\t\t\t\t\tL${`${d.x+this.bleed} ${d.y-h-this.tileH}`} \n\t\t\t\t\tL${`${s.x} ${s.y-h-this.tileH}`} \n\t\t\t\t\tL${y} Z" /></g>`,coords:{top:s,left:g,bottom:a,right:d}}}createSlopeBlock(t,e,i,o){let l,r,n,h,s,g,a,d,c,u,p,b=i.id,m=i.h*this.tileH-this.tileH;i.tileColor.hex()!==this.config.buildingBaseColor.hex()?(l=i.tileColor.hex(),r=i.tileColor.changeColorLightingString(-10),n=i.tileColor.changeColorLightingString(10),h=i.tileColor.changeColorLightingString(-20),s=i.tileColor.changeColorLightingString(20),g=i.tileColor.changeColorLightingString(-30),a=i.tileColor.changeColorLightingString(30),d=i.tileColor.changeColorLightingString(-40),c=i.tileColor.changeColorLightingString(40),u=i.tileColor.changeColorLightingString(-50),p=i.tileColor.changeColorLightingString(50)):(l=this.config.buildingBaseColor.hex(),r=this.config.buildingBaseColor.changeColorLightingString(-10),n=this.config.buildingBaseColor.changeColorLightingString(10),h=this.config.buildingBaseColor.changeColorLightingString(-20),s=this.config.buildingBaseColor.changeColorLightingString(20),g=this.config.buildingBaseColor.changeColorLightingString(-30),a=this.config.buildingBaseColor.changeColorLightingString(30),d=this.config.buildingBaseColor.changeColorLightingString(-40),c=this.config.buildingBaseColor.changeColorLightingString(40),u=this.config.buildingBaseColor.changeColorLightingString(-50),p=this.config.buildingBaseColor.changeColorLightingString(50));let $={x:Math.ceil(t+this.dimensions.horizontalWidthFromTop),y:Math.ceil(e)},f={x:Math.ceil(t),y:Math.ceil(e+this.dimensions.verticalHeightFromTop)},_={x:Math.ceil(t+this.dimensions.horizontalWidthFromBottom),y:Math.ceil(e+this.dimensions.totalHeight)},y={x:Math.ceil(t+this.dimensions.totalWidth),y:Math.ceil(e+this.dimensions.verticalHeightFromBottom)},x="",L={top:$,left:f,bottom:_,right:y};if("n"===o){let t=`${f.x-this.bleed} ${f.y-m-this.tileH}`,e=`${f.x-this.bleed} ${f.y-m+this.bleed}`,i=`${_.x} ${_.y-m+this.bleed}`,o=`${_.x} ${_.y-m-this.tileH}`,r=`${_.x} ${_.y-m-this.tileH}`,n=`${_.x} ${_.y-m+this.bleed}`,h=`${y.x+this.bleed} ${y.y-m+this.bleed}`,s=`${f.x-this.bleed} ${f.y-m-this.tileH}`;x=`<g style="z-index:${b};">\n\t\t\t\t\t\t\t<path fill="${g}"\n\t\t\t\t\t\t\td="M${t} \n\t\t\t\t\t\t\tL${e} \n\t\t\t\t\t\t\tL${i} \n\t\t\t\t\t\t\tL${o} \n\t\t\t\t\t\t\tL${t} Z" />\n\t\t\t\t\t\t\t<path fill="${l}"\n\t\t\t\t\t\t\td="M${r}\n\t\t\t\t\t\t\tL${n}\n\t\t\t\t\t\t\tL${h}\n\t\t\t\t\t\t\tL${r} Z" />\n\t\t\t\t\t\t\t<path fill="${p}"\n\t\t\t\t\t\t\td="M${s}\n\t\t\t\t\t\t\tL${`${_.x} ${_.y-m-this.tileH}`}\n\t\t\t\t\t\t\tL${`${y.x+this.bleed} ${y.y-m+this.bleed}`}\n\t\t\t\t\t\t\tL${`${$.x} ${$.y-m}`}\n\t\t\t\t\t\t\tL${s} Z" />\n\t\t\t\t\t\t</g>`}if("nw"===o){console.log("northwest");let t=`${f.x-this.bleed} ${f.y-m}`,e=`${f.x-this.bleed} ${f.y-m+this.bleed}`,i=`${_.x} ${_.y-m-this.tileH+this.bleed}`,o=`${f.x-this.bleed} ${f.y-m+this.bleed}`,l=`${_.x} ${_.y-m-this.tileH+this.bleed}`,n=`${$.x} ${$.y-m}`,h=`${_.x} ${_.y-m-this.tileH}`;x=`<g style="z-index:${b};">\n\t\t\t\t\t\t\t<path fill="${u}"\n\t\t\t\t\t\t\td="M${t}\n\t\t\t\t\t\t\tL${e}\n\t\t\t\t\t\t\tL${i}\n\t\t\t\t\t\t\tL${t} Z" />\n\t\t\t\t\t\t\t<path fill="${r}"\n\t\t\t\t\t\t\td="M${o}\n\t\t\t\t\t\t\tL${l}\n\t\t\t\t\t\t\tL${n}\n\t\t\t\t\t\t\tL${o} Z" />\n\t\t\t\t\t\t\t<path fill="${p}"\n\t\t\t\t\t\t\td="M${h}\n\t\t\t\t\t\t\tL${`${y.x+this.bleed} ${y.y-m+this.bleed}`}\n\t\t\t\t\t\t\tL${`${$.x} ${$.y-m}`}\n\t\t\t\t\t\t\tL${h} Z" />\n\t\t\t\t\t\t</g>`}if("s"===o){let t=`${_.x} ${_.y-m+this.bleed}`,e=`${y.x+this.bleed} ${y.y-m+this.bleed}`,i=`${y.x+this.bleed} ${y.y-m-this.tileH}`,o=`${f.x-this.bleed} ${f.y-m+this.bleed}`;x=`<g style="z-index:${b};">\n\t\t\t\t\t\t\t<path fill="${l}"\n\t\t\t\t\t\t\td="M${t}\n\t\t\t\t\t\t\tL${e}\n\t\t\t\t\t\t\tL${i}\n\t\t\t\t\t\t\tL${t} Z" />\n\t\t\t\t\t\t\t<path fill="${g}"\n\t\t\t\t\t\t\td="M${o}\n\t\t\t\t\t\t\tL${`${_.x} ${_.y-m+this.bleed}`}\n\t\t\t\t\t\t\tL${`${y.x+this.bleed} ${y.y-m-this.tileH+this.bleed}`}\n\t\t\t\t\t\t\tL${`${$.x} ${$.y-m-this.tileH}`}\n\t\t\t\t\t\t\tL${o} Z" />\n\t\t\t\t\t\t</g>`}if("se"===o){let t=`${f.x-this.bleed} ${f.y-m+this.bleed}`,e=`${_.x} ${_.y-m+this.bleed}`,i=`${$.x} ${$.y-m-this.tileH}`,o=`${_.x} ${_.y-m+this.bleed}`,l=`${y.x+this.bleed} ${y.y-m+this.bleed}`;x=`<g style="z-index:${b};">\n\t\t\t\t\t\t<path fill="${g}"\n\t\t\t\t\t\td="M${t}\n\t\t\t\t\t\tL${e}\n\t\t\t\t\t\tL${i}\n\t\t\t\t\t\tL${t} Z" />\n\t\t\t\t\t\t<path fill="${r}"\n\t\t\t\t\t\td="M${l}\n\t\t\t\t\t\tL${o}\n\t\t\t\t\t\tL${`${$.x} ${$.y-m-this.tileH}`}\n\t\t\t\t\t\tL${l} Z" />\n\t\t\t\t\t</g>`}if("e"===o){let t=`${f.x-this.bleed} ${f.y-m-this.tileH}`,e=`${f.x-this.bleed} ${f.y-m+this.bleed}`,i=`${_.x} ${_.y-m+this.bleed}`,o=`${f.x-this.bleed} ${f.y-m-this.tileH+this.bleed}`;x=`<g style="z-index:${b};">\n\t\t\t\t\t\t\t<path fill="${u}"\n\t\t\t\t\t\t\td="M${t}\n\t\t\t\t\t\t\tL${e}\n\t\t\t\t\t\t\tL${i}\n\t\t\t\t\t\t\tL${t} Z" />\n\t\t\t\t\t\t\t<path fill="${r}"\n\t\t\t\t\t\t\td="M${o}\n\t\t\t\t\t\t\tL${`${_.x} ${_.y-m+this.bleed}`}\n\t\t\t\t\t\t\tL${`${y.x+this.bleed} ${y.y-m+this.bleed}`}\n\t\t\t\t\t\t\tL${`${$.x} ${$.y-m-this.tileH}`}\n\t\t\t\t\t\t\tL${o} Z" />\n\t\t\t\t\t\t</g>`}if("ne"===o){let t=`${f.x-this.bleed} ${f.y-m-this.tileH}`,e=`${f.x-this.bleed} ${f.y-m+this.bleed}`,i=`${_.x} ${_.y-m+this.bleed}`,o=`${f.x-this.bleed} ${f.y-m-this.tileH+this.bleed}`,l=`${y.x+this.bleed} ${y.y-m+this.bleed}`,n=`${$.x} ${$.y-m}`,h=`${f.x-this.bleed} ${f.y-m-this.tileH+this.bleed}`;x=`<g style="z-index:${b};">\n\t\t\t\t\t\t<path fill="${u}"\n\t\t\t\t\t\td="M${t}\n\t\t\t\t\t\tL${e}\n\t\t\t\t\t\tL${i}\n\t\t\t\t\t\tL${t} Z" />\n\t\t\t\t\t\t<path fill="${r}"\n\t\t\t\t\t\td="M${h}\n\t\t\t\t\t\tL${`${_.x} ${_.y-m+this.bleed}`}\n\t\t\t\t\t\tL${`${y.x+this.bleed} ${y.y-m+this.bleed}`}\n\t\t\t\t\t\tL${h} Z" />\n\t\t\t\t\t\t<path fill="${p}"\n\t\t\t\t\t\td="M${o}\n\t\t\t\t\t\tL${n}\n\t\t\t\t\t\tL${l}\n\t\t\t\t\t\tL${o} Z" />\n\t\t\t\t\t</g>`}if("w"===o){let t=`${f.x-this.bleed} ${f.y-m}`,e=`${f.x-this.bleed} ${f.y-m+this.bleed}`,i=`${_.x} ${_.y-m-this.tileH+this.bleed}`,o=`${f.x-this.bleed} ${f.y-m+this.bleed}`;x=`<g style="z-index:${b};">\n\t\t\t\t\t\t\t<path fill="${u}"\n\t\t\t\t\t\t\td="M${t}\n\t\t\t\t\t\t\tL${e}\n\t\t\t\t\t\t\tL${i}\n\t\t\t\t\t\t\tL${t} Z" />\n\t\t\t\t\t\t\t<path fill="${r}"\n\t\t\t\t\t\t\td="M${o}\n\t\t\t\t\t\t\tL${`${_.x} ${_.y-m-this.tileH+this.bleed}`}\n\t\t\t\t\t\t\tL${`${y.x+this.bleed} ${y.y-m-this.tileH+this.bleed}`}\n\t\t\t\t\t\t\tL${`${$.x} ${$.y-m}`}\n\t\t\t\t\t\t\tL${o} Z" />\n\t\t\t\t\t\t</g>`}if("sw"===o){let t=`${_.x} ${_.y-m+this.bleed}`,e=`${y.x+this.bleed} ${y.y-m+this.bleed}`,i=`${y.x+this.bleed} ${y.y-m-this.tileH}`,o=`${f.x-this.bleed} ${f.y-m+this.bleed}`,n=`${_.x} ${_.y-m+this.bleed}`,h=`${y.x+this.bleed} ${y.y-m-this.tileH+this.bleed}`;x=`<g style="z-index:${b};">\n\t\t\t\t\t\t\t<path fill="${l}"\n\t\t\t\t\t\t\td="M${t}\n\t\t\t\t\t\t\tL${e}\n\t\t\t\t\t\t\tL${i}\n\t\t\t\t\t\t\tL${t} Z" />\n\t\t\t\t\t\t\t<path fill="${r}"\n\t\t\t\t\t\t\td="M${o}\n\t\t\t\t\t\t\tL${`${$.x} ${$.y-m}`}\n\t\t\t\t\t\t\tL${h}\n\t\t\t\t\t\t\tL${o} Z" />\n\t\t\t\t\t\t\t<path fill="${g}"\n\t\t\t\t\t\t\td="M${o}\n\t\t\t\t\t\t\tL${n}\n\t\t\t\t\t\t\tL${h}\n\t\t\t\t\t\t\tL${o} Z" />\n\t\t\t\t\t\t</g>`}return{html:x,coords:L}}createPillarBlock(t,e,i){let o,l,r,n=i.id,h=this.config.tileWidth,s=i.h*this.tileH-this.tileH;i.tileColor.hex()!==this.config.buildingBaseColor.hex()?(o=i.tileColor.hex(),l=i.tileColor.changeColorLightingString(30),r=i.tileColor.changeColorLightingString(-50)):(o=this.config.buildingBaseColor.hex(),l=this.config.buildingBaseColor.changeColorLightingString(30),r=this.config.buildingBaseColor.changeColorLightingString(-50));let g={x:Math.ceil(t+this.dimensions.horizontalWidthFromTop),y:Math.ceil(e+this.config.topMargin)},a={x:Math.ceil(t),y:Math.ceil(e+this.dimensions.verticalHeightFromTop+this.config.topMargin)},d={x:Math.ceil(t+this.dimensions.horizontalWidthFromBottom),y:Math.ceil(e+this.dimensions.totalHeight+this.config.topMargin)},c={x:Math.ceil(t+this.dimensions.totalWidth),y:Math.ceil(e+this.dimensions.verticalHeightFromBottom+this.config.topMargin)},u=`${a.x-this.bleed+h/3} ${a.y-s-this.tileH}`,p=`${a.x-this.bleed+h/3} ${a.y-s}`,b=`${c.x+this.bleed-h/3} ${c.y-s}`,m=`${c.x+this.bleed-h/3} ${c.y-s-this.tileH}`,$=`${a.x-this.bleed+h/3+h/12} ${d.y-s}`,f=`${c.x-this.bleed-h/3-h/12} ${d.y-s}`,_=(this.bleed,this.tileH,this.tileH,this.bleed,this.tileH,this.tileH,`<g style="z-index:${n};">`);_+=`<defs>${this.calculations.addGradient("pillarGradient",r,o)}</defs>`,_+='<path fill="url(#pillarGradient)"',_+=` d="M ${u} `,_+=`L ${p} `,_+=`C ${$}, ${f}, ${b} `,_+=`L ${m} `;let y={top:g,left:a,bottom:d,right:c};return{html:(_+=`L ${u} Z" /></g>`).replace(/\n|\r|\t/g,""),coords:y}}}},{"./config.component":2,"./mapGenerationFunctions.component":4}],9:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});i.Tile=class{constructor(t,e,i,o,l,r,n){this._options={},this._id=t,this._x=e,this._y=i,this._h=o,this._tileType=l,this._tileColor=r,n&&(this._options=n)}get id(){return this._id}get x(){return this._x}get y(){return this._y}get h(){return this._h}get type(){return this._tileType}get options(){return this._options?this._options:{defined:!1}}getColor(){return this._tileColor}get tileColor(){return this._tileColor}set tileColor(t){this._tileColor=t}},function(t){t.None="none",t.Body="body",t.Tower="tower",t.Roof="roof",t.Grass="grass"}(i.TileType||(i.TileType={}))},{}]},{},[1,2,3,4,5,6,7,8,9]);
//# sourceMappingURL=bundle.min.js.map

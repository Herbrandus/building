{"version":3,"sources":["node_modules/browser-pack/_prelude.js","bundle.min.js","src/ts/builder.component.ts","src/ts/config.component.ts","src/ts/main.ts","src/ts/mapGenerationFunctions.component.ts","src/ts/mapper.component.ts","src/ts/primitives.component.ts","src/ts/renderelements.component.ts","src/ts/tile.component.ts"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","Object","defineProperty","value","mapGenerationFunctions_component_1","config_component_1","renderelements_component_1","Renderer","[object Object]","this","config","Config","calculations","MapGenerationFunctions","render","RenderElements","map","html","mapWidth","mapLength","tileWidth","tileLength","htmlMap","getMapWidth","y","x","getColumn","isDefined","tile","getTopTile","tileTopColor","getColor","rgb","id","mapToBuild","mapTotalWidth","mapTotalLength","testTile","createTile","yDeviation","coords","bottom","top","right","left","tileHalfWidthLeft","tileHalfWidthRight","tileHalfLengthTop","mapLengthTop","mapLengthBottom","mapWidthPx","Math","round","mapLengthPx","detailsHtml","lastTile","startTileX","thisPosY","thisPosX","newTile","newData","h","height","createBlock","tileHeight","tileStack","allowDebug","xPos","yPos","edge","corner","createSlopeBlock","getTile","./config.component","./mapGenerationFunctions.component","./renderelements.component","2","_allowDebug","_tileWidth","_tileLength","_tileHeight","_tileSmallAngle","_tileLargeAngle","_groundColor","Color","_buildingBaseColor","floor","random","_tileEdgeBleed","_maxAllowedHeight","tileSmallAngle","tileLargeAngle","groundColor","buildingBaseColor","tileEdgeBleed","maxAllowedHeight","mapArrayWidth","mapArrayLength","3","mapper_component_1","builder_component_1","RandomBuilding","_builder","_map","default","document","querySelector","style","background","hex","showData","build2DMap","buildMap","addEventListener","building2","innerHTML","drawTileMap","classList","remove","querySelectorAll","forEach","item","toggle","building","debug","add","./builder.component","./mapper.component","4","smallAngle","largeAngle","maximumBlockIterations","blockWidth","blockHeight","smallOuterAngle","largeOuterAngle","horizontalWidthFromBottom","getHorizontalBottomShortestWidth","verticalHeightFromBottom","getVerticalBottomShortestHeight","horizontalWidthFromTop","getHorizontalTopLongestWidth","verticalHeightFromTop","getVerticalTopLongestHeight","totalWidth","totalHeight","diagonalWidth","sin","toRadians","diagonalHeight","cos","angle","PI","TileColor","BuildingHeightVariations","params","error","validateHex","hexColor","charAt","setHex","hexToRgb","validateRgb","setRgb","rgbToHex","toString","g","b","_colorRgb","hexadecimal","hexVal1","hexVal2","hexVal3","_colorHex","match","hexValues","substr","split","hexPair1","parseInt","hexPair2","hexPair3","hexR","Number","hexG","hexB","amount","encoding","newR","newG","newB","5","tile_component_1","primitives_component_1","mapMaxHeight","mapEdgeWidth","averageBuildingSize","pyramid","_mapGen","primitives","Primitives","_blockHeightVariationLabels","TallCenter","TallSurrounds","Random","_blockHeightVariation","_mapWidth","_mapLength","_mapMaxHeight","_mapEdgeWidth","_averageBuildingSize","_blockHeight","_maximumBlockIterations","_additionalBlockIterations","calculateAdditionalBlockIterations","_blockGroups","_blockEdges","_blockHeightsArray","_mapHalfLength","_blockIdIterator","mapLengthHalf","startblockLength","startblockWidth","startblockXfromCenter","startblockLengthHalf","startingPositionX","_world","firstBlockHeight","thisBlockGroup","column","Column","thisPillar","thisWindowed","isRoof","push","Tile","TileType","Body","roof","pillar","windowed","tower","indexOf","Array","blockGroup","console","log","getEdges","randomPositionPicker","ceil","thisHeight","thisBlockLength","thisBlockWidth","clearMapEdges","considerLowerEdges","pos","getPyramid","remainderLength","remainderWidth","edgeX","edgeY","row","unshift","defined","colX","colY","colHeight","_edge","_tileStack","_defined","_x","_y","_height","groupNum","_blockGroup","_corner","tiles","./primitives.component","./tile.component","6","7","tileW","tileL","tileH","bleed","dimensions","calculateStraightLinesFromIsometricSquare","tileColor","regularColor","regularDarkerColor","changeColorLighting","regularLighterColor","shadowLight","shadowHighlight","shadow","highlight","almostDarkestColor","almostLightestColor","darkestColor","lightestColor","pointTop","pointLeft","pointBottom","pointRight","leftWallLeftTop","leftWallLeftBottom","leftWallRightBottom","leftWallRightTop","rightWallLeftTop","rightWallLeftBottom","rightWallRightBottom","rightWallRightTop","blockTopLeft","blockTopBottom","blockTopRight","blockTopTop","slopeDirection","blockRightBottom","blockRightRight","blockRightTop","blockLeftLeft","blockLeftBottom","blockLeftTop","blockBottomLeft","blockBottomRight","blockBottomTop","8","tileType","options","_options","_id","_h","_tileType","_tileColor","type","None"],"mappings":"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","file":"bundle.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()",null,"import { MapGenerationFunctions, Color } from './mapGenerationFunctions.component'\nimport Map from './mapper.component'\nimport { Tile, TileType } from './tile.component'\nimport { Config, Coords, TileTemplate, Position } from './config.component'\nimport { RenderElements } from './renderelements.component'\n\nexport class Renderer {\t\n\n\tprivate config: Config = new Config()\n\tprivate calculations: MapGenerationFunctions = new MapGenerationFunctions()\n\tprivate render: RenderElements = new RenderElements()\n\n\tconstructor() {\t}\n\n\tshowData(map: Map): string {\n\n\t\tlet html = '<div class=\"showData\">'\n\t\thtml += `map width: ${map.mapWidth} tiles<br>map length: ${map.mapLength} tiles<br>`\n\t\thtml += `tile width: ${this.config.tileWidth}<br>tile length: ${this.config.tileLength}<br>`\n\t\thtml += '</div>'\n\n\t\treturn html\n\t}\n\n\tbuild2DMap(map: Map): string {\n\n\t\tlet htmlMap = `<div class=\"map\" style=\"width:${this.config.getMapWidth(map.mapWidth)}px;\">`\n\n\t\tfor (let y = 0; y < map.mapLength; y++) {\n\t\t\tfor (let x = 0; x < map.mapWidth; x++) {\n\n\t\t\t\thtmlMap += `<div class=\"tile\" style=\"width:${this.config.tileWidth}px;height:${this.config.tileLength}px;`\n\n\t\t\t\tif (map.getColumn(x, y).isDefined) {\n\t\t\t\t\t\n\t\t\t\t\tlet tile = map.getTopTile(x, y)\n\t\t\t\t\tlet tileTopColor = tile.getColor().rgb()\n\t\t\t\t\tlet tileColor = `rgb(${tileTopColor['r']}, ${tileTopColor['g']}, ${tileTopColor['b']})`\n\n\t\t\t\t\thtmlMap += `background-color:${tileColor}\">${tile.id}<br>(${x}, ${y})</div>`\n\n\t\t\t\t} else {\n\n\t\t\t\t\thtmlMap += `\">${x}, ${y}</div>`\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\thtmlMap += `</div>`\n\n\t\treturn htmlMap\n\t}\n\n\tbuildMap(mapToBuild: Map): string {\n\n\t\tlet mapTotalWidth = mapToBuild.mapWidth\n\t\tlet mapTotalLength = mapToBuild.mapLength\n\n\t\tlet testTile = this.render.createTile(0, 0)\n\n\t\tlet xDeviation = testTile.coords.bottom.x - testTile.coords.top.x\n\t\tlet yDeviation = testTile.coords.right.y - testTile.coords.left.y\n\t\tlet tileHalfWidthLeft = testTile.coords.top.x - testTile.coords.left.x\n\t\tlet tileHalfWidthRight = testTile.coords.right.x - testTile.coords.top.x\n\t\tlet mapWidthLeft = tileHalfWidthLeft * mapTotalLength\n\t\tlet mapWidthRight = tileHalfWidthRight * mapTotalWidth\n\t\tlet tileHalfLengthTop = testTile.coords.right.y\n\t\tlet tileHalfLengthBottom = testTile.coords.bottom.y - testTile.coords.right.y\n\t\tlet mapLengthTop = tileHalfLengthTop * mapTotalWidth\n\t\tlet mapLengthBottom = tileHalfLengthBottom * mapTotalLength\n\t\tlet mapWidthPx = Math.round((tileHalfWidthLeft + tileHalfWidthRight) * (mapTotalWidth ))\n\t\tlet mapLengthPx = Math.round(mapLengthTop + mapLengthBottom)\n\n\t\tconst map = mapToBuild.map\n\n\t\tlet detailsHtml = ''\n\t\tlet html = '<svg width=\"'+mapWidthPx+'\" height=\"'+mapLengthPx+'\">'\n\n\t\tlet lastTile = null\n\t\tlet startTileX = tileHalfWidthLeft * (mapTotalWidth - 1)\n\n\t\tfor (let y = 0; y < mapTotalLength; y++) {\n\n\t\t\tfor (let x = 0; x < mapTotalWidth; x++) {\n\n\t\t\t\tlet thisPosY = 0\n\t\t\t\tlet thisPosX = 0\n\n\t\t\t\tif (x === 0 && y === 0) {\n\t\t\t\t\tthisPosX = startTileX\n\t\t\t\t}\n\n\t\t\t\tif (lastTile != null) {\n\t\t\t\t\tthisPosY = lastTile.coords.right.y\n\t\t\t\t}\n\n\t\t\t\tif (y > 0 && x === 0) {\n\t\t\t\t\tthisPosX = startTileX - (tileHalfWidthLeft * y)\n\t\t\t\t\tthisPosY = (tileHalfLengthTop * y) - (yDeviation * y)\n\t\t\t\t}\t\n\t\t\t\t\n\t\t\t\tif (x > 0) {\n\t\t\t\t\tthisPosX = (lastTile.coords.right.x - (lastTile.coords.right.x - lastTile.coords.bottom.x))\n\t\t\t\t}\n\n\t\t\t\tlet newTile = this.render.createTile(thisPosX, thisPosY)\n\t\t\t\tlet newData = ''\n\t\t\t\t\n\t\t\t\tif (map[y][x].isDefined) {\n\t\t\t\t\tfor (let h = 0; h < map[y][x].height; h++) {\n\t\t\t\t\t\tlet tile = this.render.createBlock(thisPosX, thisPosY - this.config.tileHeight, map[y][x].tileStack[h])\n\t\t\t\t\t\tnewData += tile.html\n\n\t\t\t\t\t\tif (this.config.allowDebug) {\n\t\t\t\t\t\t\tif (h === map[y][x].height - 1) {\n\t\t\t\t\t\t\t\tdetailsHtml += `<div class=\"blockLabel\" style=\"left: ${tile.coords.top.x}px; top: ${tile.coords.top.y - (this.config.tileHeight * h-1)}px;\"><div class=\"point\"></div><span>x: ${x}, y: ${y}<br>id: ${map[y][x].tileStack[h].id}  h: ${h}</span></div>`\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} \n\n\t\t\t\thtml += newTile.html + newData\n\n\t\t\t\tlastTile = newTile\n\t\t\t}\n\t\t}\n\n\t\thtml += '</svg>'\n\n\t\t// document.querySelector('#debug').innerHTML = detailsHtml\n\n\t\treturn '<div id=\"debug\">' + detailsHtml + '</div>' + html\n\t}\n\n\taddSlopedEdges(map: any[], x: number, y: number, h: number, xPos: number, yPos: number) {\n\n\t\tlet tile = null\n\n\t\tif (map[y][x].edge.top && !map[y][x].corner && h === map[y][x].height-1) {\n\t\t\ttile = this.render.createSlopeBlock(xPos, yPos - this.config.tileHeight, map[y][x].getTile(h), 'n')\n\t\t} else if (map[y][x].edge.bottom && !map[y][x].corner && h === map[y][x].height-1) {\n\t\t\ttile = this.render.createSlopeBlock(xPos, yPos - this.config.tileHeight, map[y][x].getTile(h), 's')\n\t\t} else if (map[y][x].edge.right && !map[y][x].corner && h === map[y][x].height-1) {\n\t\t\ttile = this.render.createSlopeBlock(xPos, yPos - this.config.tileHeight, map[y][x].getTile(h), 'e')\n\t\t} else if (map[y][x].edge.left && !map[y][x].corner && h === map[y][x].height-1) {\n\t\t\ttile = this.render.createSlopeBlock(xPos, yPos - this.config.tileHeight, map[y][x].getTile(h), 'w')\n\t\t} else {\n\t\t\ttile = this.render.createBlock(xPos, yPos - this.config.tileHeight, map[y][x].getTile(h))\t\n\t\t}\n\n\t\tif (map[y][x].corner && h === map[y][x].height-1) {\n\t\t\tif (map[y][x].edge.top && map[y][x].edge.left) {\n\t\t\t\ttile = this.render.createSlopeBlock(xPos, yPos - this.config.tileHeight, map[y][x].getTile(h), 'nw')\n\t\t\t} else if (map[y][x].edge.top && map[y][x].edge.right) {\n\t\t\t\ttile = this.render.createSlopeBlock(xPos, yPos - this.config.tileHeight, map[y][x].getTile(h), 'ne')\n\t\t\t} else if (map[y][x].edge.bottom && map[y][x].edge.left) {\n\t\t\t\ttile = this.render.createSlopeBlock(xPos, yPos - this.config.tileHeight, map[y][x].getTile(h), 'sw')\n\t\t\t} else if (map[y][x].edge.bottom && map[y][x].edge.right) {\n\t\t\t\ttile = this.render.createSlopeBlock(xPos, yPos - this.config.tileHeight, map[y][x].getTile(h), 'se')\n\t\t\t}\n\t\t}\n\n\t\treturn tile\n\t}\n}\n","import { Color } from './mapGenerationFunctions.component'\n\nexport class Config {\n\n\tprivate _allowDebug: boolean = true\n\tprivate _tileWidth: number = 35\n\tprivate _tileLength: number = 35\n\tprivate _tileHeight: number = 20\n\tprivate _tileSmallAngle: number = 85\n\tprivate _tileLargeAngle: number = 100\n\tprivate _groundColor: Color = new Color('f5f3e5')\n\tprivate _buildingBaseColor: Color = new Color(\n\t\t115 + Math.floor(Math.random() * 75),\n\t\t155 + Math.floor(Math.random() * 40),\n\t\t150 + Math.floor(Math.random() * 30)\n\t)\n\tprivate _tileEdgeBleed: number = 0.3\n\tprivate _maxAllowedHeight: number = 12\n\n\tpublic get allowDebug(): boolean {\n\t\treturn this._allowDebug\n\t}\n\n\tpublic get tileWidth(): number {\n\t\treturn this._tileWidth\n\t}\n\n\tpublic get tileLength(): number {\n\t\treturn this._tileLength\n\t}\n\n\tpublic get tileHeight(): number {\n\t\treturn this._tileHeight\n\t}\n\n\tpublic get tileSmallAngle(): number {\n\t\treturn this._tileSmallAngle\n\t}\n\n\tpublic get tileLargeAngle(): number {\n\t\treturn this._tileLargeAngle\n\t}\n\n\tpublic get groundColor(): Color {\n\t\treturn this._groundColor\n\t}\n\n\tpublic get buildingBaseColor(): Color {\n\t\treturn this._buildingBaseColor\n\t}\n\n\tpublic get tileEdgeBleed(): number {\n\t\treturn this._tileEdgeBleed\n\t}\n\n\tpublic get maxAllowedHeight(): number {\n\t\treturn this._maxAllowedHeight\n\t}\n\n\tpublic getMapWidth(mapArrayWidth: number): number {\n\t\treturn mapArrayWidth * this._tileWidth\n\t}\n\n\tpublic getMapLength(mapArrayLength: number): number {\n\t\treturn mapArrayLength * this._tileLength\n\t}\n}\n\nexport interface Coords {\n\ttop?: Position,\n\tleft?: Position,\n\tbottom?: Position,\n\tright?: Position\n}\n\nexport interface TileTemplate {\n\thtml?: string,\n\tcoords?: Coords\n}\n\nexport interface Position {\n\tx?: number,\n\ty?: number\n}\n","import Map from './mapper.component'\nimport { Renderer } from './builder.component'\nimport { Color } from './mapGenerationFunctions.component'\nimport { Config } from './config.component'\n\nclass RandomBuilding {\n\n\tprivate _map: Map\n\tprivate _builder: Renderer = new Renderer\n\tprivate config: Config = new Config\n\n\tconstructor() {\n\t\tthis._map = new Map(20, 20, 10, 2, (4 + Math.floor(Math.random() * 7)), 2, 4, false)\n\t\tdocument.querySelector('body').style.background = this.config.groundColor.hex()\n\t}\n\n\tpublic debug(): boolean {\n\t\treturn this.config.allowDebug\n\t}\n\n\tget map() {\n\t\treturn this._map\n\t}\n\n\tpublic colorMap(): string {\n\t\treturn this._builder.showData(this._map) + this._builder.build2DMap(this._map)\n\t}\n\n\tpublic drawTileMap(): string {\n\t\treturn this._builder.buildMap(this._map)\n\t}\n}\n\n/*\nconst color = new Color(150, 225, 116);\n\nconst colorDivs = `\n\t<div class=\"color__tile\" style=\"background-color: rgb(${color.getShadowsRGB().r},${color.getShadowsRGB().g},${color.getShadowsRGB().b})\"></div>\n\t<div class=\"color__tile\" style=\"background-color: rgb(${color.rgb().r},${color.rgb().g},${color.rgb().b})\"></div>\n\t<div class=\"color__tile\" style=\"background-color: rgb(${color.getHighlightsRGB().r},${color.getHighlightsRGB().g},${color.getHighlightsRGB().b})\"></div>`\n\ndocument.querySelector('#color').innerHTML = colorDivs */\n\ndocument.querySelector('#generate').addEventListener('click', () => {\n\tconst building2 = new RandomBuilding();\n\tdocument.querySelector(\"#world\").innerHTML = building2.drawTileMap()\n\tdocument.querySelector('#debugActive').classList.remove('active')\n\n\tdocument.querySelectorAll('.blockLabel').forEach((item) => {\n\t\titem.addEventListener('click', () => {\n\t\t\titem.classList.toggle('active')\n\t\t})\n\t})\n})\n\ndocument.querySelector('#debugActive').addEventListener('click', () => {\n\tdocument.querySelector('#debug').classList.toggle('show')\n\tdocument.querySelector('#debugActive').classList.toggle('active')\n})\n\nconst building = new RandomBuilding();\ndocument.querySelector(\"#world\").innerHTML = building.drawTileMap()\n\ndocument.querySelectorAll('.blockLabel').forEach((item) => {\n\titem.addEventListener('click', () => {\n\t\titem.classList.toggle('active')\n\t})\n})\n\nif (!building.debug()) {\n\tdocument.querySelector('#debugActive').classList.add('hide')\n}\n","import { Config } from './config.component'\n\nexport class MapGenerationFunctions {\n\n\tprivate config: Config = new Config();\n\tsmallAngle = this.config.tileSmallAngle;\n\tlargeAngle = this.config.tileLargeAngle;\n\n\tconstructor() { }\n\n\tpublic calculateAdditionalBlockIterations(maximumBlockIterations: number) {\n\t\treturn 2 + Math.floor(Math.random() * maximumBlockIterations);\n\t}\n\n\t// calculate the dimensions to draw the isometric perspective tile with the parameters as if it were a straight square tile\n\tpublic calculateStraightLinesFromIsometricSquare (blockWidth: number, blockHeight: number) {\n\t\t// lengths this function returns when it comes to positions of longest and shortest sides as array\n\t\t/*           [0]\n\t\t *   _________________ \n\t\t *   |    [3]  |      |\n\t\t *   | [5]            |\n\t\t *   |               -|\n\t\t *   |-               | [1]\n\t\t *   | [4]            |\n\t\t *   |    [2]         |\n\t\t *   |_______|________|\n\t\t */  \n\n\t\tlet smallOuterAngle = (180 - this.smallAngle) / 2;\n\t\tlet largeOuterAngle = (180 - this.largeAngle) / 2;\n\n\t\tlet horizontalWidthFromBottom = this.getHorizontalBottomShortestWidth(blockWidth, smallOuterAngle);\n\t\tlet verticalHeightFromBottom = this.getVerticalBottomShortestHeight(horizontalWidthFromBottom, smallOuterAngle);\n\n\t\tlet horizontalWidthFromTop = this.getHorizontalTopLongestWidth(blockHeight, largeOuterAngle);\n\t\tlet verticalHeightFromTop = this.getVerticalTopLongestHeight(horizontalWidthFromTop, largeOuterAngle);\n\n\t\tlet totalHeight = verticalHeightFromBottom + verticalHeightFromTop;\n\t\tlet totalWidth = horizontalWidthFromBottom + horizontalWidthFromTop;\n\n\t\treturn {\t'totalWidth': totalWidth, // 0\n\t\t\t\t\t'totalHeight': totalHeight,  // 1\n\t\t\t\t\t'horizontalWidthFromBottom': horizontalWidthFromBottom,  // 2\n\t\t\t\t\t'horizontalWidthFromTop': horizontalWidthFromTop,  // 3\n\t\t\t\t\t'verticalHeightFromBottom': verticalHeightFromBottom,  // 4\n\t\t\t\t\t'verticalHeightFromTop': verticalHeightFromTop } // 5\n\t}\n\n\t// calculate the amount of pixels from the bottom left side of a straight square to the point at the bottom \n\t// .. where the tip of the tile meets the border of the square\n\tpublic getHorizontalBottomShortestWidth (diagonalWidth: number, smallAngle: number): number {\n\t\treturn diagonalWidth * Math.sin(this.toRadians(smallAngle));\n\t}\n\n\tpublic getVerticalBottomShortestHeight (diagonalHeight: number, smallAngle: number): number {\n\t\treturn diagonalHeight * Math.cos(this.toRadians(smallAngle));\n\t}\n\n\tpublic getHorizontalTopLongestWidth (diagonalWidth: number, largeAngle: number): number {\n\t\treturn diagonalWidth * Math.sin(this.toRadians(largeAngle));\n\t}\n\n\tpublic getVerticalTopLongestHeight (diagonalHeight: number, largeAngle: number): number {\n\t\treturn diagonalHeight * Math.cos(this.toRadians(largeAngle));\n\t}\n\n\ttoRadians (angle: number): number {\n\t\treturn angle * (Math.PI / 180);\n\t}\n}\n\nexport enum TileColor {\n\tRed = 125 + Math.floor(Math.random() * 75),\n\tGreen = 170 + Math.floor(Math.random() * 40),\n\tBlue = 180 + Math.floor(Math.random() * 30)\n}\n\nexport enum BuildingHeightVariations {\n\tTallCenter = 'tallCenter',\n\tTallSurrounds = 'tallSurrounds',\n\tRandom = 'random'\n}\n\nexport class Color {\n\tprivate _colorRgb: RGB\n\tprivate _colorHex: string\n\n\tconstructor(...params: any[]) {\n\t\tlet error = null\n\t\tif (params.length === 1) {\n\t\t\tif (typeof params[0] === 'string') {\n\t\t\t\tif (this.validateHex(params[0])) {\n\t\t\t\t\tlet hexColor = params[0]\n\t\t\t\t\tif (hexColor.charAt(0) !== '#') {\n\t\t\t\t\t\thexColor = `#${hexColor}`\n\t\t\t\t\t}\n\t\t\t\t\tthis.setHex(hexColor)\n\t\t\t\t\tthis.hexToRgb()\n\t\t\t\t} else {\n\t\t\t\t\terror = \"Hexadecimal color is incorrect\"\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\terror = \"Length of 1 in parameters is not equal to string\"\n\t\t\t}\n\t\t} else if (params.length === 3) {\n\t\t\tif (this.validateRgb(params)) {\n\t\t\t\tthis.setRgb(params[0], params[1], params[2])\n\t\t\t\tthis.rgbToHex()\n\t\t\t} else {\n\t\t\t\terror = \"Values of RGB exceed limits\"\n\t\t\t}\n\t\t}\n\n\t\tif (error !== null) {\n\t\t\tthrow \"Color type is incorrect. \" + error + \": \" + params.toString()\n\t\t}\n\t}\n\n\tpublic setRgb(r: number, g: number, b: number) {\n\t\tthis._colorRgb = {r: r, g: g, b: b} as RGB\n\t}\n\n\tpublic setHex(hexadecimal: string) {\n\t\tif (hexadecimal.length < 7) {\n\t\t\tlet hexVal1 = hexadecimal.charAt(1)\n\t\t\tlet hexVal2 = hexadecimal.charAt(2)\n\t\t\tlet hexVal3 = hexadecimal.charAt(3)\n\t\t\thexadecimal = \"#\" + hexVal1 + hexVal1 + hexVal2 + hexVal2 + hexVal3 + hexVal3\n\t\t}\n\t\tthis._colorHex = hexadecimal\n\t}\n\n\tpublic rgb(): RGB {\n\t\treturn this._colorRgb\n\t}\n\n\tpublic hex(): string {\n\t\treturn this._colorHex\n\t}\n\n\tvalidateRgb(rgb: number[]): boolean {\n\t\tif (rgb[0] > -1 && rgb[0] < 256 &&\n\t\t\trgb[1] > -1 && rgb[1] < 256 &&\n\t\t\trgb[2] > -1 && rgb[2] < 256) {\n\t\t\treturn true\n\t\t} else {\n\t\t\treturn false\n\t\t}\n\t}\n\n\tvalidateHex(hex: string): boolean {\n\t\tlet regex = /^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/\n\t\tif (hex.match(regex)) {\n\t\t\treturn true\n\t\t} else {\n\t\t\treturn false\n\t\t}\n\t}\n\n\thexToRgb() {\n\t\tlet hexValues: string[] = this._colorHex.substr(1).split('')\n\t\tlet hexPair1 = parseInt(hexValues[0]+hexValues[1], 16)\n\t\tlet hexPair2 = parseInt(hexValues[2]+hexValues[3], 16)\n\t\tlet hexPair3 = parseInt(hexValues[4]+hexValues[5], 16)\n\t\tthis.setRgb(hexPair1, hexPair2, hexPair3)\n\t\tthis.rgbToHex()\n\t}\n\n\trgbToHex() {\n\t\tif (typeof this._colorRgb === 'object') {\n\t\t\tlet r = this._colorRgb.r\n\t\t\tlet b = this._colorRgb.b\n\t\t\tlet g = this._colorRgb.g\n\t\t\tlet hexR = Number(r).toString(16)\n\t\t\tlet hexG = Number(g).toString(16)\n\t\t\tlet hexB = Number(b).toString(16)\n\t\t\tthis._colorHex = \"#\" + hexR + hexG + hexB\n\t\t}\n\t}\n\n\tpublic changeColorLighting(amount: number, encoding: string): string {\n\t\tlet r = this._colorRgb.r\n\t\tlet b = this._colorRgb.b\n\t\tlet g = this._colorRgb.g\n\t\tlet newR = r + amount\n\t\tlet newG = g + amount\n\t\tlet newB = b + (amount - 8)\n\t\tif (newR > 255) newR = 255\n\t\tif (newG > 255) newG = 255\n\t\tif (newR > 255) newR = 255\n\n\t\tlet hexR = Number(newR).toString(16)\n\t\tlet hexG = Number(newG).toString(16)\n\t\tlet hexB = Number(newB).toString(16)\n\t\tlet result = \"#\" + hexR + hexG + hexB\n\n\t\treturn result\n\t}\n\n\tpublic getLightestRGB(): RGB {\n\t\tlet r = this._colorRgb.r\n\t\tlet b = this._colorRgb.b\n\t\tlet g = this._colorRgb.g\n\t\tlet newR = r + 55\n\t\tlet newG = g + 55\n\t\tlet newB = b + 40\n\t\tif (newR > 255) newR = 255\n\t\tif (newG > 255) newG = 255\n\t\tif (newR > 255) newR = 255\n\t\treturn {r: newR, g: newG, b: newB}\n\t}\n\n\tpublic getHighlightsRGB(): RGB {\n\t\tlet r = this._colorRgb.r\n\t\tlet b = this._colorRgb.b\n\t\tlet g = this._colorRgb.g\n\t\tlet newR = r + 45\n\t\tlet newG = g + 45\n\t\tlet newB = b + 30\n\t\tif (newR > 255) newR = 255\n\t\tif (newG > 255) newG = 255\n\t\tif (newR > 255) newR = 255\n\t\treturn {r: newR, g: newG, b: newB}\n\t}\n\n\tpublic getDarkerRegularRGB(): RGB {\n\t\tlet r = this._colorRgb.r\n\t\tlet b = this._colorRgb.b\n\t\tlet g = this._colorRgb.g\n\t\tlet newR = r + 15\n\t\tlet newG = g + 15\n\t\tlet newB = b + 5\n\t\tif (newR > 255) newR = 255\n\t\tif (newG > 255) newG = 255\n\t\tif (newR > 255) newR = 255\n\t\treturn {r: newR, g: newG, b: newB}\n\t}\n\n\tpublic getHalflightsRGB(): RGB {\n\t\tlet r = this._colorRgb.r\n\t\tlet b = this._colorRgb.b\n\t\tlet g = this._colorRgb.g\n\t\tlet newR = r + 25\n\t\tlet newG = g + 25\n\t\tlet newB = b + 15\n\t\tif (newR > 255) newR = 255\n\t\tif (newG > 255) newG = 255\n\t\tif (newR > 255) newR = 255\n\t\treturn {r: newR, g: newG, b: newB}\n\t}\n\n\tpublic getShadowsRGB(): RGB {\n\t\tlet r = this._colorRgb.r\n\t\tlet b = this._colorRgb.b\n\t\tlet g = this._colorRgb.g\n\t\tlet newR = r - 55\n\t\tlet newG = g - 55\n\t\tlet newB = b - 35\n\t\tif (newR < 0) newR = 0\n\t\tif (newG < 0) newG = 0\n\t\tif (newR < 0) newR = 0\n\t\treturn {r: newR, g: newG, b: newB}\n\t}\n\n\tpublic getDarkestRGB(): RGB {\n\t\tlet r = this._colorRgb.r\n\t\tlet b = this._colorRgb.b\n\t\tlet g = this._colorRgb.g\n\t\tlet newR = r - 70\n\t\tlet newG = g - 70\n\t\tlet newB = b - 60\n\t\tif (newR < 0) newR = 0\n\t\tif (newG < 0) newG = 0\n\t\tif (newR < 0) newR = 0\n\t\treturn {r: newR, g: newG, b: newB}\n\t}\n}\n\nexport interface RGB {\n\tr: number,\n\tg: number,\n\tb: number\n}\n","import { MapGenerationFunctions, BuildingHeightVariations } from './mapGenerationFunctions.component'\nimport { Tile, TileType } from './tile.component'\nimport { Config, Position } from './config.component'\nimport { Primitives } from './primitives.component'\n\nexport default class Map {\n\n\tprivate _mapWidth: number\n\tprivate _mapLength: number\n\tprivate _mapMaxHeight: number\n\tprivate _averageBuildingSize: number\n\tprivate _blockHeight: number\n\tprivate _maximumBlockIterations: number\n\tprivate _additionalBlockIterations: number\n\tprivate _mapEdgeWidth: number\n\tprivate _highestPoint: number\n\tprivate _startBlockXfromCenterDeviation: number\n\tprivate _mapHalfLength: number\n\tprivate _world: any[][]\n\tprivate _blockHeightsArray: number[]\n\tprivate _blockGroupCollection: any[]\n\tprivate _blockGroups: any[]\n\tprivate _blockEdges: Position[]\n\tprivate _additionalBlockEdges: Position[]\n\tprivate _mapGen: MapGenerationFunctions = new MapGenerationFunctions()\n\tprivate config: Config = new Config()\n\tprivate primitives: Primitives = new Primitives()\n\tprivate _blockHeightVariationLabels = [BuildingHeightVariations.TallCenter, BuildingHeightVariations.TallSurrounds, BuildingHeightVariations.Random]\n\tprivate _blockHeightVariation = this._blockHeightVariationLabels[Math.floor(Math.random() * 3)]\n\tprivate _blockIdIterator: number\n\n\tconstructor(\t\n\t\t\tmapWidth: number, \n\t\t\tmapLength: number, \n\t\t\tmapMaxHeight: number, \n\t\t\tmapEdgeWidth: number,\n\t\t\taverageBuildingSize: number,\n\t\t\tblockHeight: number,\n\t\t\tmaximumBlockIterations: number,\n\t\t\tpyramid: boolean)\n\t{\n\t\tthis._mapWidth = mapWidth\n\t\tthis._mapLength = mapLength\n\t\tthis._mapMaxHeight = mapMaxHeight\n\t\tthis._mapEdgeWidth = mapEdgeWidth\n\t\tthis._averageBuildingSize = averageBuildingSize\n\t\tthis._blockHeight = blockHeight\n\t\tthis._maximumBlockIterations = maximumBlockIterations\n\t\tthis._additionalBlockIterations = this._mapGen.calculateAdditionalBlockIterations(maximumBlockIterations)\n\t\tthis._blockGroups = []\n\t\tthis._blockEdges = []\n\t\tthis._blockHeightsArray = []\n\t\tthis._mapHalfLength = Math.floor(mapLength / 2)\n\t\tthis._blockIdIterator = 0\n\n\t\tlet mapLengthHalf = Math.floor(mapLength / 2) \n\t\tlet mapWidthHalf = Math.floor(mapWidth / 2)\n\t\tlet startBlockXfromCenterDeviation = 6\n\t\tlet startblockLength = (this._averageBuildingSize + 1) + Math.floor(Math.random() * 6)\n\t\tlet startblockWidth = this._averageBuildingSize + Math.floor(Math.random() * 5)\n\t\tlet startblockXfromCenter = 6 + Math.floor(Math.random() * startBlockXfromCenterDeviation)\n\t\tlet startblockLengthHalf = Math.floor(startblockLength / 2)\n\t\tlet startblockWidthHalf = Math.floor(startblockWidth / 2)\n\t\tlet startingPositionX = Math.floor(this._mapWidth / 2) - Math.floor(startblockXfromCenter / 2)\n\n\t\tthis._world = []\n\t\tlet tileHeight = 0\n\t\tlet firstBlockHeight\n\n\t\tif (this._blockHeightVariation === BuildingHeightVariations.TallCenter) {\n\t\t\tfirstBlockHeight = blockHeight * 2\n\t\t} else if (this._blockHeightVariation === BuildingHeightVariations.TallSurrounds) {\n\t\t\tfirstBlockHeight = 1 + Math.round(Math.random())\n\t\t\tblockHeight = firstBlockHeight\n\t\t} else {\n\t\t\tfirstBlockHeight = blockHeight\n\t\t}\n\n\t\tfor (let y = 0; y < this.mapLength; y++) {\n\n\t\t\tthis._world[y] = []\n\n\t\t\tfor (let x = 0; x < this.mapWidth; x++) {\n\n\t\t\t\tlet thisBlockGroup = 0\n\n\t\t\t\tlet column = new Column(false, x, y, 0)\n\n\t\t\t\tif (y >= mapLengthHalf && y <= (mapLengthHalf + startblockLengthHalf) ) {\n\n\t\t\t\t\tif (x > startingPositionX && x <= (startingPositionX + startblockWidth) ) {\n\n\t\t\t\t\t\tthisBlockGroup = 1\n\t\t\t\t\t\tlet tileStack = []\n\n\t\t\t\t\t\tfor (let h = 0; h < firstBlockHeight; h++) {\n\n\t\t\t\t\t\t\tlet thisPillar = 0\n\t\t\t\t\t\t\tlet thisWindowed = 0\n\t\t\t\t\t\t\tlet isRoof = (h === firstBlockHeight-1) ? true : false\n\n\t\t\t\t\t\t\ttileStack.push(\n\t\t\t\t\t\t\t\tnew Tile(\n\t\t\t\t\t\t\t\t\tthis._blockIdIterator, \n\t\t\t\t\t\t\t\t\tx, \n\t\t\t\t\t\t\t\t\ty, \n\t\t\t\t\t\t\t\t\th, \n\t\t\t\t\t\t\t\t\tTileType.Body,\n\t\t\t\t\t\t\t\t\tthis.config.buildingBaseColor,\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t'roof':\t\t\tisRoof,\n\t\t\t\t\t\t\t\t\t\t'pillar': \t\tthisPillar,\n\t\t\t\t\t\t\t\t\t\t'windowed': \tthisWindowed,\n\t\t\t\t\t\t\t\t\t\t'tower': \t\tfalse\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t)\n\n\t\t\t\t\t\t\tif (this._blockGroups.indexOf(thisBlockGroup) === -1) {\n\t\t\t\t\t\t\t\tthis._blockGroups[thisBlockGroup] = new Array( [y,x] )\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis._blockGroups[thisBlockGroup].push([y,x])\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis._blockHeightsArray.push(firstBlockHeight)\n\n\t\t\t\t\t\t\tthis._blockIdIterator++\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcolumn = new Column(true, x, y, firstBlockHeight)\n\n\t\t\t\t\t\tcolumn.blockGroup = thisBlockGroup\n\t\t\t\t\t\tcolumn.height = firstBlockHeight\n\t\t\t\t\t\tcolumn.corner = false\n\t\t\t\t\t\tcolumn.tileStack = tileStack\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis._world[y][x] = column\n\t\t\t}\n\t\t}\n\n\t\tconsole.log('i: ' + this._blockIdIterator)\n\n\t\tfor (let i = 0; i < this._additionalBlockIterations; i++) {\n\n\t\t\tconsole.log('iteration #'+i)\n\t\t\tthis.getEdges()\n\n\t\t\tlet randomPositionPicker = 2 + Math.ceil(Math.random() * (this._blockEdges.length - 2))\n\t\t\tlet thisHeight = 0\n\n\t\t\tconsole.log('this._blockEdges', this._blockEdges)\n\t\t\tconsole.log('randomPositionPicker', randomPositionPicker)\n\n\t\t\tif (this._blockHeightVariation === BuildingHeightVariations.TallCenter) {\n\t\t\t\tthisHeight = this._blockHeight - i;\n\t\t\t\t\n\t\t\t} else if (this._blockHeightVariation === BuildingHeightVariations.TallSurrounds) {\n\n\t\t\t\tthisHeight = this._blockHeight + i;\n\n\t\t\t} else if (this._blockHeightVariation === BuildingHeightVariations.Random) {\n\n\t\t\t\tthisHeight = this._blockHeight + 1;\n\t\t\t}\n\n\t\t\tif (thisHeight < 2) {\n\t\t\t\tthisHeight = 2\n\t\t\t} else if (thisHeight > this.config.maxAllowedHeight) {\n\t\t\t\tthisHeight = this.config.maxAllowedHeight\n\t\t\t}\n\n\t\t\tconsole.log('height', thisHeight)\n\n\t\t\tlet yPos = this._blockEdges[randomPositionPicker].x\n\t\t\tlet xPos = this._blockEdges[randomPositionPicker].y\n\n\t\t\tlet thisBlockLength = (this._averageBuildingSize - 2) + Math.floor(Math.random() * 4)\n\t\t\tlet thisBlockWidth = (this._averageBuildingSize - 2) + Math.floor(Math.random() * 4)\n\n\t\t\tfor (let y = 0; y < this._mapLength; y++) {\n\t\t\t\t\n\t\t\t\tfor (let x = 0; x < this._mapWidth; x++) {\n\n\t\t\t\t\tif (y >= (yPos - Math.floor(thisBlockLength / 2)) && \n\t\t\t\t\t\ty <= (yPos + Math.floor(thisBlockLength / 2)) && \n\t\t\t\t\t\tx >= (xPos - Math.floor(thisBlockWidth / 2)) && \n\t\t\t\t\t\tx <= (xPos + Math.floor(thisBlockWidth / 2)) ) {\n\n\t\t\t\t\t\tlet thisBlockGroup = i+2\n\t\t\t\t\t\tlet tileStack = []\n\n\t\t\t\t\t\tfor (let h = 0; h < thisHeight; h++) {\n\n\t\t\t\t\t\t\tlet thisPillar = 0\n\t\t\t\t\t\t\tlet thisWindowed = 0\n\t\t\t\t\t\t\tlet isRoof = (h === thisHeight-1) ? true : false\n\n\t\t\t\t\t\t\ttileStack.push(\n\t\t\t\t\t\t\t\tnew Tile(\n\t\t\t\t\t\t\t\t\tthis._blockIdIterator, \n\t\t\t\t\t\t\t\t\tx, \n\t\t\t\t\t\t\t\t\ty, \n\t\t\t\t\t\t\t\t\th, \n\t\t\t\t\t\t\t\t\tTileType.Body,\n\t\t\t\t\t\t\t\t\tthis.config.buildingBaseColor,\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t'roof':\t\t\tisRoof,\n\t\t\t\t\t\t\t\t\t\t'pillar': \t\tthisPillar,\n\t\t\t\t\t\t\t\t\t\t'windowed': \tthisWindowed,\n\t\t\t\t\t\t\t\t\t\t'tower': \t\tfalse\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t)\n\n\t\t\t\t\t\t\tif (this._blockGroups.indexOf(thisBlockGroup) === -1) {\n\t\t\t\t\t\t\t\tthis._blockGroups[thisBlockGroup] = new Array( [y,x] )\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis._blockGroups[thisBlockGroup].push([y,x])\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis._world[y][x] = null\n\n\t\t\t\t\t\t\tlet column = new Column(true, x, y, thisHeight)\n\n\t\t\t\t\t\t\tcolumn.blockGroup = thisBlockGroup\n\t\t\t\t\t\t\tcolumn.height = thisHeight\n\t\t\t\t\t\t\tcolumn.corner = false\n\t\t\t\t\t\t\tcolumn.tileStack = tileStack\n\n\t\t\t\t\t\t\tthis._blockHeightsArray.push(thisHeight)\n\n\t\t\t\t\t\t\tthis._blockIdIterator++\n\n\t\t\t\t\t\t\tthis._world[y][x] = column\n\t\t\t\t\t\t}\n\t\t\t\t\t}\t\t\t\t\t\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.clearMapEdges()\n\n\t\tconsole.log('i: ' + this._blockIdIterator)\n\t\tconsole.log(this._world)\n\t}\n\n\tget mapWidth(): number {\n\t\treturn this._mapWidth\n\t}\n\n\tget mapLength(): number {\n\t\treturn this._mapLength\n\t}\n\n\tget map(): any[] {\n\t\treturn this._world\n\t}\n\n\tpublic getColumn(x, y): Column {\n\t\treturn this._world[y][x]\n\t}\n\n\tpublic getTiles(x, y): Tile[] {\n\t\treturn this._world[y][x].tileStack\n\t}\n\n\tpublic getTile(x, y, h): Tile {\n\t\treturn this._world[y][x].getTile(h)\n\t}\n\n\tpublic getTopTile(x, y): Tile {\n\t\tlet height = this._world[y][x].height\n\t\treturn this._world[y][x].getTile(height-1)\n\t}\n\n\tsetEdges(considerLowerEdges: boolean): void {\n\n\t\tfor (let y = 0; y < this.mapLength; y++) {\n\t\t\tfor (let x = 0; x < this.mapWidth; x++) {\n\t\t\t\t\n\t\t\t\tif (y > 0 && x > 0 && y < this.mapLength-1 && x < this.mapWidth-1 && this._world[y][x].isDefined) {\n\n\t\t\t\t\tif (considerLowerEdges) {\n\n\t\t\t\t\t\tif (this._world[y-1][x].height < this._world[y][x].height) {\n\t\t\t\t\t\t\tthis._world[y][x].edge.top = true\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (this._world[y+1][x].height < this._world[y][x].height) {\n\t\t\t\t\t\t\tthis._world[y][x].edge.bottom = true\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (this._world[y][x-1].height < this._world[y][x].height) {\n\t\t\t\t\t\t\tthis._world[y][x].edge.left = true\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (this._world[y][x+1].height < this._world[y][x].height) {\n\t\t\t\t\t\t\tthis._world[y][x].edge.right = true\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif (!this._world[y-1][x].isDefined) {\n\t\t\t\t\t\t\tthis._world[y][x].edge.top = true\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (!this._world[y+1][x].isDefined) {\n\t\t\t\t\t\t\tthis._world[y][x].edge.bottom = true\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (!this._world[y][x-1].isDefined) {\n\t\t\t\t\t\t\tthis._world[y][x].edge.left = true\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (!this._world[y][x+1].isDefined) {\n\t\t\t\t\t\t\tthis._world[y][x].edge.right = true\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( (this._world[y][x].edge['top'] && this._world[y][x].edge['right']) ||\n\t\t\t\t\t\t (this._world[y][x].edge['top'] && this._world[y][x].edge['left']) ||\n\t\t\t\t\t\t (this._world[y][x].edge['bottom'] && this._world[y][x].edge['right']) ||\n\t\t\t\t\t\t (this._world[y][x].edge['bottom'] && this._world[y][x].edge['left']) ) {\n\t\t\t\t\t\tthis._world[y][x].corner = true\n\t\t\t\t\t}\n\t\t\t\t}\t\t\t\t\n\t\t\t}\n\t\t}\n\t}\n\n\tgetEdges(): void {\n\n\t\tfor (let y = 0; y < this._mapLength; y++) {\n\t\t\t// only check second half of map\n\n\t\t\tif (y > this._mapHalfLength + 1) {\n\n\t\t\t\tfor (let x = 0; x < this._mapWidth; x++) {\n\t\t\t\t\t\n\t\t\t\t\tif (x > this._mapEdgeWidth && x < this._mapWidth - 1) {\n\n\t\t\t\t\t\tif (this._world[y][x].isDefined) {\n\n\t\t\t\t\t\t\t// if the current tile type is 0, look to the tiles around it to find the edges\n\t\t\t\t\t\t\tif (this._world[y][x+1].isDefined || \n\t\t\t\t\t\t\t\tthis._world[y][x-1].isDefined || \n\t\t\t\t\t\t\t\tthis._world[y-1][x].isDefined || \n\t\t\t\t\t\t\t\tthis._world[y-1][x+1].isDefined || \n\t\t\t\t\t\t\t\tthis._world[y-1][x-1].isDefined) {\n\n\t\t\t\t\t\t\t\t// push edges above the block\n\n\t\t\t\t\t\t\t\tlet pos: Position = {x: x,y: y}\n\n\t\t\t\t\t\t\t\tthis._blockEdges.push(pos)\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tclearMapEdges(): void {\n\n\t\tfor (let y = 0; y < this._mapLength; y++) {\n\t\t\tfor (let x = 0; x < this._mapWidth; x++) {\n\t\t\t\tif (x <= this._mapEdgeWidth || x >= this._mapWidth - this._mapEdgeWidth ||\n\t\t\t\t\ty <= this._mapEdgeWidth || y >= this._mapLength - this._mapEdgeWidth) {\n\t\t\t\t\tthis._world[y][x] = null\n\t\t\t\t\tlet column = new Column(false, x, y, 0)\n\t\t\t\t\tthis._world[y][x] = column\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tcreatePyramid(): void {\n\n\t\tlet pyramid = this.primitives.getPyramid()\n\t\tlet remainderLength = this.mapLength - pyramid.length\n\t\tlet remainderWidth = this.mapWidth - pyramid[0].length\n\t\tlet edgeX = Math.round(remainderWidth / 2)\n\t\tlet edgeY = Math.round(remainderLength / 2)\n\t\tlet row: number[] = []\n\t\tlet edge: number[] = []\n\n\t\tfor (let i = 0; i < this.mapWidth; i++) {\n\t\t\trow.push(0)\n\t\t}\n\n\t\tfor (let y = 0; y < pyramid.length; y++) {\n\t\t\tfor (let r = 0; r < edgeX; r++) {\n\t\t\t\tpyramid[y].unshift(0)\n\t\t\t\tpyramid[y].push(0)\n\t\t\t}\n\t\t}\n\n\t\tfor (let y = 0; y < this.mapLength-1; y++) {\n\t\t\tif (y < edgeY - 1) {\n\t\t\t\tpyramid.unshift(row)\n\t\t\t} else if (y > pyramid.length + 2 - edgeY) {\n\t\t\t\tpyramid.push(row)\n\t\t\t}\n\t\t}\n\n\t\tthis._world = pyramid\n\t\tlet i = 0\n\n\t\tfor (let y = 0; y < this.mapLength; y++) {\n\n\t\t\tfor (let x = 0; x < this.mapWidth; x++) {\n\n\t\t\t\tlet height = pyramid[y][x]\t\t\t\t\n\n\t\t\t\tlet column = new Column(false, x, y, 0)\n\n\t\t\t\tlet thisBlockGroup = 0\n\t\t\t\tlet tileStack = []\n\n\t\t\t\tif (height > 0) {\n\n\t\t\t\t\tfor (let h = 0; h < height; h++) {\n\n\t\t\t\t\t\tlet thisPillar = 0\n\t\t\t\t\t\tlet thisWindowed = 0\n\t\t\t\t\t\tlet isRoof = (h === height-1) ? true : false\n\n\t\t\t\t\t\ttileStack.push(\n\t\t\t\t\t\t\tnew Tile(\n\t\t\t\t\t\t\t\ti, \n\t\t\t\t\t\t\t\tx, \n\t\t\t\t\t\t\t\ty, \n\t\t\t\t\t\t\t\th, \n\t\t\t\t\t\t\t\tTileType.Body,\n\t\t\t\t\t\t\t\tthis.config.buildingBaseColor,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t'roof':\t\t\tisRoof,\n\t\t\t\t\t\t\t\t\t'pillar': \t\tthisPillar,\n\t\t\t\t\t\t\t\t\t'windowed': \tthisWindowed,\n\t\t\t\t\t\t\t\t\t'tower': \t\tfalse\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t)\n\n\t\t\t\t\t\tif (this._blockGroups.indexOf(thisBlockGroup) === -1) {\n\t\t\t\t\t\t\tthis._blockGroups[thisBlockGroup] = new Array( [y,x] )\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis._blockGroups[thisBlockGroup].push([y,x])\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ti++\n\t\t\t\t\t}\n\n\t\t\t\t\tcolumn = new Column(true, x, y, height)\n\n\t\t\t\t\tcolumn.blockGroup = thisBlockGroup\n\t\t\t\t\tcolumn.height = height\n\t\t\t\t\tcolumn.corner = false\n\t\t\t\t\tcolumn.tileStack = tileStack\n\t\t\t\t}\t\t\t\t\n\n\t\t\t\tthis._world[y][x] = column\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nclass Column {\n\n\tprivate _defined: boolean\n\tprivate _x: number\n\tprivate _y: number\n\tprivate _height: number\n\tprivate _blockGroup: number\n\tprivate _corner: boolean\n\tprivate _edge: object = { 'top': false, 'right': false, 'bottom': false, 'left': false }\n\tprivate _tileStack: Tile[] = []\n\n\tconstructor(private defined: boolean, private colX: number, private colY: number, private colHeight: number) {\n\t\tthis._defined = defined\n\t\tthis._x = colX\n\t\tthis._y = colY\n\t\tthis._height = colHeight\n\t}\n\n\tset x(x: number) {\n\t\tthis._x = x\n\t}\n\n\tset y(y: number) {\n\t\tthis._y = y\n\t}\n\n\tset height(height: number) {\n\t\tthis._height = height\n\t}\n\n\tset blockGroup(groupNum: number) {\n\t\tthis._blockGroup = groupNum\n\t}\n\n\tset corner(corner: boolean) {\n\t\tthis._corner = corner\n\t}\n\n\tset edge(edge: object) {\n\t\tthis._edge = edge\n\t}\n\n\tset tileStack(tiles: Tile[]) {\n\t\tthis._tileStack = tiles\n\t}\n\n\tget isDefined(): boolean {\n\t\treturn this._defined\n\t}\n\n\tget x(): number {\n\t\treturn this._x\n\t}\n\n\tget y(): number {\n\t\treturn this._y\n\t}\n\n\tget height(): number {\n\t\treturn this._height\n\t}\n\n\tget blockGroup(): number {\n\t\treturn this._blockGroup\n\t}\n\n\tget corner(): boolean {\n\t\treturn this._corner\n\t}\n\n\tget edge(): object {\n\t\treturn this._edge\n\t}\n\n\tget tileStack(): Tile[] {\n\t\treturn this._tileStack\n\t}\n\n\tpublic getTile(height: number): Tile {\n\t\treturn this._tileStack[height]\n\t}\n}\n","export class Primitives {\n\n\tgetPyramid(): number[][] {\n\n\t\treturn [\n\t\t\t\t[0,0,0,0,0,0,0,0,0,0,0,0],\n\t\t\t\t[0,1,1,1,1,1,1,1,1,1,1,0],\n\t\t\t\t[0,1,2,2,2,2,2,2,2,2,1,0],\n\t\t\t\t[0,1,2,3,3,3,3,3,3,2,1,0],\n\t\t\t\t[0,1,2,3,4,4,4,4,3,2,1,0],\n\t\t\t\t[0,1,2,3,4,5,5,4,3,2,1,0],\n\t\t\t\t[0,1,2,3,4,5,5,4,3,2,1,0],\n\t\t\t\t[0,1,2,3,4,4,4,4,3,2,1,0],\n\t\t\t\t[0,1,2,3,3,3,3,3,3,2,1,0],\n\t\t\t\t[0,1,2,2,2,2,2,2,2,2,1,0],\n\t\t\t\t[0,1,1,1,1,1,1,1,1,1,1,0],\n\t\t\t\t[0,0,0,0,0,0,0,0,0,0,0,0],\n\t\t\t]\n\t}\n}","import { Config, Coords, TileTemplate, Position } from './config.component'\nimport { MapGenerationFunctions, Color } from './mapGenerationFunctions.component'\nimport { Tile, TileType } from './tile.component'\n\nexport class RenderElements {\n\n\tprivate config: Config = new Config()\n\tprivate calculations: MapGenerationFunctions = new MapGenerationFunctions()\n\n\tprivate tileW: number = this.config.tileWidth\n\tprivate tileL: number = this.config.tileLength\n\tprivate tileH: number = this.config.tileHeight\n\tprivate bleed: number = this.config.tileEdgeBleed\n\tprivate dimensions = this.calculations.calculateStraightLinesFromIsometricSquare(this.tileW, this.tileL)\n\n\tprivate tileColor: string = this.config.groundColor.hex()\n\tprivate regularColor: string = this.config.buildingBaseColor.hex()\n\t/*\n\tprivate regularDarkerColor: string = `rgb(${this.config.buildingBaseColor.getDarkerRegularRGB().r},${this.config.buildingBaseColor.getDarkerRegularRGB().g},${this.config.buildingBaseColor.getDarkerRegularRGB().b})`\n\tprivate highlightColor: string = `rgb(${this.config.buildingBaseColor.getHighlightsRGB().r},${this.config.buildingBaseColor.getHighlightsRGB().g},${this.config.buildingBaseColor.getHighlightsRGB().b})`\n\tprivate shadowColor: string = `rgb(${this.config.buildingBaseColor.getShadowsRGB().r},${this.config.buildingBaseColor.getShadowsRGB().g},${this.config.buildingBaseColor.getShadowsRGB().b})`\n\tprivate halflightColor: string = `rgb(${this.config.buildingBaseColor.getHalflightsRGB().r},${this.config.buildingBaseColor.getHalflightsRGB().g},${this.config.buildingBaseColor.getHalflightsRGB().b})`\n\tprivate darkestColor: string = `rgb(${this.config.buildingBaseColor.getDarkestRGB().r},${this.config.buildingBaseColor.getDarkestRGB().g},${this.config.buildingBaseColor.getDarkestRGB().b})`\n\tprivate lightestColor: string = `rgb(${this.config.buildingBaseColor.getLightestRGB().r},${this.config.buildingBaseColor.getLightestRGB().g},${this.config.buildingBaseColor.getLightestRGB().b})`\n\t*/\n\n\tprivate regularDarkerColor: string = this.config.buildingBaseColor.changeColorLighting(-10, 'hex')\n\tprivate regularLighterColor: string = this.config.buildingBaseColor.changeColorLighting(10, 'hex')\n\tprivate shadowLight: string = this.config.buildingBaseColor.changeColorLighting(-20, 'hex')\n\tprivate shadowHighlight: string = this.config.buildingBaseColor.changeColorLighting(20, 'hex')\n\tprivate shadow: string = this.config.buildingBaseColor.changeColorLighting(-30, 'hex')\n\tprivate highlight: string = this.config.buildingBaseColor.changeColorLighting(30, 'hex')\n\tprivate almostDarkestColor: string = this.config.buildingBaseColor.changeColorLighting(-40, 'hex')\n\tprivate almostLightestColor: string = this.config.buildingBaseColor.changeColorLighting(40, 'hex')\n\tprivate darkestColor: string = this.config.buildingBaseColor.changeColorLighting(-50, 'hex')\n\tprivate lightestColor: string = this.config.buildingBaseColor.changeColorLighting(50, 'hex')\n\n\n\tcreateTile(xPos: number, yPos: number): TileTemplate {\n\n\t\tlet top: Position = { \"x\": (xPos + this.dimensions.horizontalWidthFromTop), \"y\": yPos}\n\t\tlet left: Position = { \"x\": xPos, \"y\": (yPos + this.dimensions.verticalHeightFromTop) }\n\t\tlet bottom: Position = { \"x\": (xPos + this.dimensions.horizontalWidthFromBottom), \"y\": (yPos + this.dimensions.totalHeight) }\n\t\tlet right: Position = { \"x\": (xPos + this.dimensions.totalWidth), \"y\": (yPos + this.dimensions.verticalHeightFromBottom) }\n\n\t\tlet pointTop = `${top.x} ${top.y-this.bleed}`\n\t\tlet pointLeft = `${left.x-this.bleed} ${left.y}`\n\t\tlet pointBottom = `${bottom.x} ${bottom.y+this.bleed}`\n\t\tlet pointRight = `${right.x+this.bleed} ${right.y}`\n\n\t\tvar html = `<path fill=\"${this.tileColor}\"\n\t\t\t\t\td=\"M${pointLeft} \n\t\t\t\t\tL${pointBottom} \n\t\t\t\t\tL${pointRight} \n\t\t\t\t\tL${pointTop} \n\t\t\t\t\tL${pointLeft} Z\" />`\n\n\t\tlet coords: Coords = { \"top\": top, \"left\": left, \"bottom\": bottom, \"right\": right }\n\n\t\treturn { html: html, coords: coords }\n\t}\n\n\tcreateBlock(xPos: number, yPos: number, tile: Tile): TileTemplate {\n\n\t\tlet id = tile.id\n\t\tlet height = (tile.h * this.tileH) - this.tileH\n\n\t\tlet top: Position = { \"x\": Math.ceil(xPos + this.dimensions.horizontalWidthFromTop), \"y\": Math.ceil(yPos) }\n\t\tlet left: Position = { \"x\": Math.ceil(xPos), \"y\": Math.ceil(yPos + this.dimensions.verticalHeightFromTop) }\n\t\tlet bottom: Position = { \"x\": Math.ceil(xPos + this.dimensions.horizontalWidthFromBottom), \"y\": Math.ceil(yPos + this.dimensions.totalHeight) }\n\t\tlet right: Position = { \"x\": Math.ceil(xPos + this.dimensions.totalWidth), \"y\": Math.ceil(yPos + this.dimensions.verticalHeightFromBottom) }\n\n\t\tlet leftWallLeftTop = `${left.x-this.bleed} ${left.y-height-this.tileH}`\n\t\tlet leftWallLeftBottom = `${left.x-this.bleed} ${left.y-height+this.bleed}`\n\t\tlet leftWallRightBottom = `${bottom.x} ${bottom.y-height+this.bleed}`\n\t\tlet leftWallRightTop = `${bottom.x} ${bottom.y-height-this.tileH}`\n\n\t\tlet rightWallLeftTop = `${bottom.x} ${bottom.y-height-this.tileH}`\n\t\tlet rightWallLeftBottom = `${bottom.x} ${bottom.y-height+this.bleed}`\n\t\tlet rightWallRightBottom = `${right.x+this.bleed} ${right.y-height+this.bleed}`\n\t\tlet rightWallRightTop = `${right.x+this.bleed} ${right.y-height-this.tileH}`\n\n\t\tlet blockTopLeft = `${left.x-this.bleed} ${left.y-height-this.tileH}`\n\t\tlet blockTopBottom = `${bottom.x} ${bottom.y-height-this.tileH}`\n\t\tlet blockTopRight = `${right.x+this.bleed} ${right.y-height-this.tileH}`\n\t\tlet blockTopTop = `${top.x} ${top.y-height-this.tileH}`\n\n\t\tlet html = `<g style=\"z-index:${id};\"><path fill=\"${this.darkestColor}\"\n\t\t\t\t\td=\"M${leftWallLeftTop} \n\t\t\t\t\tL${leftWallLeftBottom} \n\t\t\t\t\tL${leftWallRightBottom} \n\t\t\t\t\tL${leftWallRightTop} \n\t\t\t\t\tL${leftWallLeftTop} Z\" />\n\t\t\t\t\t<path fill=\"${this.regularColor}\"\n\t\t\t\t\td=\"M${rightWallLeftTop} \n\t\t\t\t\tL${rightWallLeftBottom} \n\t\t\t\t\tL${rightWallRightBottom} \n\t\t\t\t\tL${rightWallRightTop} \n\t\t\t\t\tL${rightWallLeftTop} Z\" />\n\t\t\t\t\t<path fill=\"${this.highlight}\"\n\t\t\t\t\td=\"M${blockTopLeft} \n\t\t\t\t\tL${blockTopBottom} \n\t\t\t\t\tL${blockTopRight} \n\t\t\t\t\tL${blockTopTop} \n\t\t\t\t\tL${blockTopLeft} Z\" /></g>`\n\n\t\tlet coords: Coords = { \"top\": top, \"left\": left, \"bottom\": bottom, \"right\": right }\n\n\t\treturn { html: html, coords: coords }\n\t}\n\n\tcreateSlopeBlock(xPos: number, yPos: number, tile: Tile, slopeDirection: string): TileTemplate {\n\n\t\tlet id = tile.id\n\t\tlet height = (tile.h * this.tileH) - this.tileH\n\n\t\tlet top: Position = { \"x\": Math.ceil(xPos + this.dimensions.horizontalWidthFromTop), \"y\": Math.ceil(yPos) }\n\t\tlet left: Position = { \"x\": Math.ceil(xPos), \"y\": Math.ceil(yPos + this.dimensions.verticalHeightFromTop) }\n\t\tlet bottom: Position = { \"x\": Math.ceil(xPos + this.dimensions.horizontalWidthFromBottom), \"y\": Math.ceil(yPos + this.dimensions.totalHeight) }\n\t\tlet right: Position = { \"x\": Math.ceil(xPos + this.dimensions.totalWidth), \"y\": Math.ceil(yPos + this.dimensions.verticalHeightFromBottom) }\n\n\t\tlet html = ''\n\t\tlet coords: Coords = { \"top\": top, \"left\": left, \"bottom\": bottom, \"right\": right }\n\n\t\tif (slopeDirection === 'n') {\n\n\t\t\tlet leftWallLeftTop = `${left.x-this.bleed} ${left.y-height-this.tileH}`\n\t\t\tlet leftWallLeftBottom = `${left.x-this.bleed} ${left.y-height+this.bleed}`\n\t\t\tlet leftWallRightBottom = `${bottom.x} ${bottom.y-height+this.bleed}`\n\t\t\tlet leftWallRightTop = `${bottom.x} ${bottom.y-height-this.tileH}`\n\n\t\t\tlet rightWallLeftTop = `${bottom.x} ${bottom.y-height-this.tileH}`\n\t\t\tlet rightWallLeftBottom = `${bottom.x} ${bottom.y-height+this.bleed}`\n\t\t\tlet rightWallRightBottom = `${right.x+this.bleed} ${right.y-height+this.bleed}`\n\n\t\t\tlet blockTopLeft = `${left.x-this.bleed} ${left.y-height-this.tileH}`\n\t\t\tlet blockTopBottom = `${bottom.x} ${bottom.y-height-this.tileH}`\n\t\t\tlet blockTopRight = `${right.x+this.bleed} ${right.y-height+this.bleed}`\n\t\t\tlet blockTopTop = `${top.x} ${top.y-height}`\n\n\t\t\thtml = `<g style=\"z-index:${id};\">\n\t\t\t\t\t\t\t<path fill=\"${this.shadow}\"\n\t\t\t\t\t\t\td=\"M${leftWallLeftTop} \n\t\t\t\t\t\t\tL${leftWallLeftBottom} \n\t\t\t\t\t\t\tL${leftWallRightBottom} \n\t\t\t\t\t\t\tL${leftWallRightTop} \n\t\t\t\t\t\t\tL${leftWallLeftTop} Z\" />\n\t\t\t\t\t\t\t<path fill=\"${this.regularColor}\"\n\t\t\t\t\t\t\td=\"M${rightWallLeftTop}\n\t\t\t\t\t\t\tL${rightWallLeftBottom}\n\t\t\t\t\t\t\tL${rightWallRightBottom}\n\t\t\t\t\t\t\tL${rightWallLeftTop} Z\" />\n\t\t\t\t\t\t\t<path fill=\"${this.lightestColor}\"\n\t\t\t\t\t\t\td=\"M${blockTopLeft}\n\t\t\t\t\t\t\tL${blockTopBottom}\n\t\t\t\t\t\t\tL${blockTopRight}\n\t\t\t\t\t\t\tL${blockTopTop}\n\t\t\t\t\t\t\tL${blockTopLeft} Z\" />\n\t\t\t\t\t\t</g>`\n\t\t}\n\n\t\tif (slopeDirection === 'nw') {\n\n\t\t\tconsole.log('northwest')\n\n\t\t\tlet leftWallLeftTop = `${left.x-this.bleed} ${left.y-height}`\n\t\t\tlet leftWallLeftBottom = `${left.x-this.bleed} ${left.y-height+this.bleed}`\n\t\t\tlet leftWallRightBottom = `${bottom.x} ${bottom.y-height-this.tileH+this.bleed}`\n\n\t\t\tlet blockTopLeft = `${left.x-this.bleed} ${left.y-height+this.bleed}`\n\t\t\tlet blockTopBottom = `${bottom.x} ${bottom.y-height-this.tileH+this.bleed}`\n\t\t\tlet blockTopTop = `${top.x} ${top.y-height}`\n\n\t\t\tlet blockRightBottom = `${bottom.x} ${bottom.y-height-this.tileH}`\n\t\t\tlet blockRightRight = `${right.x+this.bleed} ${right.y-height+this.bleed}`\n\t\t\tlet blockRightTop = `${top.x} ${top.y-height}`\n\n\t\t\thtml = `<g style=\"z-index:${id};\">\n\t\t\t\t\t\t\t<path fill=\"${this.darkestColor}\"\n\t\t\t\t\t\t\td=\"M${leftWallLeftTop}\n\t\t\t\t\t\t\tL${leftWallLeftBottom}\n\t\t\t\t\t\t\tL${leftWallRightBottom}\n\t\t\t\t\t\t\tL${leftWallLeftTop} Z\" />\n\t\t\t\t\t\t\t<path fill=\"${this.regularDarkerColor}\"\n\t\t\t\t\t\t\td=\"M${blockTopLeft}\n\t\t\t\t\t\t\tL${blockTopBottom}\n\t\t\t\t\t\t\tL${blockTopTop}\n\t\t\t\t\t\t\tL${blockTopLeft} Z\" />\n\t\t\t\t\t\t\t<path fill=\"${this.lightestColor}\"\n\t\t\t\t\t\t\td=\"M${blockRightBottom}\n\t\t\t\t\t\t\tL${blockRightRight}\n\t\t\t\t\t\t\tL${blockRightTop}\n\t\t\t\t\t\t\tL${blockRightBottom} Z\" />\n\t\t\t\t\t\t</g>`\n\t\t}\n\n\t\tif (slopeDirection === 's') {\n\n\t\t\tlet rightWallLeftBottom = `${bottom.x} ${bottom.y-height+this.bleed}`\n\t\t\tlet rightWallRightBottom = `${right.x+this.bleed} ${right.y-height+this.bleed}`\n\t\t\tlet rightWallRightTop = `${right.x+this.bleed} ${right.y-height-this.tileH}`\n\n\t\t\tlet blockTopLeft = `${left.x-this.bleed} ${left.y-height+this.bleed}`\n\t\t\tlet blockTopBottom = `${bottom.x} ${bottom.y-height+this.bleed}`\n\t\t\tlet blockTopRight = `${right.x+this.bleed} ${right.y-height-this.tileH+this.bleed}`\n\t\t\tlet blockTopTop = `${top.x} ${top.y-height-this.tileH}`\n\n\t\t\thtml = `<g style=\"z-index:${id};\">\n\t\t\t\t\t\t\t<path fill=\"${this.regularColor}\"\n\t\t\t\t\t\t\td=\"M${rightWallLeftBottom}\n\t\t\t\t\t\t\tL${rightWallRightBottom}\n\t\t\t\t\t\t\tL${rightWallRightTop}\n\t\t\t\t\t\t\tL${rightWallLeftBottom} Z\" />\n\t\t\t\t\t\t\t<path fill=\"${this.shadow}\"\n\t\t\t\t\t\t\td=\"M${blockTopLeft}\n\t\t\t\t\t\t\tL${blockTopBottom}\n\t\t\t\t\t\t\tL${blockTopRight}\n\t\t\t\t\t\t\tL${blockTopTop}\n\t\t\t\t\t\t\tL${blockTopLeft} Z\" />\n\t\t\t\t\t\t</g>`\n\t\t}\n\n\t\tif (slopeDirection === 'se') {\n\n\t\t\tlet blockLeftLeft = `${left.x-this.bleed} ${left.y-height+this.bleed}`\n\t\t\tlet blockLeftBottom = `${bottom.x} ${bottom.y-height+this.bleed}`\n\t\t\tlet blockLeftTop = `${top.x} ${top.y-height-this.tileH}`\n\n\t\t\tlet blockRightBottom = `${bottom.x} ${bottom.y-height+this.bleed}`\n\t\t\tlet blockRightRight = `${right.x+this.bleed} ${right.y-height+this.bleed}`\n\t\t\tlet blockRightTop = `${top.x} ${top.y-height-this.tileH}`\n\n\t\t\thtml = `<g style=\"z-index:${id};\">\n\t\t\t\t\t\t<path fill=\"${this.shadow}\"\n\t\t\t\t\t\td=\"M${blockLeftLeft}\n\t\t\t\t\t\tL${blockLeftBottom}\n\t\t\t\t\t\tL${blockLeftTop}\n\t\t\t\t\t\tL${blockLeftLeft} Z\" />\n\t\t\t\t\t\t<path fill=\"${this.regularDarkerColor}\"\n\t\t\t\t\t\td=\"M${blockRightRight}\n\t\t\t\t\t\tL${blockRightBottom}\n\t\t\t\t\t\tL${blockRightTop}\n\t\t\t\t\t\tL${blockRightRight} Z\" />\n\t\t\t\t\t</g>`\n\t\t}\n\n\t\tif (slopeDirection === 'e') {\n\n\t\t\tlet leftWallLeftTop = `${left.x-this.bleed} ${left.y-height-this.tileH}`\n\t\t\tlet leftWallLeftBottom = `${left.x-this.bleed} ${left.y-height+this.bleed}`\n\t\t\tlet leftWallRightBottom = `${bottom.x} ${bottom.y-height+this.bleed}`\n\n\t\t\tlet blockTopLeft = `${left.x-this.bleed} ${left.y-height-this.tileH+this.bleed}`\n\t\t\tlet blockTopBottom = `${bottom.x} ${bottom.y-height+this.bleed}`\n\t\t\tlet blockTopRight = `${right.x+this.bleed} ${right.y-height+this.bleed}`\n\t\t\tlet blockTopTop = `${top.x} ${top.y-height-this.tileH}`\n\n\t\t\thtml = `<g style=\"z-index:${id};\">\n\t\t\t\t\t\t\t<path fill=\"${this.darkestColor}\"\n\t\t\t\t\t\t\td=\"M${leftWallLeftTop}\n\t\t\t\t\t\t\tL${leftWallLeftBottom}\n\t\t\t\t\t\t\tL${leftWallRightBottom}\n\t\t\t\t\t\t\tL${leftWallLeftTop} Z\" />\n\t\t\t\t\t\t\t<path fill=\"${this.regularDarkerColor}\"\n\t\t\t\t\t\t\td=\"M${blockTopLeft}\n\t\t\t\t\t\t\tL${blockTopBottom}\n\t\t\t\t\t\t\tL${blockTopRight}\n\t\t\t\t\t\t\tL${blockTopTop}\n\t\t\t\t\t\t\tL${blockTopLeft} Z\" />\n\t\t\t\t\t\t</g>`\n\t\t}\n\n\t\tif (slopeDirection === 'ne') {\n\n\t\t\tlet leftWallLeftTop = `${left.x-this.bleed} ${left.y-height-this.tileH}`\n\t\t\tlet leftWallLeftBottom = `${left.x-this.bleed} ${left.y-height+this.bleed}`\n\t\t\tlet leftWallRightBottom = `${bottom.x} ${bottom.y-height+this.bleed}`\n\n\t\t\tlet blockBottomLeft = `${left.x-this.bleed} ${left.y-height-this.tileH+this.bleed}`\n\t\t\tlet blockBottomRight = `${right.x+this.bleed} ${right.y-height+this.bleed}`\n\t\t\tlet blockBottomTop = `${top.x} ${top.y-height}`\n\n\t\t\tlet blockTopLeft = `${left.x-this.bleed} ${left.y-height-this.tileH+this.bleed}`\n\t\t\tlet blockTopBottom = `${bottom.x} ${bottom.y-height+this.bleed}`\n\t\t\tlet blockTopRight = `${right.x+this.bleed} ${right.y-height+this.bleed}`\n\n\t\t\thtml = `<g style=\"z-index:${id};\">\n\t\t\t\t\t\t<path fill=\"${this.darkestColor}\"\n\t\t\t\t\t\td=\"M${leftWallLeftTop}\n\t\t\t\t\t\tL${leftWallLeftBottom}\n\t\t\t\t\t\tL${leftWallRightBottom}\n\t\t\t\t\t\tL${leftWallLeftTop} Z\" />\n\t\t\t\t\t\t<path fill=\"${this.regularDarkerColor}\"\n\t\t\t\t\t\td=\"M${blockTopLeft}\n\t\t\t\t\t\tL${blockTopBottom}\n\t\t\t\t\t\tL${blockTopRight}\n\t\t\t\t\t\tL${blockTopLeft} Z\" />\n\t\t\t\t\t\t<path fill=\"${this.lightestColor}\"\n\t\t\t\t\t\td=\"M${blockBottomLeft}\n\t\t\t\t\t\tL${blockBottomTop}\n\t\t\t\t\t\tL${blockBottomRight}\n\t\t\t\t\t\tL${blockBottomLeft} Z\" />\n\t\t\t\t\t</g>`\n\t\t}\n\n\t\tif (slopeDirection === 'w') {\n\n\t\t\tlet leftWallLeftTop = `${left.x-this.bleed} ${left.y-height}`\n\t\t\tlet leftWallLeftBottom = `${left.x-this.bleed} ${left.y-height+this.bleed}`\n\t\t\tlet leftWallRightBottom = `${bottom.x} ${bottom.y-height-this.tileH+this.bleed}`\n\n\t\t\tlet blockTopLeft = `${left.x-this.bleed} ${left.y-height+this.bleed}`\n\t\t\tlet blockTopBottom = `${bottom.x} ${bottom.y-height-this.tileH+this.bleed}`\n\t\t\tlet blockTopRight = `${right.x+this.bleed} ${right.y-height-this.tileH+this.bleed}`\n\t\t\tlet blockTopTop = `${top.x} ${top.y-height}`\n\n\t\t\thtml = `<g style=\"z-index:${id};\">\n\t\t\t\t\t\t\t<path fill=\"${this.darkestColor}\"\n\t\t\t\t\t\t\td=\"M${leftWallLeftTop}\n\t\t\t\t\t\t\tL${leftWallLeftBottom}\n\t\t\t\t\t\t\tL${leftWallRightBottom}\n\t\t\t\t\t\t\tL${leftWallLeftTop} Z\" />\n\t\t\t\t\t\t\t<path fill=\"${this.regularDarkerColor}\"\n\t\t\t\t\t\t\td=\"M${blockTopLeft}\n\t\t\t\t\t\t\tL${blockTopBottom}\n\t\t\t\t\t\t\tL${blockTopRight}\n\t\t\t\t\t\t\tL${blockTopTop}\n\t\t\t\t\t\t\tL${blockTopLeft} Z\" />\n\t\t\t\t\t\t</g>`\n\t\t}\n\n\t\tif (slopeDirection === 'sw') {\n\n\t\t\tlet rightWallLeftBottom = `${bottom.x} ${bottom.y-height+this.bleed}`\n\t\t\tlet rightWallRightBottom = `${right.x+this.bleed} ${right.y-height+this.bleed}`\n\t\t\tlet rightWallRightTop = `${right.x+this.bleed} ${right.y-height-this.tileH}`\n\n\t\t\tlet blockTopLeft = `${left.x-this.bleed} ${left.y-height+this.bleed}`\n\t\t\tlet blockTopBottom = `${bottom.x} ${bottom.y-height+this.bleed}`\n\t\t\tlet blockTopRight = `${right.x+this.bleed} ${right.y-height-this.tileH+this.bleed}`\n\t\t\tlet blockTopTop = `${top.x} ${top.y-height}`\n\n\t\t\thtml = `<g style=\"z-index:${id};\">\n\t\t\t\t\t\t\t<path fill=\"${this.regularColor}\"\n\t\t\t\t\t\t\td=\"M${rightWallLeftBottom}\n\t\t\t\t\t\t\tL${rightWallRightBottom}\n\t\t\t\t\t\t\tL${rightWallRightTop}\n\t\t\t\t\t\t\tL${rightWallLeftBottom} Z\" />\n\t\t\t\t\t\t\t<path fill=\"${this.regularDarkerColor}\"\n\t\t\t\t\t\t\td=\"M${blockTopLeft}\n\t\t\t\t\t\t\tL${blockTopTop}\n\t\t\t\t\t\t\tL${blockTopRight}\n\t\t\t\t\t\t\tL${blockTopLeft} Z\" />\n\t\t\t\t\t\t\t<path fill=\"${this.shadow}\"\n\t\t\t\t\t\t\td=\"M${blockTopLeft}\n\t\t\t\t\t\t\tL${blockTopBottom}\n\t\t\t\t\t\t\tL${blockTopRight}\n\t\t\t\t\t\t\tL${blockTopLeft} Z\" />\n\t\t\t\t\t\t</g>`\n\t\t}\n\n\t\treturn { html: html, coords: coords }\n\t}\n}","import { Color } from './mapGenerationFunctions.component'\n\nexport class Tile {\n\t\n\t_id: number\n\t_x: number\n\t_y: number\n\t_h: number\n\t_tileType: TileType\n\t_tileColor: Color\n\t_options?: object = {}\n\n\tconstructor(\t\t\t\n\t\t\tid: number,\n\t\t\tx: number,\n\t\t\ty: number,\n\t\t\th: number,\n\t\t\ttileType: TileType,\n\t\t\ttileColor: Color,\n\t\t\toptions?: object)\n\t{\n\t\tthis._id = id\n\t\tthis._x = x\n\t\tthis._y = y\n\t\tthis._h = h\n\t\tthis._tileType = tileType\n\t\tthis._tileColor = tileColor\n\n\t\tif (options) {\n\t\t\tthis._options = options\n\t\t}\n\t}\n\n\tget id(): number {\n\t\treturn this._id\n\t}\n\n\tget x(): number {\n\t\treturn this._x\n\t}\n\n\tget y(): number {\n\t\treturn this._y\n\t}\n\n\tget h(): number {\n\t\treturn this._h\n\t}\n\n\tget type(): TileType {\n\t\treturn this._tileType\n\t}\n\n\tget options(): object {\n\t\tif (this._tileType != TileType.None) {\n\t\t\treturn this._options\n\t\t} else {\n\t\t\treturn { 'defined': false }\n\t\t}\n\t}\n\n\tpublic getColor(): Color {\n\t\treturn this._tileColor\n\t}\n\n}\n\nexport enum TileType {\n\tNone = 'none',\n\tBody = 'body',\n\tTower = 'tower',\n\tRoof = 'roof'\n}\n"]}
{"version":3,"sources":["node_modules/browser-pack/_prelude.js","bundle.min.js","src/ts/builder.component.ts","src/ts/config.component.ts","src/ts/main.ts","src/ts/mapGenerationFunctions.component.ts","src/ts/mapper.component.ts","src/ts/modifiers.component.ts","src/ts/primitives.component.ts","src/ts/renderelements.component.ts","src/ts/tile.component.ts"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","Object","defineProperty","value","mapGenerationFunctions_component_1","config_component_1","renderelements_component_1","Renderer","[object Object]","this","config","Config","calculations","MapGenerationFunctions","render","RenderElements","map","html","mapWidth","mapLength","tileWidth","tileLength","htmlMap","getMapWidth","y","halfWay","Math","round","x","getColumn","isDefined","tileTopColor","getTopTile","getColor","rgb","tileColor","edge","top","right","bottom","left","height","mapToBuild","mapTotalWidth","mapTotalLength","testTile","createTile","yDeviation","coords","tileHalfWidthLeft","tileHalfWidthRight","tileHalfLengthTop","mapLengthTop","mapLengthBottom","mapWidthPx","mapLengthPx","topMargin","detailsHtml","lastTile","startTileX","thisPosY","thisPosX","newTile","newData","h","tile","createBlock","tileHeight","tileStack","allowDebug","debugInfo","blockGroup","id","xPos","yPos","corner","createSlopeBlock","getTile","./config.component","./mapGenerationFunctions.component","./renderelements.component","2","_allowDebug","_tileWidth","_tileLength","_tileHeight","_tileSmallAngle","_tileLargeAngle","_groundColor","Color","_buildingBaseColor","floor","random","_tileEdgeBleed","_maxAllowedHeight","_topMargin","tileSmallAngle","tileLargeAngle","groundColor","buildingBaseColor","tileEdgeBleed","maxAllowedHeight","mapArrayWidth","mapArrayLength","3","mapper_component_1","builder_component_1","RandomBuilding","_builder","_map","Map","document","querySelector","style","background","hex","build2DMap","addToBuilding","buildMap","building","innerHTML","colorMap","drawTileMap","addEventListener","classList","remove","querySelectorAll","forEach","item","console","log","parentElement","toggle","addToBuildingAndRedraw","./builder.component","./mapper.component","4","smallAngle","largeAngle","maximumBlockIterations","blockWidth","blockHeight","smallOuterAngle","largeOuterAngle","horizontalWidthFromBottom","getHorizontalBottomShortestWidth","verticalHeightFromBottom","getVerticalBottomShortestHeight","horizontalWidthFromTop","getHorizontalTopLongestWidth","verticalHeightFromTop","getVerticalTopLongestHeight","totalWidth","totalHeight","diagonalWidth","sin","toRadians","diagonalHeight","cos","angle","PI","TileColor","BuildingHeightVariations","params","error","validateHex","hexColor","charAt","setHex","hexToRgb","validateRgb","setRgb","rgbToHex","toString","g","b","_colorRgb","hexadecimal","hexVal1","hexVal2","hexVal3","_colorHex","match","hexValues","substr","split","hexPair1","parseInt","hexPair2","hexPair3","hexR","Number","hexG","hexB","amount","encoding","newR","newG","newB","5","tile_component_1","primitives_component_1","modifiers_component_1","mapMaxHeight","mapEdgeWidth","averageBuildingSize","pyramid","mapGen","primitives","Primitives","mods","Modifiers","_blockHeightVariationLabels","TallCenter","TallSurrounds","Random","_blockHeightVariation","_mapWidth","_mapLength","_mapMaxHeight","_mapEdgeWidth","_averageBuildingSize","_blockHeight","_maximumBlockIterations","_additionalBlockIterations","calculateAdditionalBlockIterations","_blockGroups","_blockEdges","_blockHeightsArray","_mapHalfLength","_blockIdIterator","_blockAmountIterator","_blockHeightIterator","mapLengthHalf","startblockLength","startblockWidth","startblockXfromCenter","startblockLengthHalf","startingPositionX","_world","firstBlockHeight","thisBlockGroup","column","Column","thisPillar","thisWindowed","isRoof","push","Tile","TileType","Body","roof","pillar","windowed","tower","indexOf","addBuildingComponent","clearMapEdges","mirrorMap","setEdges","mapHalfLength","blockGroups","maxBlockIterations","blockAmountIterator","blockEdges","blockHeightsArray","heightsArray","blockIdIterator","blockHeightVariation","considerLowerEdges","pos","defined","colX","colY","colHeight","_edge","_tileStack","_defined","_x","_y","_height","groupNum","_blockGroup","_corner","tiles","./modifiers.component","./primitives.component","./tile.component","6","world","newBlockGroup","activeCol","isTower","tileType","nextHeight","getEdges","ceil","randomNum","randomEdgePoint","creationPoint","nextBlockWidth","nextBlockLength","yStartOffset","warn","7","8","tileW","tileL","tileH","bleed","dimensions","calculateStraightLinesFromIsometricSquare","regularColor","regularDarkerColor","changeColorLighting","regularLighterColor","shadowLight","shadowHighlight","shadow","highlight","almostDarkestColor","almostLightestColor","darkestColor","lightestColor","pointTop","pointLeft","pointBottom","pointRight","leftWallLeftTop","leftWallLeftBottom","leftWallRightBottom","leftWallRightTop","rightWallLeftTop","rightWallLeftBottom","rightWallRightBottom","rightWallRightTop","blockTopLeft","blockTopBottom","blockTopRight","blockTopTop","slopeDirection","blockRightBottom","blockRightRight","blockRightTop","blockLeftLeft","blockLeftBottom","blockLeftTop","blockBottomLeft","blockBottomRight","blockBottomTop","9","options","_options","_id","_h","_tileType","_tileColor","type","None","color"],"mappings":"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","file":"bundle.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()",null,"import { MapGenerationFunctions, Color } from './mapGenerationFunctions.component'\r\nimport { Map } from './mapper.component'\r\nimport { Tile, TileType } from './tile.component'\r\nimport { Config, Coords, TileTemplate, Position } from './config.component'\r\nimport { RenderElements } from './renderelements.component'\r\n\r\nexport class Renderer {\t\r\n\r\n\tprivate config: Config = new Config()\r\n\tprivate calculations: MapGenerationFunctions = new MapGenerationFunctions()\r\n\tprivate render: RenderElements = new RenderElements()\r\n\r\n\tconstructor() {\t}\r\n\r\n\tshowData(map: Map): string {\r\n\r\n\t\tlet html = '<div class=\"showData\">'\r\n\t\thtml += `map width: ${map.mapWidth} tiles<br>map length: ${map.mapLength} tiles<br>`\r\n\t\thtml += `tile width: ${this.config.tileWidth}<br>tile length: ${this.config.tileLength}<br>`\r\n\t\thtml += '</div>'\r\n\r\n\t\treturn html\r\n\t}\r\n\r\n\tbuild2DMap(map: Map): string {\r\n\r\n\t\tlet htmlMap = `<div class=\"map\" style=\"width:${this.config.getMapWidth(map.mapWidth+1)}px;\">`\r\n\r\n\t\thtmlMap += `<div class=\"tile axis\" style=\"width:${this.config.tileWidth}px;height:${this.config.tileLength}px;\"></div>`\r\n\r\n\t\tfor (let i = 0; i < map.mapWidth; i++) {\r\n\t\t\thtmlMap += `<div class=\"tile axis\" style=\"width:${this.config.tileWidth}px;height:${this.config.tileLength}px;\">${i}</div>`\r\n\t\t}\r\n\r\n\t\tfor (let y = 0; y < map.mapLength; y++) {\r\n\r\n\t\t\tlet halfWay = ''\r\n\r\n\t\t\tif (y === Math.round(map.mapLength / 2)) {\r\n\t\t\t\thalfWay = ' half'\r\n\t\t\t}\r\n\r\n\t\t\thtmlMap += `<div class=\"tile axis${halfWay}\" style=\"width:${this.config.tileWidth}px;height:${this.config.tileLength}px;\">${y}</div>`\r\n\r\n\t\t\tfor (let x = 0; x < map.mapWidth; x++) {\r\n\r\n\t\t\t\thtmlMap += `<div class=\"tile${halfWay}\" style=\"width:${this.config.tileWidth}px;height:${this.config.tileLength}px;`\r\n\r\n\t\t\t\tif (map.getColumn(x, y).isDefined) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet tile = map.getTopTile(x, y)\r\n\t\t\t\t\tlet tileTopColor = tile.getColor().rgb()\r\n\t\t\t\t\tlet tileColor = `rgb(${tileTopColor['r']}, ${tileTopColor['g']}, ${tileTopColor['b']})`\r\n\r\n\t\t\t\t\tlet edge = (map.map[y][x].edge.top || map.map[y][x].edge.right || map.map[y][x].edge.bottom || map.map[y][x].edge.left) ? true : false\r\n\r\n\t\t\t\t\thtmlMap += `background-color:${tileColor}\"><div class=\"tileInfo\">(${x}, ${y})<br>height: ${map.map[y][x].height}<br>edge: ${edge}</div></div>`\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\thtmlMap += `\"></div>`\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\thtmlMap += `</div>`\r\n\r\n\t\treturn htmlMap\r\n\t}\r\n\r\n\tbuildMap(mapToBuild: Map): string {\r\n\r\n\t\tlet mapTotalWidth = mapToBuild.mapWidth\r\n\t\tlet mapTotalLength = mapToBuild.mapLength\r\n\r\n\t\tlet testTile = this.render.createTile(0, 0)\r\n\r\n\t\tlet xDeviation = testTile.coords.bottom.x - testTile.coords.top.x\r\n\t\tlet yDeviation = testTile.coords.right.y - testTile.coords.left.y\r\n\t\tlet tileHalfWidthLeft = testTile.coords.top.x - testTile.coords.left.x\r\n\t\tlet tileHalfWidthRight = testTile.coords.right.x - testTile.coords.top.x\r\n\t\tlet mapWidthLeft = tileHalfWidthLeft * mapTotalLength\r\n\t\tlet mapWidthRight = tileHalfWidthRight * mapTotalWidth\r\n\t\tlet tileHalfLengthTop = testTile.coords.right.y\r\n\t\tlet tileHalfLengthBottom = testTile.coords.bottom.y - testTile.coords.right.y\r\n\t\tlet mapLengthTop = tileHalfLengthTop * mapTotalWidth\r\n\t\tlet mapLengthBottom = tileHalfLengthBottom * mapTotalLength\r\n\t\tlet mapWidthPx = Math.round((tileHalfWidthLeft + tileHalfWidthRight) * (mapTotalWidth ))\r\n\t\tlet mapLengthPx = Math.round(mapLengthTop + mapLengthBottom) + this.config.topMargin\r\n\r\n\t\tconst map = mapToBuild.map\r\n\r\n\t\tlet detailsHtml = ''\r\n\t\tlet html = '<svg width=\"'+mapWidthPx+'\" height=\"'+mapLengthPx+'\">'\r\n\r\n\t\tlet lastTile = null\r\n\t\tlet startTileX = tileHalfWidthLeft * (mapTotalWidth - 1)\r\n\r\n\t\tfor (let y = 0; y < mapTotalLength; y++) {\r\n\r\n\t\t\tfor (let x = 0; x < mapTotalWidth; x++) {\r\n\r\n\t\t\t\tlet thisPosY = 0\r\n\t\t\t\tlet thisPosX = 0\r\n\r\n\t\t\t\tif (x === 0 && y === 0) {\r\n\t\t\t\t\tthisPosX = startTileX\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (lastTile != null) {\r\n\t\t\t\t\tthisPosY = lastTile.coords.right.y\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (y > 0 && x === 0) {\r\n\t\t\t\t\tthisPosX = startTileX - (tileHalfWidthLeft * y)\r\n\t\t\t\t\tthisPosY = (tileHalfLengthTop * y) - (yDeviation * y)\r\n\t\t\t\t}\t\r\n\t\t\t\t\r\n\t\t\t\tif (x > 0) {\r\n\t\t\t\t\tthisPosX = (lastTile.coords.right.x - (lastTile.coords.right.x - lastTile.coords.bottom.x))\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet newTile = this.render.createTile(thisPosX, thisPosY)\r\n\t\t\t\tlet newData = ''\r\n\t\t\t\t\r\n\t\t\t\tif (map[y][x].isDefined) {\r\n\r\n\t\t\t\t\tfor (let h = 0; h < map[y][x].height; h++) {\r\n\t\t\t\t\t\tlet tile = this.render.createBlock(thisPosX, thisPosY- this.config.tileHeight, map[y][x].tileStack[h])\r\n\t\t\t\t\t\tnewData += tile.html\r\n\r\n\t\t\t\t\t\tif (this.config.allowDebug) {\r\n\t\t\t\t\t\t\tif (h === map[y][x].height - 1) {\r\n\t\t\t\t\t\t\t\tlet debugInfo = `<span>x: ${x}, y: ${y} <span class=\"debugLink showGroups\" data-group=\"${map[y][x].blockGroup}\">groupId: ${map[y][x].blockGroup}</span><br>id: ${map[y][x].tileStack[h].id}  h: ${h}</span>`\r\n\t\t\t\t\t\t\t\tdetailsHtml += `<div class=\"blockLabel\" data-groupId=\"${map[y][x].blockGroup}\" style=\"left: ${tile.coords.top.x}px; top: ${tile.coords.top.y - (this.config.tileHeight * h-1)}px;\"><div class=\"point\"></div>${debugInfo}</div>`\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} \r\n\r\n\t\t\t\thtml += newData\r\n\r\n\t\t\t\tlastTile = newTile\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\thtml += '</svg>'\r\n\r\n\t\t// document.querySelector('#debug').innerHTML = detailsHtml\r\n\r\n\t\treturn '<div id=\"debug\">' + detailsHtml + '</div>' + html\r\n\t}\r\n\r\n\taddSlopedEdges(map: any[], x: number, y: number, h: number, xPos: number, yPos: number) {\r\n\r\n\t\tlet tile = null\r\n\r\n\t\tif (map[y][x].edge.top && !map[y][x].corner && h === map[y][x].height-1) {\r\n\t\t\ttile = this.render.createSlopeBlock(xPos, yPos - this.config.tileHeight, map[y][x].getTile(h), 'n')\r\n\t\t} else if (map[y][x].edge.bottom && !map[y][x].corner && h === map[y][x].height-1) {\r\n\t\t\ttile = this.render.createSlopeBlock(xPos, yPos - this.config.tileHeight, map[y][x].getTile(h), 's')\r\n\t\t} else if (map[y][x].edge.right && !map[y][x].corner && h === map[y][x].height-1) {\r\n\t\t\ttile = this.render.createSlopeBlock(xPos, yPos - this.config.tileHeight, map[y][x].getTile(h), 'e')\r\n\t\t} else if (map[y][x].edge.left && !map[y][x].corner && h === map[y][x].height-1) {\r\n\t\t\ttile = this.render.createSlopeBlock(xPos, yPos - this.config.tileHeight, map[y][x].getTile(h), 'w')\r\n\t\t} else {\r\n\t\t\ttile = this.render.createBlock(xPos, yPos - this.config.tileHeight, map[y][x].getTile(h))\t\r\n\t\t}\r\n\r\n\t\tif (map[y][x].corner && h === map[y][x].height-1) {\r\n\t\t\tif (map[y][x].edge.top && map[y][x].edge.left) {\r\n\t\t\t\ttile = this.render.createSlopeBlock(xPos, yPos - this.config.tileHeight, map[y][x].getTile(h), 'nw')\r\n\t\t\t} else if (map[y][x].edge.top && map[y][x].edge.right) {\r\n\t\t\t\ttile = this.render.createSlopeBlock(xPos, yPos - this.config.tileHeight, map[y][x].getTile(h), 'ne')\r\n\t\t\t} else if (map[y][x].edge.bottom && map[y][x].edge.left) {\r\n\t\t\t\ttile = this.render.createSlopeBlock(xPos, yPos - this.config.tileHeight, map[y][x].getTile(h), 'sw')\r\n\t\t\t} else if (map[y][x].edge.bottom && map[y][x].edge.right) {\r\n\t\t\t\ttile = this.render.createSlopeBlock(xPos, yPos - this.config.tileHeight, map[y][x].getTile(h), 'se')\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn tile\r\n\t}\r\n}\r\n","import { Color } from './mapGenerationFunctions.component'\r\n\r\nexport class Config {\r\n\r\n\tprivate _allowDebug: boolean = true\r\n\tprivate _tileWidth: number = 20\r\n\tprivate _tileLength: number = 20\r\n\tprivate _tileHeight: number = 15\r\n\tprivate _tileSmallAngle: number = 85\r\n\tprivate _tileLargeAngle: number = 100\r\n\tprivate _groundColor: Color = new Color('f5f3e5')\r\n\tprivate _buildingBaseColor: Color = new Color(\r\n\t\t115 + Math.floor(Math.random() * 75),\r\n\t\t155 + Math.floor(Math.random() * 40),\r\n\t\t150 + Math.floor(Math.random() * 30)\r\n\t)\r\n\tprivate _tileEdgeBleed: number = 0.3\r\n\tprivate _maxAllowedHeight: number = 12\r\n\tprivate _topMargin: number = 80\r\n\r\n\tpublic get allowDebug(): boolean {\r\n\t\treturn this._allowDebug\r\n\t}\r\n\r\n\tpublic get tileWidth(): number {\r\n\t\treturn this._tileWidth\r\n\t}\r\n\r\n\tpublic get tileLength(): number {\r\n\t\treturn this._tileLength\r\n\t}\r\n\r\n\tpublic get tileHeight(): number {\r\n\t\treturn this._tileHeight\r\n\t}\r\n\r\n\tpublic get tileSmallAngle(): number {\r\n\t\treturn this._tileSmallAngle\r\n\t}\r\n\r\n\tpublic get tileLargeAngle(): number {\r\n\t\treturn this._tileLargeAngle\r\n\t}\r\n\r\n\tpublic get groundColor(): Color {\r\n\t\treturn this._groundColor\r\n\t}\r\n\r\n\tpublic get buildingBaseColor(): Color {\r\n\t\treturn this._buildingBaseColor\r\n\t}\r\n\r\n\tpublic get tileEdgeBleed(): number {\r\n\t\treturn this._tileEdgeBleed\r\n\t}\r\n\r\n\tpublic get maxAllowedHeight(): number {\r\n\t\treturn this._maxAllowedHeight\r\n\t}\r\n\r\n\tpublic get topMargin(): number {\r\n\t\treturn this._topMargin\r\n\t}\r\n\r\n\tpublic getMapWidth(mapArrayWidth: number): number {\r\n\t\treturn mapArrayWidth * this._tileWidth\r\n\t}\r\n\r\n\tpublic getMapLength(mapArrayLength: number): number {\r\n\t\treturn mapArrayLength * this._tileLength\r\n\t}\r\n}\r\n\r\nexport interface Coords {\r\n\ttop?: Position,\r\n\tleft?: Position,\r\n\tbottom?: Position,\r\n\tright?: Position\r\n}\r\n\r\nexport interface TileTemplate {\r\n\thtml?: string,\r\n\tcoords?: Coords\r\n}\r\n\r\nexport interface Position {\r\n\tx?: number,\r\n\ty?: number\r\n}\r\n","import { Map } from './mapper.component'\r\nimport { Renderer } from './builder.component'\r\nimport { Color } from './mapGenerationFunctions.component'\r\nimport { Config } from './config.component'\r\n\r\nclass RandomBuilding {\r\n\r\n\tprivate _map: Map\r\n\tprivate _builder: Renderer = new Renderer\r\n\tprivate config: Config = new Config\r\n\r\n\tconstructor() {\r\n\t\tthis._map = new Map(30, 30, 10, 1, 6, 3, 4, false)\r\n\t\tdocument.querySelector('body').style.background = this.config.groundColor.hex()\r\n\t}\r\n\r\n\tpublic debug(): boolean {\r\n\t\treturn this.config.allowDebug\r\n\t}\r\n\r\n\tget map() {\r\n\t\treturn this._map\r\n\t}\r\n\r\n\tpublic colorMap(): string {\r\n\t\treturn this._builder.build2DMap(this._map)\r\n\t}\r\n\r\n\tpublic addToBuildingAndRedraw(): string {\r\n\t\tthis._map.addToBuilding()\r\n\t\treturn this._builder.build2DMap(this._map)\r\n\t}\r\n\r\n\tpublic drawTileMap(): string {\r\n\t\treturn this._builder.buildMap(this._map)\r\n\t}\r\n}\r\n\r\nlet building = new RandomBuilding()\r\ndocument.querySelector('#color').innerHTML = building.colorMap()\r\ndocument.querySelector(\"#worldtest\").innerHTML = building.drawTileMap()\r\n\r\ndocument.querySelector('#generate').addEventListener('click', () => {\r\n\tbuilding = new RandomBuilding()\r\n\tdocument.querySelector('#color').innerHTML = building.colorMap()\r\n\tdocument.querySelector(\"#worldtest\").innerHTML = building.drawTileMap()\r\n\tdocument.querySelector('#debugActive').classList.remove('active')\r\n\r\n\tdocument.querySelectorAll('.point').forEach((item) => {\r\n\t\titem.addEventListener('click', () => {\r\n\t\t\tconsole.log('toggled', item)\r\n\t\t\titem.parentElement.classList.toggle('active')\r\n\t\t})\t\t\r\n\t})\r\n})\r\n\r\ndocument.querySelector('#redraw').addEventListener('click', () => {\r\n\tbuilding.addToBuildingAndRedraw()\r\n\tdocument.querySelector('#color').innerHTML = building.colorMap()\r\n\tdocument.querySelector(\"#worldtest\").innerHTML = building.drawTileMap()\r\n\tdocument.querySelector('#debugActive').classList.remove('active')\r\n\r\n\tdocument.querySelectorAll('.blockLabel').forEach((item) => {\r\n\t\titem.addEventListener('click', () => {\r\n\t\t\titem.classList.toggle('active')\r\n\t\t})\r\n\t})\r\n})\r\n\r\ndocument.querySelector('#debugActive').addEventListener('click', () => {\r\n\tdocument.querySelector('#debug').classList.toggle('show')\r\n\tdocument.querySelector('#debugActive').classList.toggle('active')\r\n})\r\n\r\ndocument.querySelectorAll('.blockLabel').forEach((item) => {\r\n\titem.addEventListener('click', () => {\r\n\t\titem.classList.toggle('active')\r\n\t})\r\n})\r\n\r\n/*\r\nconst color = new Color(150, 225, 116);\r\n\r\nconst colorDivs = `\r\n\t<div class=\"color__tile\" style=\"background-color: rgb(${color.getShadowsRGB().r},${color.getShadowsRGB().g},${color.getShadowsRGB().b})\"></div>\r\n\t<div class=\"color__tile\" style=\"background-color: rgb(${color.rgb().r},${color.rgb().g},${color.rgb().b})\"></div>\r\n\t<div class=\"color__tile\" style=\"background-color: rgb(${color.getHighlightsRGB().r},${color.getHighlightsRGB().g},${color.getHighlightsRGB().b})\"></div>`\r\n\r\ndocument.querySelector('#color').innerHTML = colorDivs */\r\n\r\n/*\r\ndocument.querySelector('#generate').addEventListener('click', () => {\r\n\tconst building2 = new RandomBuilding();\r\n\tdocument.querySelector(\"#world\").innerHTML = building2.drawTileMap()\r\n\tdocument.querySelector('#debugActive').classList.remove('active')\r\n\r\n\tdocument.querySelectorAll('.point').forEach((item) => {\r\n\t\titem.addEventListener('click', () => {\r\n\t\t\tconsole.log('toggled', item)\r\n\t\t\titem.parentElement.classList.toggle('active')\r\n\t\t})\t\t\r\n\t})\r\n})\r\n\r\ndocument.querySelector('#debugActive').addEventListener('click', () => {\r\n\tdocument.querySelector('#debug').classList.toggle('show')\r\n\tdocument.querySelector('#debugActive').classList.toggle('active')\r\n})\r\n\r\nconst building = new RandomBuilding();\r\ndocument.querySelector(\"#world\").innerHTML = building.drawTileMap()\r\n\r\ndocument.querySelectorAll('.blockLabel').forEach((item) => {\r\n\titem.addEventListener('click', () => {\r\n\t\titem.classList.toggle('active')\r\n\t})\r\n})\r\n\r\ndocument.querySelectorAll('.showGroups').forEach((item) => {\r\n\titem.addEventListener('click', e => {\r\n\t\te.stopPropagation()\r\n\t\tlet group = item.getAttribute('data-group')\r\n\t\tlet groups = document.querySelectorAll('.blockLabel[data-groupid=\"'+group+'\"]')\r\n\t\tgroups.forEach(point => {\r\n\t\t\tpoint.addEventListener('click', () => {\r\n\t\t\t\titem.classList.toggle('group__marker')\r\n\t\t\t})\r\n\t\t})\r\n\r\n\t})\r\n})\r\n\r\nif (!building.debug()) {\r\n\tdocument.querySelector('#debugActive').classList.add('hide')\r\n}\r\n*/\r\n\r\n","import { Config } from './config.component'\r\n\r\nexport class MapGenerationFunctions {\r\n\r\n\tprivate config: Config = new Config();\r\n\tsmallAngle = this.config.tileSmallAngle;\r\n\tlargeAngle = this.config.tileLargeAngle;\r\n\r\n\tconstructor() { }\r\n\r\n\tpublic calculateAdditionalBlockIterations(maximumBlockIterations: number) {\r\n\t\treturn 2 + Math.floor(Math.random() * maximumBlockIterations);\r\n\t}\r\n\r\n\t// calculate the dimensions to draw the isometric perspective tile with the parameters as if it were a straight square tile\r\n\tpublic calculateStraightLinesFromIsometricSquare (blockWidth: number, blockHeight: number) {\r\n\t\t// lengths this function returns when it comes to positions of longest and shortest sides as array\r\n\t\t/*           [0]\r\n\t\t *   _________________ \r\n\t\t *   |    [3]  |      |\r\n\t\t *   | [5]            |\r\n\t\t *   |               -|\r\n\t\t *   |-               | [1]\r\n\t\t *   | [4]            |\r\n\t\t *   |    [2]         |\r\n\t\t *   |_______|________|\r\n\t\t */  \r\n\r\n\t\tlet smallOuterAngle = (180 - this.smallAngle) / 2;\r\n\t\tlet largeOuterAngle = (180 - this.largeAngle) / 2;\r\n\r\n\t\tlet horizontalWidthFromBottom = this.getHorizontalBottomShortestWidth(blockWidth, smallOuterAngle);\r\n\t\tlet verticalHeightFromBottom = this.getVerticalBottomShortestHeight(horizontalWidthFromBottom, smallOuterAngle);\r\n\r\n\t\tlet horizontalWidthFromTop = this.getHorizontalTopLongestWidth(blockHeight, largeOuterAngle);\r\n\t\tlet verticalHeightFromTop = this.getVerticalTopLongestHeight(horizontalWidthFromTop, largeOuterAngle);\r\n\r\n\t\tlet totalHeight = verticalHeightFromBottom + verticalHeightFromTop;\r\n\t\tlet totalWidth = horizontalWidthFromBottom + horizontalWidthFromTop;\r\n\r\n\t\treturn {\t'totalWidth': totalWidth, // 0\r\n\t\t\t\t\t'totalHeight': totalHeight,  // 1\r\n\t\t\t\t\t'horizontalWidthFromBottom': horizontalWidthFromBottom,  // 2\r\n\t\t\t\t\t'horizontalWidthFromTop': horizontalWidthFromTop,  // 3\r\n\t\t\t\t\t'verticalHeightFromBottom': verticalHeightFromBottom,  // 4\r\n\t\t\t\t\t'verticalHeightFromTop': verticalHeightFromTop } // 5\r\n\t}\r\n\r\n\t// calculate the amount of pixels from the bottom left side of a straight square to the point at the bottom \r\n\t// .. where the tip of the tile meets the border of the square\r\n\tpublic getHorizontalBottomShortestWidth (diagonalWidth: number, smallAngle: number): number {\r\n\t\treturn diagonalWidth * Math.sin(this.toRadians(smallAngle));\r\n\t}\r\n\r\n\tpublic getVerticalBottomShortestHeight (diagonalHeight: number, smallAngle: number): number {\r\n\t\treturn diagonalHeight * Math.cos(this.toRadians(smallAngle));\r\n\t}\r\n\r\n\tpublic getHorizontalTopLongestWidth (diagonalWidth: number, largeAngle: number): number {\r\n\t\treturn diagonalWidth * Math.sin(this.toRadians(largeAngle));\r\n\t}\r\n\r\n\tpublic getVerticalTopLongestHeight (diagonalHeight: number, largeAngle: number): number {\r\n\t\treturn diagonalHeight * Math.cos(this.toRadians(largeAngle));\r\n\t}\r\n\r\n\ttoRadians (angle: number): number {\r\n\t\treturn angle * (Math.PI / 180);\r\n\t}\r\n}\r\n\r\nexport enum TileColor {\r\n\tRed = 125 + Math.floor(Math.random() * 75),\r\n\tGreen = 170 + Math.floor(Math.random() * 40),\r\n\tBlue = 180 + Math.floor(Math.random() * 30)\r\n}\r\n\r\nexport enum BuildingHeightVariations {\r\n\tTallCenter = 'tallCenter',\r\n\tTallSurrounds = 'tallSurrounds',\r\n\tRandom = 'random'\r\n}\r\n\r\nexport class Color {\r\n\tprivate _colorRgb: RGB\r\n\tprivate _colorHex: string\r\n\r\n\tconstructor(...params: any[]) {\r\n\t\tlet error = null\r\n\t\tif (params.length === 1) {\r\n\t\t\tif (typeof params[0] === 'string') {\r\n\t\t\t\tif (this.validateHex(params[0])) {\r\n\t\t\t\t\tlet hexColor = params[0]\r\n\t\t\t\t\tif (hexColor.charAt(0) !== '#') {\r\n\t\t\t\t\t\thexColor = `#${hexColor}`\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.setHex(hexColor)\r\n\t\t\t\t\tthis.hexToRgb()\r\n\t\t\t\t} else {\r\n\t\t\t\t\terror = \"Hexadecimal color is incorrect\"\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\terror = \"Length of 1 in parameters is not equal to string\"\r\n\t\t\t}\r\n\t\t} else if (params.length === 3) {\r\n\t\t\tif (this.validateRgb(params)) {\r\n\t\t\t\tthis.setRgb(params[0], params[1], params[2])\r\n\t\t\t\tthis.rgbToHex()\r\n\t\t\t} else {\r\n\t\t\t\terror = \"Values of RGB exceed limits\"\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (error !== null) {\r\n\t\t\tthrow \"Color type is incorrect. \" + error + \": \" + params.toString()\r\n\t\t}\r\n\t}\r\n\r\n\tpublic setRgb(r: number, g: number, b: number) {\r\n\t\tthis._colorRgb = {r: r, g: g, b: b} as RGB\r\n\t}\r\n\r\n\tpublic setHex(hexadecimal: string) {\r\n\t\tif (hexadecimal.length < 7) {\r\n\t\t\tlet hexVal1 = hexadecimal.charAt(1)\r\n\t\t\tlet hexVal2 = hexadecimal.charAt(2)\r\n\t\t\tlet hexVal3 = hexadecimal.charAt(3)\r\n\t\t\thexadecimal = \"#\" + hexVal1 + hexVal1 + hexVal2 + hexVal2 + hexVal3 + hexVal3\r\n\t\t}\r\n\t\tthis._colorHex = hexadecimal\r\n\t}\r\n\r\n\tpublic rgb(): RGB {\r\n\t\treturn this._colorRgb\r\n\t}\r\n\r\n\tpublic hex(): string {\r\n\t\treturn this._colorHex\r\n\t}\r\n\r\n\tvalidateRgb(rgb: number[]): boolean {\r\n\t\tif (rgb[0] > -1 && rgb[0] < 256 &&\r\n\t\t\trgb[1] > -1 && rgb[1] < 256 &&\r\n\t\t\trgb[2] > -1 && rgb[2] < 256) {\r\n\t\t\treturn true\r\n\t\t} else {\r\n\t\t\treturn false\r\n\t\t}\r\n\t}\r\n\r\n\tvalidateHex(hex: string): boolean {\r\n\t\tlet regex = /^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/\r\n\t\tif (hex.match(regex)) {\r\n\t\t\treturn true\r\n\t\t} else {\r\n\t\t\treturn false\r\n\t\t}\r\n\t}\r\n\r\n\thexToRgb() {\r\n\t\tlet hexValues: string[] = this._colorHex.substr(1).split('')\r\n\t\tlet hexPair1 = parseInt(hexValues[0]+hexValues[1], 16)\r\n\t\tlet hexPair2 = parseInt(hexValues[2]+hexValues[3], 16)\r\n\t\tlet hexPair3 = parseInt(hexValues[4]+hexValues[5], 16)\r\n\t\tthis.setRgb(hexPair1, hexPair2, hexPair3)\r\n\t\tthis.rgbToHex()\r\n\t}\r\n\r\n\trgbToHex() {\r\n\t\tif (typeof this._colorRgb === 'object') {\r\n\t\t\tlet r = this._colorRgb.r\r\n\t\t\tlet b = this._colorRgb.b\r\n\t\t\tlet g = this._colorRgb.g\r\n\t\t\tlet hexR = Number(r).toString(16)\r\n\t\t\tlet hexG = Number(g).toString(16)\r\n\t\t\tlet hexB = Number(b).toString(16)\r\n\t\t\tthis._colorHex = \"#\" + hexR + hexG + hexB\r\n\t\t}\r\n\t}\r\n\r\n\tpublic changeColorLighting(amount: number, encoding: string): string {\r\n\t\tlet r = this._colorRgb.r\r\n\t\tlet b = this._colorRgb.b\r\n\t\tlet g = this._colorRgb.g\r\n\t\tlet newR = r + amount\r\n\t\tlet newG = g + amount\r\n\t\tlet newB = b + (amount - 8)\r\n\t\tif (newR > 255) newR = 255\r\n\t\tif (newG > 255) newG = 255\r\n\t\tif (newR > 255) newR = 255\r\n\r\n\t\tlet hexR = Number(newR).toString(16)\r\n\t\tlet hexG = Number(newG).toString(16)\r\n\t\tlet hexB = Number(newB).toString(16)\r\n\t\tlet result = \"#\" + hexR + hexG + hexB\r\n\r\n\t\treturn result\r\n\t}\r\n\r\n\tpublic getLightestRGB(): RGB {\r\n\t\tlet r = this._colorRgb.r\r\n\t\tlet b = this._colorRgb.b\r\n\t\tlet g = this._colorRgb.g\r\n\t\tlet newR = r + 55\r\n\t\tlet newG = g + 55\r\n\t\tlet newB = b + 40\r\n\t\tif (newR > 255) newR = 255\r\n\t\tif (newG > 255) newG = 255\r\n\t\tif (newR > 255) newR = 255\r\n\t\treturn {r: newR, g: newG, b: newB}\r\n\t}\r\n\r\n\tpublic getHighlightsRGB(): RGB {\r\n\t\tlet r = this._colorRgb.r\r\n\t\tlet b = this._colorRgb.b\r\n\t\tlet g = this._colorRgb.g\r\n\t\tlet newR = r + 45\r\n\t\tlet newG = g + 45\r\n\t\tlet newB = b + 30\r\n\t\tif (newR > 255) newR = 255\r\n\t\tif (newG > 255) newG = 255\r\n\t\tif (newR > 255) newR = 255\r\n\t\treturn {r: newR, g: newG, b: newB}\r\n\t}\r\n\r\n\tpublic getDarkerRegularRGB(): RGB {\r\n\t\tlet r = this._colorRgb.r\r\n\t\tlet b = this._colorRgb.b\r\n\t\tlet g = this._colorRgb.g\r\n\t\tlet newR = r + 15\r\n\t\tlet newG = g + 15\r\n\t\tlet newB = b + 5\r\n\t\tif (newR > 255) newR = 255\r\n\t\tif (newG > 255) newG = 255\r\n\t\tif (newR > 255) newR = 255\r\n\t\treturn {r: newR, g: newG, b: newB}\r\n\t}\r\n\r\n\tpublic getHalflightsRGB(): RGB {\r\n\t\tlet r = this._colorRgb.r\r\n\t\tlet b = this._colorRgb.b\r\n\t\tlet g = this._colorRgb.g\r\n\t\tlet newR = r + 25\r\n\t\tlet newG = g + 25\r\n\t\tlet newB = b + 15\r\n\t\tif (newR > 255) newR = 255\r\n\t\tif (newG > 255) newG = 255\r\n\t\tif (newR > 255) newR = 255\r\n\t\treturn {r: newR, g: newG, b: newB}\r\n\t}\r\n\r\n\tpublic getShadowsRGB(): RGB {\r\n\t\tlet r = this._colorRgb.r\r\n\t\tlet b = this._colorRgb.b\r\n\t\tlet g = this._colorRgb.g\r\n\t\tlet newR = r - 55\r\n\t\tlet newG = g - 55\r\n\t\tlet newB = b - 35\r\n\t\tif (newR < 0) newR = 0\r\n\t\tif (newG < 0) newG = 0\r\n\t\tif (newR < 0) newR = 0\r\n\t\treturn {r: newR, g: newG, b: newB}\r\n\t}\r\n\r\n\tpublic getDarkestRGB(): RGB {\r\n\t\tlet r = this._colorRgb.r\r\n\t\tlet b = this._colorRgb.b\r\n\t\tlet g = this._colorRgb.g\r\n\t\tlet newR = r - 70\r\n\t\tlet newG = g - 70\r\n\t\tlet newB = b - 60\r\n\t\tif (newR < 0) newR = 0\r\n\t\tif (newG < 0) newG = 0\r\n\t\tif (newR < 0) newR = 0\r\n\t\treturn {r: newR, g: newG, b: newB}\r\n\t}\r\n}\r\n\r\nexport interface RGB {\r\n\tr: number,\r\n\tg: number,\r\n\tb: number\r\n}\r\n","import { MapGenerationFunctions, BuildingHeightVariations, Color } from './mapGenerationFunctions.component'\r\nimport { Tile, TileType } from './tile.component'\r\nimport { Config, Position } from './config.component'\r\nimport { Primitives } from './primitives.component'\r\nimport { Modifiers } from './modifiers.component'\r\n\r\nexport class Map {\r\n\r\n\tprivate mapGen: MapGenerationFunctions = new MapGenerationFunctions()\r\n\tprivate config: Config = new Config()\r\n\tprivate primitives: Primitives = new Primitives()\r\n\tprivate mods: Modifiers = new Modifiers()\r\n\r\n\tprivate _mapWidth: number\r\n\tprivate _mapLength: number\r\n\tprivate _mapMaxHeight: number\r\n\tprivate _averageBuildingSize: number\r\n\tprivate _blockHeight: number\r\n\tprivate _maximumBlockIterations: number\r\n\tprivate _additionalBlockIterations: number\r\n\tprivate _mapEdgeWidth: number\r\n\tprivate _highestPoint: number\r\n\tprivate _startBlockXfromCenterDeviation: number\r\n\tprivate _mapHalfLength: number\r\n\tprivate _world: any[][]\r\n\tprivate _blockHeightsArray: number[]\r\n\tprivate _blockGroups: number[]\r\n\tprivate _blockEdges: Position[]\t\r\n\tprivate _blockHeightVariationLabels = [BuildingHeightVariations.TallCenter, BuildingHeightVariations.TallSurrounds, BuildingHeightVariations.Random]\r\n\tprivate _blockHeightVariation = this._blockHeightVariationLabels[Math.floor(Math.random() * 3)]\r\n\tprivate _blockIdIterator: number\r\n\tprivate _blockHeightIterator: number\r\n\tprivate _blockAmountIterator: number\r\n\r\n\tconstructor(\t\r\n\t\t\tmapWidth: number, \r\n\t\t\tmapLength: number, \r\n\t\t\tmapMaxHeight: number, \r\n\t\t\tmapEdgeWidth: number,\r\n\t\t\taverageBuildingSize: number,\r\n\t\t\tblockHeight: number,\r\n\t\t\tmaximumBlockIterations: number,\r\n\t\t\tpyramid: boolean)\r\n\t{\r\n\t\tthis._mapWidth = mapWidth\r\n\t\tthis._mapLength = mapLength\r\n\t\tthis._mapMaxHeight = mapMaxHeight\r\n\t\tthis._mapEdgeWidth = mapEdgeWidth\r\n\t\tthis._averageBuildingSize = averageBuildingSize\r\n\t\tthis._blockHeight = blockHeight\r\n\t\tthis._maximumBlockIterations = maximumBlockIterations\r\n\t\tthis._additionalBlockIterations = this.mapGen.calculateAdditionalBlockIterations(maximumBlockIterations)\r\n\t\tthis._blockGroups = []\r\n\t\tthis._blockEdges = []\r\n\t\tthis._blockHeightsArray = []\r\n\t\tthis._mapHalfLength = Math.floor(mapLength / 2)\r\n\t\tthis._blockIdIterator = 0\r\n\t\tthis._blockAmountIterator = 1\r\n\t\tthis._blockHeightIterator = 1\r\n\r\n\t\tlet mapLengthHalf = Math.floor(mapLength / 2) \r\n\t\tlet mapWidthHalf = Math.floor(mapWidth / 2)\r\n\t\tlet startBlockXfromCenterDeviation = 7\r\n\t\tlet startblockLength = (this._averageBuildingSize + 1) + Math.floor(Math.random() * 4)\r\n\t\tlet startblockWidth = this._averageBuildingSize + Math.floor(Math.random() * 3)\r\n\t\tlet startblockXfromCenter = 4 + Math.floor(Math.random() * startBlockXfromCenterDeviation)\r\n\t\tlet startblockLengthHalf = Math.floor(startblockLength / 2)\r\n\t\tlet startblockWidthHalf = Math.floor(startblockWidth / 2)\r\n\t\tlet startingPositionX = Math.floor(this._mapWidth / 2) - Math.floor(startblockXfromCenter / 2)\r\n\r\n\t\tthis._world = []\r\n\t\tlet tileHeight = 0\r\n\t\tlet firstBlockHeight\r\n\r\n\t\tif (this._blockHeightVariation === BuildingHeightVariations.TallCenter) {\r\n\t\t\tfirstBlockHeight = this._blockHeight * 3\r\n\t\t} else if (this._blockHeightVariation === BuildingHeightVariations.TallSurrounds) {\r\n\t\t\tfirstBlockHeight = 3 + Math.round(Math.random())\r\n\t\t\tthis._blockHeight = firstBlockHeight\r\n\t\t} else {\r\n\t\t\tfirstBlockHeight = this._blockHeight + Math.round(Math.random() * 4)\r\n\t\t}\r\n\r\n\t\tthis._blockHeight = firstBlockHeight\r\n\r\n\t\tfor (let y = 0; y < this.mapLength; y++) {\r\n\r\n\t\t\tthis._world[y] = []\r\n\r\n\t\t\tfor (let x = 0; x < this.mapWidth; x++) {\r\n\r\n\t\t\t\tlet thisBlockGroup = 0\r\n\r\n\t\t\t\tlet column = new Column(false, x, y, 0)\r\n\r\n\t\t\t\tif (y >= mapLengthHalf && y <= (mapLengthHalf + startblockLengthHalf) ) {\r\n\r\n\t\t\t\t\tif (x > startingPositionX && x <= (startingPositionX + startblockWidth) ) {\r\n\r\n\t\t\t\t\t\tthisBlockGroup = 1\r\n\t\t\t\t\t\tlet tileStack = []\r\n\r\n\t\t\t\t\t\tfor (let h = 0; h < firstBlockHeight; h++) {\r\n\r\n\t\t\t\t\t\t\tlet thisPillar = 0\r\n\t\t\t\t\t\t\tlet thisWindowed = 0\r\n\t\t\t\t\t\t\tlet isRoof = (h === firstBlockHeight-1) ? true : false\r\n\r\n\t\t\t\t\t\t\ttileStack.push(\r\n\t\t\t\t\t\t\t\tnew Tile(\r\n\t\t\t\t\t\t\t\t\tthis._blockIdIterator, \r\n\t\t\t\t\t\t\t\t\tx, \r\n\t\t\t\t\t\t\t\t\ty, \r\n\t\t\t\t\t\t\t\t\th, \r\n\t\t\t\t\t\t\t\t\tTileType.Body,\r\n\t\t\t\t\t\t\t\t\tthis.config.buildingBaseColor,\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t'roof':\t\t\tisRoof,\r\n\t\t\t\t\t\t\t\t\t\t'pillar': \t\tthisPillar,\r\n\t\t\t\t\t\t\t\t\t\t'windowed': \tthisWindowed,\r\n\t\t\t\t\t\t\t\t\t\t'tower': \t\tfalse\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t)\r\n\r\n\t\t\t\t\t\t\tif (this._blockGroups.indexOf(thisBlockGroup) === -1) {\r\n\t\t\t\t\t\t\t\tthis._blockGroups.push(thisBlockGroup)\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tthis._blockHeightsArray.push(firstBlockHeight)\r\n\r\n\t\t\t\t\t\t\tthis._blockIdIterator++\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tcolumn = new Column(true, x, y, firstBlockHeight)\r\n\r\n\t\t\t\t\t\tcolumn.blockGroup = thisBlockGroup\r\n\t\t\t\t\t\tcolumn.height = firstBlockHeight\r\n\t\t\t\t\t\tcolumn.corner = false\r\n\t\t\t\t\t\tcolumn.tileStack = tileStack\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._world[y][x] = column\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (let i = 0; i < this._additionalBlockIterations; i++) {\r\n\t\t\tthis._world = this.mods.addBuildingComponent(this)\r\n\t\t}\r\n\t\t\r\n\t\tthis._world = this.mods.clearMapEdges(this)\r\n\t\tthis._world = this.mods.mirrorMap(this)\r\n\t\tthis.setEdges(false)\r\n\t}\r\n\r\n\tget mapWidth(): number {\r\n\t\treturn this._mapWidth\r\n\t}\r\n\r\n\tget mapLength(): number {\r\n\t\treturn this._mapLength\r\n\t}\r\n\r\n\tget mapHalfLength(): number {\r\n\t\treturn this._mapHalfLength\r\n\t}\r\n\r\n\tget mapEdgeWidth(): number {\r\n\t\treturn this._mapEdgeWidth\r\n\t}\r\n\r\n\tget map(): any[] {\r\n\t\treturn this._world\r\n\t}\r\n\r\n\tget blockGroups(): number[] {\r\n\t\treturn this._blockGroups\r\n\t}\r\n\r\n\tset blockGroups(blockGroups: number[]) {\r\n\t\tthis._blockGroups = blockGroups\r\n\t}\r\n\r\n\tget blockHeight(): number {\r\n\t\treturn this._blockHeight\r\n\t}\r\n\r\n\tget mapMaxHeight(): number {\r\n\t\treturn this._mapMaxHeight\r\n\t}\r\n\r\n\tset blockHeight(height: number) {\r\n\t\tthis._blockHeight = height\r\n\t}\r\n\r\n\tget maxBlockIterations(): number {\r\n\t\treturn this._maximumBlockIterations\r\n\t}\r\n\r\n\tget blockAmountIterator(): number {\r\n\t\treturn this._blockAmountIterator\r\n\t}\r\n\r\n\tset blockAmountIterator(i: number) {\r\n\t\tthis._blockAmountIterator = i\r\n\t}\r\n\r\n\tget averageBuildingSize(): number {\r\n\t\treturn this._averageBuildingSize\r\n\t}\r\n\r\n\tget blockEdges(): object[] {\r\n\t\treturn this._blockEdges\r\n\t}\r\n\r\n\tset blockEdges(blockEdges: object[]) {\r\n\t\tthis._blockEdges = blockEdges\r\n\t}\r\n\r\n\tget blockHeightsArray(): number[] {\r\n\t\treturn this._blockHeightsArray\r\n\t}\r\n\r\n\tset blockHeightsArray(heightsArray: number[]) {\r\n\t\tthis._blockHeightsArray = heightsArray\r\n\t}\r\n\r\n\tget blockIdIterator(): number {\r\n\t\treturn this._blockIdIterator\r\n\t}\r\n\r\n\tset blockIdIterator(i: number) {\r\n\t\tthis._blockIdIterator = i\r\n\t}\r\n\r\n\tget blockHeightVariation(): BuildingHeightVariations {\r\n\t\treturn this._blockHeightVariation\r\n\t}\r\n\r\n\tpublic getColumn(x, y): Column {\r\n\t\treturn this._world[y][x]\r\n\t}\r\n\r\n\tpublic getTiles(x, y): Tile[] {\r\n\t\treturn this._world[y][x].tileStack\r\n\t}\r\n\r\n\tpublic getTile(x, y, h): Tile {\r\n\t\treturn this._world[y][x].getTile(h)\r\n\t}\r\n\r\n\tpublic getTopTile(x, y): Tile {\r\n\t\tlet height = this._world[y][x].height\r\n\t\treturn this._world[y][x].getTile(height-1)\r\n\t}\r\n\r\n\tpublic addToBuilding(): void {\r\n\t\tthis._world = this.mods.addBuildingComponent(this)\r\n\t\tthis._world = this.mods.mirrorMap(this)\r\n\t\tthis._world = this.mods.clearMapEdges(this)\r\n\t\tthis.setEdges(false)\t\t\r\n\t}\r\n\r\n\tsetEdges(considerLowerEdges: boolean): void {\r\n\r\n\t\tfor (let y = 0; y < this.mapLength; y++) {\r\n\t\t\tfor (let x = 0; x < this.mapWidth; x++) {\r\n\t\t\t\t\r\n\t\t\t\tif (y > 0 && x > 0 && y < this.mapLength - 1 && x < this.mapWidth - 1 && this._world[y][x].isDefined) {\r\n\r\n\t\t\t\t\tif (considerLowerEdges) {\r\n\r\n\t\t\t\t\t\tif (this._world[y-1][x].height < this._world[y][x].height || y === 0) {\r\n\t\t\t\t\t\t\tthis._world[y][x].edge.top = true\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (this._world[y+1][x].height < this._world[y][x].height || y === this.mapLength - 1) {\r\n\t\t\t\t\t\t\tthis._world[y][x].edge.bottom = true\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (this._world[y][x-1].height < this._world[y][x].height) {\r\n\t\t\t\t\t\t\tthis._world[y][x].edge.left = true\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (this._world[y][x+1].height < this._world[y][x].height) {\r\n\t\t\t\t\t\t\tthis._world[y][x].edge.right = true\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tif (!this._world[y-1][x].isDefined || y === 0) {\r\n\t\t\t\t\t\t\tthis._world[y][x].edge.top = true\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (!this._world[y+1][x].isDefined || y === this.mapLength - 1) {\r\n\t\t\t\t\t\t\tthis._world[y][x].edge.bottom = true\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (!this._world[y][x-1].isDefined) {\r\n\t\t\t\t\t\t\tthis._world[y][x].edge.left = true\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (!this._world[y][x+1].isDefined) {\r\n\t\t\t\t\t\t\tthis._world[y][x].edge.right = true\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( (this._world[y][x].edge['top'] && this._world[y][x].edge['right']) ||\r\n\t\t\t\t\t\t (this._world[y][x].edge['top'] && this._world[y][x].edge['left']) ||\r\n\t\t\t\t\t\t (this._world[y][x].edge['bottom'] && this._world[y][x].edge['right']) ||\r\n\t\t\t\t\t\t (this._world[y][x].edge['bottom'] && this._world[y][x].edge['left']) ) {\r\n\t\t\t\t\t\tthis._world[y][x].corner = true\r\n\t\t\t\t\t}\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic getEdges(): Position[] {\r\n\r\n\t\tthis._blockEdges = []\r\n\r\n\t\tfor (let y = 0; y < this._mapLength; y++) {\r\n\t\t\t// only check second half of map\r\n\r\n\t\t\tif (y > this._mapHalfLength + 1 + this._blockAmountIterator && y < this._mapLength - 2) {\r\n\r\n\t\t\t\tfor (let x = 0; x < this._mapWidth; x++) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (x > this._mapEdgeWidth && x < this._mapWidth - 1) {\r\n\r\n\t\t\t\t\t\tif (this._world[y][x].isDefined) {\r\n\r\n\t\t\t\t\t\t\tif (!this._world[y][x+1].isDefined || \r\n\t\t\t\t\t\t\t\t!this._world[y][x-1].isDefined || \r\n\t\t\t\t\t\t\t\t!this._world[y+1][x].isDefined || \r\n\t\t\t\t\t\t\t\t!this._world[y-1][x+1].isDefined || \r\n\t\t\t\t\t\t\t\t!this._world[y-1][x-1].isDefined) {\r\n\r\n\t\t\t\t\t\t\t\tlet pos: Position = {x: x, y: y}\r\n\r\n\t\t\t\t\t\t\t\tthis._blockEdges.push(pos)\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this._blockEdges\r\n\t}\t\r\n}\r\n\r\nexport class Column {\r\n\r\n\tprivate _defined: boolean\r\n\tprivate _x: number\r\n\tprivate _y: number\r\n\tprivate _height: number\r\n\tprivate _blockGroup: number\r\n\tprivate _corner: boolean\r\n\tprivate _edge: object = { 'top': false, 'right': false, 'bottom': false, 'left': false }\r\n\tprivate _tileStack: Tile[] = []\r\n\r\n\tconstructor(private defined: boolean, private colX: number, private colY: number, private colHeight: number) {\r\n\t\tthis._defined = defined\r\n\t\tthis._x = colX\r\n\t\tthis._y = colY\r\n\t\tthis._height = colHeight\r\n\t}\r\n\r\n\tset x(x: number) {\r\n\t\tthis._x = x\r\n\t}\r\n\r\n\tset y(y: number) {\r\n\t\tthis._y = y\r\n\t}\r\n\r\n\tset height(height: number) {\r\n\t\tthis._height = height\r\n\t}\r\n\r\n\tset blockGroup(groupNum: number) {\r\n\t\tthis._blockGroup = groupNum\r\n\t}\r\n\r\n\tset corner(corner: boolean) {\r\n\t\tthis._corner = corner\r\n\t}\r\n\r\n\tset edge(edge: object) {\r\n\t\tthis._edge = edge\r\n\t}\r\n\r\n\tset tileStack(tiles: Tile[]) {\r\n\t\tthis._tileStack = tiles\r\n\t}\r\n\r\n\tget isDefined(): boolean {\r\n\t\treturn this._defined\r\n\t}\r\n\r\n\tget x(): number {\r\n\t\treturn this._x\r\n\t}\r\n\r\n\tget y(): number {\r\n\t\treturn this._y\r\n\t}\r\n\r\n\tget height(): number {\r\n\t\treturn this._height\r\n\t}\r\n\r\n\tget blockGroup(): number {\r\n\t\treturn this._blockGroup\r\n\t}\r\n\r\n\tget corner(): boolean {\r\n\t\treturn this._corner\r\n\t}\r\n\r\n\tget edge(): object {\r\n\t\treturn this._edge\r\n\t}\r\n\r\n\tget tileStack(): Tile[] {\r\n\t\treturn this._tileStack\r\n\t}\r\n\r\n\tpublic getTile(height: number): Tile {\r\n\t\treturn this._tileStack[height]\r\n\t}\r\n}\r\n","import { Map, Column } from './mapper.component'\r\nimport { MapGenerationFunctions, BuildingHeightVariations, Color } from './mapGenerationFunctions.component'\r\nimport { Tile, TileType } from './tile.component'\r\nimport { Config, Position } from './config.component'\r\n\r\nexport class Modifiers {\r\n\r\n\tprivate config: Config = new Config()\r\n\r\n\tmirrorMap(world: Map): any[][] {\r\n\r\n\t\tlet i = 0\r\n\t\tlet newBlockGroup = world.blockGroups.length + 1\r\n\r\n\t\tfor (let y = 0; y < world.mapHalfLength; y++) {\r\n\t\t\tif (y < world.mapHalfLength) {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\tfor (let x = 0; x < world.mapWidth; x++) {\r\n\r\n\t\t\t\t\tif (world.map[world.mapLength - y - 1][x].isDefined) {\r\n\r\n\t\t\t\t\t\tlet activeCol = world.map[world.mapLength - y - 1][x]\r\n\t\t\t\t\t\tlet height = activeCol.height\r\n\t\t\t\t\t\tlet tileStack = []\r\n\r\n\t\t\t\t\t\tfor (let h = 0; h < height; h++) {\r\n\r\n\t\t\t\t\t\t\tlet thisPillar = activeCol.tileStack[h].pillar\r\n\t\t\t\t\t\t\tlet thisWindowed = activeCol.tileStack[h].windowed\r\n\t\t\t\t\t\t\tlet isTower = activeCol.tileStack[h].tower\r\n\t\t\t\t\t\t\tlet isRoof = (h === height-1) ? true : false\r\n\r\n\t\t\t\t\t\t\ttileStack.push(\r\n\t\t\t\t\t\t\t\tnew Tile(\r\n\t\t\t\t\t\t\t\t\tworld.blockIdIterator, \r\n\t\t\t\t\t\t\t\t\tx, \r\n\t\t\t\t\t\t\t\t\ty, \r\n\t\t\t\t\t\t\t\t\th, \r\n\t\t\t\t\t\t\t\t\tactiveCol.tileStack[h].tileType,\r\n\t\t\t\t\t\t\t\t\tthis.config.buildingBaseColor,\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t'roof':\t\t\tisRoof,\r\n\t\t\t\t\t\t\t\t\t\t'pillar': \t\tthisPillar,\r\n\t\t\t\t\t\t\t\t\t\t'windowed': \tthisWindowed,\r\n\t\t\t\t\t\t\t\t\t\t'tower': \t\tisTower\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t)\r\n\r\n\t\t\t\t\t\t\tworld.blockIdIterator++\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tworld.blockHeightsArray.push(height)\r\n\r\n\t\t\t\t\t\tif (world.blockGroups.indexOf(newBlockGroup) === -1) {\r\n\t\t\t\t\t\t\tworld.blockGroups.push(newBlockGroup)\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tworld.map[y][x] = null\r\n\r\n\t\t\t\t\t\tlet column = new Column(true, x, y, height)\r\n\r\n\t\t\t\t\t\tcolumn.blockGroup = newBlockGroup\r\n\t\t\t\t\t\tcolumn.height = height\r\n\t\t\t\t\t\tcolumn.corner = false\r\n\t\t\t\t\t\tcolumn.tileStack = tileStack\r\n\r\n\t\t\t\t\t\tworld.map[y][x] = column\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn world.map\r\n\t}\r\n\t\r\n\tclearMapEdges(world: Map): any[][] {\r\n\r\n\t\tfor (let y = 0; y < world.mapLength; y++) {\r\n\t\t\tfor (let x = 0; x < world.mapWidth; x++) {\r\n\t\t\t\tif (x <= world.mapEdgeWidth || x >= world.mapWidth - world.mapEdgeWidth ||\r\n\t\t\t\t\ty <= world.mapEdgeWidth || y >= world.mapLength - world.mapEdgeWidth) {\r\n\t\t\t\t\tworld.map[y][x] = null\r\n\t\t\t\t\tlet column = new Column(false, x, y, 0)\r\n\t\t\t\t\tcolumn.tileStack = []\r\n\t\t\t\t\tworld.map[y][x] = column\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn world.map\r\n\t}\r\n\r\n\taddBuildingComponent(world: Map): any[][] {\r\n\r\n\t\tif (world.blockAmountIterator < world.maxBlockIterations) {\r\n\r\n\t\t\tworld.blockEdges = world.getEdges()\r\n\r\n\t\t\tlet nextHeight\r\n\r\n\t\t\tif (world.blockHeightVariation === BuildingHeightVariations.TallCenter) {\r\n\t\t\t\tnextHeight = world.blockHeight - (world.blockAmountIterator)\r\n\t\t\t} else if (world.blockHeightVariation === BuildingHeightVariations.TallSurrounds) {\r\n\t\t\t\tnextHeight = world.blockHeight + (world.blockAmountIterator * Math.ceil(Math.random() * 2))\r\n\t\t\t} else if (world.blockHeightVariation === BuildingHeightVariations.Random) {\r\n\t\t\t\tlet randomNum = Math.ceil(Math.random() * 4)\r\n\t\t\t\tlet randomAdd = Math.round(Math.random())\r\n\t\t\t\tif (randomAdd === 0 && world.blockHeight > 3) {\r\n\t\t\t\t\tnextHeight = world.blockHeight - randomNum\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnextHeight = world.blockHeight + randomNum\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t\tif (nextHeight < 2) {\r\n\t\t\t\tnextHeight = 1\r\n\t\t\t} else if (nextHeight > world.mapMaxHeight) {\r\n\t\t\t\tnextHeight = world.mapMaxHeight\r\n\t\t\t}\r\n\r\n\t\t\tlet randomEdgePoint = Math.floor(Math.random() * world.blockEdges.length)\r\n\t\t\tlet creationPoint: Position = world.blockEdges[randomEdgePoint]\r\n\t\t\tlet blockGroup = world.blockGroups.length + 1\r\n\t\t\tlet manipulateExistingCols = (Math.round(Math.random()) < 1) ? false : true\r\n\t\t\tlet nextBlockWidth = (world.averageBuildingSize - 2) + Math.floor(Math.random() * 5)\r\n\t\t\tlet nextBlockLength = (world.averageBuildingSize - 2) + Math.floor(Math.random() * 5)\r\n\t\t\tlet yStartOffset = 1 + Math.floor(Math.random() * 2)\r\n\r\n\t\t\tfor (let y = 0; y < world.mapLength; y++) {\r\n\t\t\t\tfor (let x = 0; x < world.mapWidth; x++) {\r\n\r\n\t\t\t\t\tif (x > (creationPoint.x - (nextBlockWidth / 2)) && x < (creationPoint.x + (nextBlockWidth / 2))) {\r\n\t\t\t\t\t\tif (y > (creationPoint.y - yStartOffset) && y < (creationPoint.y + nextBlockLength - yStartOffset)) {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tlet tileStack = []\r\n\r\n\t\t\t\t\t\t\tfor (let h = 0; h < nextHeight; h++) {\r\n\r\n\t\t\t\t\t\t\t\tlet thisPillar = 0\r\n\t\t\t\t\t\t\t\tlet thisWindowed = 0\r\n\t\t\t\t\t\t\t\tlet isRoof = (h === nextHeight-1) ? true : false\r\n\r\n\t\t\t\t\t\t\t\ttileStack.push(\r\n\t\t\t\t\t\t\t\t\tnew Tile(\r\n\t\t\t\t\t\t\t\t\t\tworld.blockIdIterator, \r\n\t\t\t\t\t\t\t\t\t\tx, \r\n\t\t\t\t\t\t\t\t\t\ty, \r\n\t\t\t\t\t\t\t\t\t\th, \r\n\t\t\t\t\t\t\t\t\t\tTileType.Body,\r\n\t\t\t\t\t\t\t\t\t\tthis.config.buildingBaseColor,\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t'roof':\t\t\tisRoof,\r\n\t\t\t\t\t\t\t\t\t\t\t'pillar': \t\tthisPillar,\r\n\t\t\t\t\t\t\t\t\t\t\t'windowed': \tthisWindowed,\r\n\t\t\t\t\t\t\t\t\t\t\t'tower': \t\tfalse\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t)\t\t\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t\t\tworld.blockHeightsArray.push(nextHeight)\r\n\r\n\t\t\t\t\t\t\t\tworld.blockIdIterator++\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (world.blockGroups.indexOf(blockGroup) === -1) {\r\n\t\t\t\t\t\t\t\tworld.blockGroups.push(blockGroup)\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tworld.map[y][x] = null\r\n\r\n\t\t\t\t\t\t\tlet column = new Column(true, x, y, nextHeight)\r\n\r\n\t\t\t\t\t\t\tcolumn.blockGroup = blockGroup\r\n\t\t\t\t\t\t\tcolumn.height = nextHeight\r\n\t\t\t\t\t\t\tcolumn.corner = false\r\n\t\t\t\t\t\t\tcolumn.tileStack = tileStack\r\n\r\n\t\t\t\t\t\t\tworld.map[y][x] = column\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tworld.blockHeight = nextHeight\r\n\r\n\t\t\tworld.blockAmountIterator++\r\n\r\n\t\t} else {\r\n\t\t\tconsole.warn(\"Cannot add more building components, maximum block iterations reached.\")\r\n\t\t}\r\n\r\n\t\treturn world.map\r\n\t}\t\r\n}","export class Primitives {\r\n\r\n\tgetPyramid(): number[][] {\r\n\r\n\t\treturn [\r\n\t\t\t\t[0,0,0,0,0,0,0,0,0,0,0,0],\r\n\t\t\t\t[0,1,1,1,1,1,1,1,1,1,1,0],\r\n\t\t\t\t[0,1,2,2,2,2,2,2,2,2,1,0],\r\n\t\t\t\t[0,1,2,3,3,3,3,3,3,2,1,0],\r\n\t\t\t\t[0,1,2,3,4,4,4,4,3,2,1,0],\r\n\t\t\t\t[0,1,2,3,4,5,5,4,3,2,1,0],\r\n\t\t\t\t[0,1,2,3,4,5,5,4,3,2,1,0],\r\n\t\t\t\t[0,1,2,3,4,4,4,4,3,2,1,0],\r\n\t\t\t\t[0,1,2,3,3,3,3,3,3,2,1,0],\r\n\t\t\t\t[0,1,2,2,2,2,2,2,2,2,1,0],\r\n\t\t\t\t[0,1,1,1,1,1,1,1,1,1,1,0],\r\n\t\t\t\t[0,0,0,0,0,0,0,0,0,0,0,0],\r\n\t\t\t]\r\n\t}\r\n}","import { Config, Coords, TileTemplate, Position } from './config.component'\r\nimport { MapGenerationFunctions, Color } from './mapGenerationFunctions.component'\r\nimport { Tile, TileType } from './tile.component'\r\n\r\nexport class RenderElements {\r\n\r\n\tprivate config: Config = new Config()\r\n\tprivate calculations: MapGenerationFunctions = new MapGenerationFunctions()\r\n\r\n\tprivate tileW: number = this.config.tileWidth\r\n\tprivate tileL: number = this.config.tileLength\r\n\tprivate tileH: number = this.config.tileHeight\r\n\tprivate bleed: number = this.config.tileEdgeBleed\r\n\tprivate dimensions = this.calculations.calculateStraightLinesFromIsometricSquare(this.tileW, this.tileL)\r\n\r\n\tprivate tileColor: string = this.config.groundColor.hex()\r\n\tprivate regularColor: string = this.config.buildingBaseColor.hex()\r\n\tprivate regularDarkerColor: string = this.config.buildingBaseColor.changeColorLighting(-10, 'hex')\r\n\tprivate regularLighterColor: string = this.config.buildingBaseColor.changeColorLighting(10, 'hex')\r\n\tprivate shadowLight: string = this.config.buildingBaseColor.changeColorLighting(-20, 'hex')\r\n\tprivate shadowHighlight: string = this.config.buildingBaseColor.changeColorLighting(20, 'hex')\r\n\tprivate shadow: string = this.config.buildingBaseColor.changeColorLighting(-30, 'hex')\r\n\tprivate highlight: string = this.config.buildingBaseColor.changeColorLighting(30, 'hex')\r\n\tprivate almostDarkestColor: string = this.config.buildingBaseColor.changeColorLighting(-40, 'hex')\r\n\tprivate almostLightestColor: string = this.config.buildingBaseColor.changeColorLighting(40, 'hex')\r\n\tprivate darkestColor: string = this.config.buildingBaseColor.changeColorLighting(-50, 'hex')\r\n\tprivate lightestColor: string = this.config.buildingBaseColor.changeColorLighting(50, 'hex')\r\n\r\n\tcreateTile(xPos: number, yPos: number): TileTemplate {\r\n\r\n\t\tlet top: Position = { \"x\": (xPos + this.dimensions.horizontalWidthFromTop), \"y\": yPos}\r\n\t\tlet left: Position = { \"x\": xPos, \"y\": (yPos + this.dimensions.verticalHeightFromTop) }\r\n\t\tlet bottom: Position = { \"x\": (xPos + this.dimensions.horizontalWidthFromBottom), \"y\": (yPos + this.dimensions.totalHeight) }\r\n\t\tlet right: Position = { \"x\": (xPos + this.dimensions.totalWidth), \"y\": (yPos + this.dimensions.verticalHeightFromBottom) }\r\n\r\n\t\tlet pointTop = `${top.x} ${top.y-this.bleed}`\r\n\t\tlet pointLeft = `${left.x-this.bleed} ${left.y}`\r\n\t\tlet pointBottom = `${bottom.x} ${bottom.y+this.bleed}`\r\n\t\tlet pointRight = `${right.x+this.bleed} ${right.y}`\r\n\r\n\t\tvar html = `<path fill=\"${this.tileColor}\"\r\n\t\t\t\t\td=\"M${pointLeft} \r\n\t\t\t\t\tL${pointBottom} \r\n\t\t\t\t\tL${pointRight} \r\n\t\t\t\t\tL${pointTop} \r\n\t\t\t\t\tL${pointLeft} Z\" />`\r\n\r\n\t\tlet coords: Coords = { \"top\": top, \"left\": left, \"bottom\": bottom, \"right\": right }\r\n\r\n\t\treturn { html: html, coords: coords }\r\n\t}\r\n\r\n\tcreateBlock(xPos: number, yPos: number, tile: Tile): TileTemplate {\r\n\r\n\t\tlet id = tile.id\r\n\t\tlet height = (tile.h * this.tileH) - this.tileH\r\n\r\n\t\tlet top: Position = { \"x\": Math.ceil(xPos + this.dimensions.horizontalWidthFromTop), \"y\": Math.ceil(yPos + this.config.topMargin ) }\r\n\t\tlet left: Position = { \"x\": Math.ceil(xPos), \"y\": Math.ceil(yPos + this.dimensions.verticalHeightFromTop + this.config.topMargin ) }\r\n\t\tlet bottom: Position = { \"x\": Math.ceil(xPos + this.dimensions.horizontalWidthFromBottom), \"y\": Math.ceil(yPos + this.dimensions.totalHeight + this.config.topMargin ) }\r\n\t\tlet right: Position = { \"x\": Math.ceil(xPos + this.dimensions.totalWidth), \"y\": Math.ceil(yPos + this.dimensions.verticalHeightFromBottom + this.config.topMargin ) }\r\n\r\n\t\tlet leftWallLeftTop = `${left.x-this.bleed} ${left.y-height-this.tileH}`\r\n\t\tlet leftWallLeftBottom = `${left.x-this.bleed} ${left.y-height+this.bleed}`\r\n\t\tlet leftWallRightBottom = `${bottom.x} ${bottom.y-height+this.bleed}`\r\n\t\tlet leftWallRightTop = `${bottom.x} ${bottom.y-height-this.tileH}`\r\n\r\n\t\tlet rightWallLeftTop = `${bottom.x} ${bottom.y-height-this.tileH}`\r\n\t\tlet rightWallLeftBottom = `${bottom.x} ${bottom.y-height+this.bleed}`\r\n\t\tlet rightWallRightBottom = `${right.x+this.bleed} ${right.y-height+this.bleed}`\r\n\t\tlet rightWallRightTop = `${right.x+this.bleed} ${right.y-height-this.tileH}`\r\n\r\n\t\tlet blockTopLeft = `${left.x-this.bleed} ${left.y-height-this.tileH}`\r\n\t\tlet blockTopBottom = `${bottom.x} ${bottom.y-height-this.tileH}`\r\n\t\tlet blockTopRight = `${right.x+this.bleed} ${right.y-height-this.tileH}`\r\n\t\tlet blockTopTop = `${top.x} ${top.y-height-this.tileH}`\r\n\r\n\t\tlet html = `<g style=\"z-index:${id};\"><path fill=\"${this.darkestColor}\"\r\n\t\t\t\t\td=\"M${leftWallLeftTop} \r\n\t\t\t\t\tL${leftWallLeftBottom} \r\n\t\t\t\t\tL${leftWallRightBottom} \r\n\t\t\t\t\tL${leftWallRightTop} \r\n\t\t\t\t\tL${leftWallLeftTop} Z\" />\r\n\t\t\t\t\t<path fill=\"${this.regularColor}\"\r\n\t\t\t\t\td=\"M${rightWallLeftTop} \r\n\t\t\t\t\tL${rightWallLeftBottom} \r\n\t\t\t\t\tL${rightWallRightBottom} \r\n\t\t\t\t\tL${rightWallRightTop} \r\n\t\t\t\t\tL${rightWallLeftTop} Z\" />\r\n\t\t\t\t\t<path fill=\"${this.highlight}\"\r\n\t\t\t\t\td=\"M${blockTopLeft} \r\n\t\t\t\t\tL${blockTopBottom} \r\n\t\t\t\t\tL${blockTopRight} \r\n\t\t\t\t\tL${blockTopTop} \r\n\t\t\t\t\tL${blockTopLeft} Z\" /></g>`\r\n\r\n\t\tlet coords: Coords = { \"top\": top, \"left\": left, \"bottom\": bottom, \"right\": right }\r\n\r\n\t\treturn { html: html, coords: coords }\r\n\t}\r\n\r\n\tcreateSlopeBlock(xPos: number, yPos: number, tile: Tile, slopeDirection: string): TileTemplate {\r\n\r\n\t\tlet id = tile.id\r\n\t\tlet height = (tile.h * this.tileH) - this.tileH\r\n\r\n\t\tlet top: Position = { \"x\": Math.ceil(xPos + this.dimensions.horizontalWidthFromTop), \"y\": Math.ceil(yPos) }\r\n\t\tlet left: Position = { \"x\": Math.ceil(xPos), \"y\": Math.ceil(yPos + this.dimensions.verticalHeightFromTop) }\r\n\t\tlet bottom: Position = { \"x\": Math.ceil(xPos + this.dimensions.horizontalWidthFromBottom), \"y\": Math.ceil(yPos + this.dimensions.totalHeight) }\r\n\t\tlet right: Position = { \"x\": Math.ceil(xPos + this.dimensions.totalWidth), \"y\": Math.ceil(yPos + this.dimensions.verticalHeightFromBottom) }\r\n\r\n\t\tlet html = ''\r\n\t\tlet coords: Coords = { \"top\": top, \"left\": left, \"bottom\": bottom, \"right\": right }\r\n\r\n\t\tif (slopeDirection === 'n') {\r\n\r\n\t\t\tlet leftWallLeftTop = `${left.x-this.bleed} ${left.y-height-this.tileH}`\r\n\t\t\tlet leftWallLeftBottom = `${left.x-this.bleed} ${left.y-height+this.bleed}`\r\n\t\t\tlet leftWallRightBottom = `${bottom.x} ${bottom.y-height+this.bleed}`\r\n\t\t\tlet leftWallRightTop = `${bottom.x} ${bottom.y-height-this.tileH}`\r\n\r\n\t\t\tlet rightWallLeftTop = `${bottom.x} ${bottom.y-height-this.tileH}`\r\n\t\t\tlet rightWallLeftBottom = `${bottom.x} ${bottom.y-height+this.bleed}`\r\n\t\t\tlet rightWallRightBottom = `${right.x+this.bleed} ${right.y-height+this.bleed}`\r\n\r\n\t\t\tlet blockTopLeft = `${left.x-this.bleed} ${left.y-height-this.tileH}`\r\n\t\t\tlet blockTopBottom = `${bottom.x} ${bottom.y-height-this.tileH}`\r\n\t\t\tlet blockTopRight = `${right.x+this.bleed} ${right.y-height+this.bleed}`\r\n\t\t\tlet blockTopTop = `${top.x} ${top.y-height}`\r\n\r\n\t\t\thtml = `<g style=\"z-index:${id};\">\r\n\t\t\t\t\t\t\t<path fill=\"${this.shadow}\"\r\n\t\t\t\t\t\t\td=\"M${leftWallLeftTop} \r\n\t\t\t\t\t\t\tL${leftWallLeftBottom} \r\n\t\t\t\t\t\t\tL${leftWallRightBottom} \r\n\t\t\t\t\t\t\tL${leftWallRightTop} \r\n\t\t\t\t\t\t\tL${leftWallLeftTop} Z\" />\r\n\t\t\t\t\t\t\t<path fill=\"${this.regularColor}\"\r\n\t\t\t\t\t\t\td=\"M${rightWallLeftTop}\r\n\t\t\t\t\t\t\tL${rightWallLeftBottom}\r\n\t\t\t\t\t\t\tL${rightWallRightBottom}\r\n\t\t\t\t\t\t\tL${rightWallLeftTop} Z\" />\r\n\t\t\t\t\t\t\t<path fill=\"${this.lightestColor}\"\r\n\t\t\t\t\t\t\td=\"M${blockTopLeft}\r\n\t\t\t\t\t\t\tL${blockTopBottom}\r\n\t\t\t\t\t\t\tL${blockTopRight}\r\n\t\t\t\t\t\t\tL${blockTopTop}\r\n\t\t\t\t\t\t\tL${blockTopLeft} Z\" />\r\n\t\t\t\t\t\t</g>`\r\n\t\t}\r\n\r\n\t\tif (slopeDirection === 'nw') {\r\n\r\n\t\t\tconsole.log('northwest')\r\n\r\n\t\t\tlet leftWallLeftTop = `${left.x-this.bleed} ${left.y-height}`\r\n\t\t\tlet leftWallLeftBottom = `${left.x-this.bleed} ${left.y-height+this.bleed}`\r\n\t\t\tlet leftWallRightBottom = `${bottom.x} ${bottom.y-height-this.tileH+this.bleed}`\r\n\r\n\t\t\tlet blockTopLeft = `${left.x-this.bleed} ${left.y-height+this.bleed}`\r\n\t\t\tlet blockTopBottom = `${bottom.x} ${bottom.y-height-this.tileH+this.bleed}`\r\n\t\t\tlet blockTopTop = `${top.x} ${top.y-height}`\r\n\r\n\t\t\tlet blockRightBottom = `${bottom.x} ${bottom.y-height-this.tileH}`\r\n\t\t\tlet blockRightRight = `${right.x+this.bleed} ${right.y-height+this.bleed}`\r\n\t\t\tlet blockRightTop = `${top.x} ${top.y-height}`\r\n\r\n\t\t\thtml = `<g style=\"z-index:${id};\">\r\n\t\t\t\t\t\t\t<path fill=\"${this.darkestColor}\"\r\n\t\t\t\t\t\t\td=\"M${leftWallLeftTop}\r\n\t\t\t\t\t\t\tL${leftWallLeftBottom}\r\n\t\t\t\t\t\t\tL${leftWallRightBottom}\r\n\t\t\t\t\t\t\tL${leftWallLeftTop} Z\" />\r\n\t\t\t\t\t\t\t<path fill=\"${this.regularDarkerColor}\"\r\n\t\t\t\t\t\t\td=\"M${blockTopLeft}\r\n\t\t\t\t\t\t\tL${blockTopBottom}\r\n\t\t\t\t\t\t\tL${blockTopTop}\r\n\t\t\t\t\t\t\tL${blockTopLeft} Z\" />\r\n\t\t\t\t\t\t\t<path fill=\"${this.lightestColor}\"\r\n\t\t\t\t\t\t\td=\"M${blockRightBottom}\r\n\t\t\t\t\t\t\tL${blockRightRight}\r\n\t\t\t\t\t\t\tL${blockRightTop}\r\n\t\t\t\t\t\t\tL${blockRightBottom} Z\" />\r\n\t\t\t\t\t\t</g>`\r\n\t\t}\r\n\r\n\t\tif (slopeDirection === 's') {\r\n\r\n\t\t\tlet rightWallLeftBottom = `${bottom.x} ${bottom.y-height+this.bleed}`\r\n\t\t\tlet rightWallRightBottom = `${right.x+this.bleed} ${right.y-height+this.bleed}`\r\n\t\t\tlet rightWallRightTop = `${right.x+this.bleed} ${right.y-height-this.tileH}`\r\n\r\n\t\t\tlet blockTopLeft = `${left.x-this.bleed} ${left.y-height+this.bleed}`\r\n\t\t\tlet blockTopBottom = `${bottom.x} ${bottom.y-height+this.bleed}`\r\n\t\t\tlet blockTopRight = `${right.x+this.bleed} ${right.y-height-this.tileH+this.bleed}`\r\n\t\t\tlet blockTopTop = `${top.x} ${top.y-height-this.tileH}`\r\n\r\n\t\t\thtml = `<g style=\"z-index:${id};\">\r\n\t\t\t\t\t\t\t<path fill=\"${this.regularColor}\"\r\n\t\t\t\t\t\t\td=\"M${rightWallLeftBottom}\r\n\t\t\t\t\t\t\tL${rightWallRightBottom}\r\n\t\t\t\t\t\t\tL${rightWallRightTop}\r\n\t\t\t\t\t\t\tL${rightWallLeftBottom} Z\" />\r\n\t\t\t\t\t\t\t<path fill=\"${this.shadow}\"\r\n\t\t\t\t\t\t\td=\"M${blockTopLeft}\r\n\t\t\t\t\t\t\tL${blockTopBottom}\r\n\t\t\t\t\t\t\tL${blockTopRight}\r\n\t\t\t\t\t\t\tL${blockTopTop}\r\n\t\t\t\t\t\t\tL${blockTopLeft} Z\" />\r\n\t\t\t\t\t\t</g>`\r\n\t\t}\r\n\r\n\t\tif (slopeDirection === 'se') {\r\n\r\n\t\t\tlet blockLeftLeft = `${left.x-this.bleed} ${left.y-height+this.bleed}`\r\n\t\t\tlet blockLeftBottom = `${bottom.x} ${bottom.y-height+this.bleed}`\r\n\t\t\tlet blockLeftTop = `${top.x} ${top.y-height-this.tileH}`\r\n\r\n\t\t\tlet blockRightBottom = `${bottom.x} ${bottom.y-height+this.bleed}`\r\n\t\t\tlet blockRightRight = `${right.x+this.bleed} ${right.y-height+this.bleed}`\r\n\t\t\tlet blockRightTop = `${top.x} ${top.y-height-this.tileH}`\r\n\r\n\t\t\thtml = `<g style=\"z-index:${id};\">\r\n\t\t\t\t\t\t<path fill=\"${this.shadow}\"\r\n\t\t\t\t\t\td=\"M${blockLeftLeft}\r\n\t\t\t\t\t\tL${blockLeftBottom}\r\n\t\t\t\t\t\tL${blockLeftTop}\r\n\t\t\t\t\t\tL${blockLeftLeft} Z\" />\r\n\t\t\t\t\t\t<path fill=\"${this.regularDarkerColor}\"\r\n\t\t\t\t\t\td=\"M${blockRightRight}\r\n\t\t\t\t\t\tL${blockRightBottom}\r\n\t\t\t\t\t\tL${blockRightTop}\r\n\t\t\t\t\t\tL${blockRightRight} Z\" />\r\n\t\t\t\t\t</g>`\r\n\t\t}\r\n\r\n\t\tif (slopeDirection === 'e') {\r\n\r\n\t\t\tlet leftWallLeftTop = `${left.x-this.bleed} ${left.y-height-this.tileH}`\r\n\t\t\tlet leftWallLeftBottom = `${left.x-this.bleed} ${left.y-height+this.bleed}`\r\n\t\t\tlet leftWallRightBottom = `${bottom.x} ${bottom.y-height+this.bleed}`\r\n\r\n\t\t\tlet blockTopLeft = `${left.x-this.bleed} ${left.y-height-this.tileH+this.bleed}`\r\n\t\t\tlet blockTopBottom = `${bottom.x} ${bottom.y-height+this.bleed}`\r\n\t\t\tlet blockTopRight = `${right.x+this.bleed} ${right.y-height+this.bleed}`\r\n\t\t\tlet blockTopTop = `${top.x} ${top.y-height-this.tileH}`\r\n\r\n\t\t\thtml = `<g style=\"z-index:${id};\">\r\n\t\t\t\t\t\t\t<path fill=\"${this.darkestColor}\"\r\n\t\t\t\t\t\t\td=\"M${leftWallLeftTop}\r\n\t\t\t\t\t\t\tL${leftWallLeftBottom}\r\n\t\t\t\t\t\t\tL${leftWallRightBottom}\r\n\t\t\t\t\t\t\tL${leftWallLeftTop} Z\" />\r\n\t\t\t\t\t\t\t<path fill=\"${this.regularDarkerColor}\"\r\n\t\t\t\t\t\t\td=\"M${blockTopLeft}\r\n\t\t\t\t\t\t\tL${blockTopBottom}\r\n\t\t\t\t\t\t\tL${blockTopRight}\r\n\t\t\t\t\t\t\tL${blockTopTop}\r\n\t\t\t\t\t\t\tL${blockTopLeft} Z\" />\r\n\t\t\t\t\t\t</g>`\r\n\t\t}\r\n\r\n\t\tif (slopeDirection === 'ne') {\r\n\r\n\t\t\tlet leftWallLeftTop = `${left.x-this.bleed} ${left.y-height-this.tileH}`\r\n\t\t\tlet leftWallLeftBottom = `${left.x-this.bleed} ${left.y-height+this.bleed}`\r\n\t\t\tlet leftWallRightBottom = `${bottom.x} ${bottom.y-height+this.bleed}`\r\n\r\n\t\t\tlet blockBottomLeft = `${left.x-this.bleed} ${left.y-height-this.tileH+this.bleed}`\r\n\t\t\tlet blockBottomRight = `${right.x+this.bleed} ${right.y-height+this.bleed}`\r\n\t\t\tlet blockBottomTop = `${top.x} ${top.y-height}`\r\n\r\n\t\t\tlet blockTopLeft = `${left.x-this.bleed} ${left.y-height-this.tileH+this.bleed}`\r\n\t\t\tlet blockTopBottom = `${bottom.x} ${bottom.y-height+this.bleed}`\r\n\t\t\tlet blockTopRight = `${right.x+this.bleed} ${right.y-height+this.bleed}`\r\n\r\n\t\t\thtml = `<g style=\"z-index:${id};\">\r\n\t\t\t\t\t\t<path fill=\"${this.darkestColor}\"\r\n\t\t\t\t\t\td=\"M${leftWallLeftTop}\r\n\t\t\t\t\t\tL${leftWallLeftBottom}\r\n\t\t\t\t\t\tL${leftWallRightBottom}\r\n\t\t\t\t\t\tL${leftWallLeftTop} Z\" />\r\n\t\t\t\t\t\t<path fill=\"${this.regularDarkerColor}\"\r\n\t\t\t\t\t\td=\"M${blockTopLeft}\r\n\t\t\t\t\t\tL${blockTopBottom}\r\n\t\t\t\t\t\tL${blockTopRight}\r\n\t\t\t\t\t\tL${blockTopLeft} Z\" />\r\n\t\t\t\t\t\t<path fill=\"${this.lightestColor}\"\r\n\t\t\t\t\t\td=\"M${blockBottomLeft}\r\n\t\t\t\t\t\tL${blockBottomTop}\r\n\t\t\t\t\t\tL${blockBottomRight}\r\n\t\t\t\t\t\tL${blockBottomLeft} Z\" />\r\n\t\t\t\t\t</g>`\r\n\t\t}\r\n\r\n\t\tif (slopeDirection === 'w') {\r\n\r\n\t\t\tlet leftWallLeftTop = `${left.x-this.bleed} ${left.y-height}`\r\n\t\t\tlet leftWallLeftBottom = `${left.x-this.bleed} ${left.y-height+this.bleed}`\r\n\t\t\tlet leftWallRightBottom = `${bottom.x} ${bottom.y-height-this.tileH+this.bleed}`\r\n\r\n\t\t\tlet blockTopLeft = `${left.x-this.bleed} ${left.y-height+this.bleed}`\r\n\t\t\tlet blockTopBottom = `${bottom.x} ${bottom.y-height-this.tileH+this.bleed}`\r\n\t\t\tlet blockTopRight = `${right.x+this.bleed} ${right.y-height-this.tileH+this.bleed}`\r\n\t\t\tlet blockTopTop = `${top.x} ${top.y-height}`\r\n\r\n\t\t\thtml = `<g style=\"z-index:${id};\">\r\n\t\t\t\t\t\t\t<path fill=\"${this.darkestColor}\"\r\n\t\t\t\t\t\t\td=\"M${leftWallLeftTop}\r\n\t\t\t\t\t\t\tL${leftWallLeftBottom}\r\n\t\t\t\t\t\t\tL${leftWallRightBottom}\r\n\t\t\t\t\t\t\tL${leftWallLeftTop} Z\" />\r\n\t\t\t\t\t\t\t<path fill=\"${this.regularDarkerColor}\"\r\n\t\t\t\t\t\t\td=\"M${blockTopLeft}\r\n\t\t\t\t\t\t\tL${blockTopBottom}\r\n\t\t\t\t\t\t\tL${blockTopRight}\r\n\t\t\t\t\t\t\tL${blockTopTop}\r\n\t\t\t\t\t\t\tL${blockTopLeft} Z\" />\r\n\t\t\t\t\t\t</g>`\r\n\t\t}\r\n\r\n\t\tif (slopeDirection === 'sw') {\r\n\r\n\t\t\tlet rightWallLeftBottom = `${bottom.x} ${bottom.y-height+this.bleed}`\r\n\t\t\tlet rightWallRightBottom = `${right.x+this.bleed} ${right.y-height+this.bleed}`\r\n\t\t\tlet rightWallRightTop = `${right.x+this.bleed} ${right.y-height-this.tileH}`\r\n\r\n\t\t\tlet blockTopLeft = `${left.x-this.bleed} ${left.y-height+this.bleed}`\r\n\t\t\tlet blockTopBottom = `${bottom.x} ${bottom.y-height+this.bleed}`\r\n\t\t\tlet blockTopRight = `${right.x+this.bleed} ${right.y-height-this.tileH+this.bleed}`\r\n\t\t\tlet blockTopTop = `${top.x} ${top.y-height}`\r\n\r\n\t\t\thtml = `<g style=\"z-index:${id};\">\r\n\t\t\t\t\t\t\t<path fill=\"${this.regularColor}\"\r\n\t\t\t\t\t\t\td=\"M${rightWallLeftBottom}\r\n\t\t\t\t\t\t\tL${rightWallRightBottom}\r\n\t\t\t\t\t\t\tL${rightWallRightTop}\r\n\t\t\t\t\t\t\tL${rightWallLeftBottom} Z\" />\r\n\t\t\t\t\t\t\t<path fill=\"${this.regularDarkerColor}\"\r\n\t\t\t\t\t\t\td=\"M${blockTopLeft}\r\n\t\t\t\t\t\t\tL${blockTopTop}\r\n\t\t\t\t\t\t\tL${blockTopRight}\r\n\t\t\t\t\t\t\tL${blockTopLeft} Z\" />\r\n\t\t\t\t\t\t\t<path fill=\"${this.shadow}\"\r\n\t\t\t\t\t\t\td=\"M${blockTopLeft}\r\n\t\t\t\t\t\t\tL${blockTopBottom}\r\n\t\t\t\t\t\t\tL${blockTopRight}\r\n\t\t\t\t\t\t\tL${blockTopLeft} Z\" />\r\n\t\t\t\t\t\t</g>`\r\n\t\t}\r\n\r\n\t\treturn { html: html, coords: coords }\r\n\t}\r\n}","import { Color } from './mapGenerationFunctions.component'\r\n\r\nexport class Tile {\r\n\t\r\n\t_id: number\r\n\t_x: number\r\n\t_y: number\r\n\t_h: number\r\n\t_tileType: TileType\r\n\t_tileColor: Color\r\n\t_options?: object = {}\r\n\r\n\tconstructor(\t\t\t\r\n\t\t\tid: number,\r\n\t\t\tx: number,\r\n\t\t\ty: number,\r\n\t\t\th: number,\r\n\t\t\ttileType: TileType,\r\n\t\t\ttileColor: Color,\r\n\t\t\toptions?: object)\r\n\t{\r\n\t\tthis._id = id\r\n\t\tthis._x = x\r\n\t\tthis._y = y\r\n\t\tthis._h = h\r\n\t\tthis._tileType = tileType\r\n\t\tthis._tileColor = tileColor\r\n\r\n\t\tif (options) {\r\n\t\t\tthis._options = options\r\n\t\t}\r\n\t}\r\n\r\n\tget id(): number {\r\n\t\treturn this._id\r\n\t}\r\n\r\n\tget x(): number {\r\n\t\treturn this._x\r\n\t}\r\n\r\n\tget y(): number {\r\n\t\treturn this._y\r\n\t}\r\n\r\n\tget h(): number {\r\n\t\treturn this._h\r\n\t}\r\n\r\n\tget type(): TileType {\r\n\t\treturn this._tileType\r\n\t}\r\n\r\n\tget options(): object {\r\n\t\tif (this._tileType != TileType.None) {\r\n\t\t\treturn this._options\r\n\t\t} else {\r\n\t\t\treturn { 'defined': false }\r\n\t\t}\r\n\t}\r\n\r\n\tpublic getColor(): Color {\r\n\t\treturn this._tileColor\r\n\t}\r\n\r\n\tset tileColor(color: Color) {\r\n\t\tthis._tileColor = color\r\n\t}\r\n\r\n}\r\n\r\nexport enum TileType {\r\n\tNone = 'none',\r\n\tBody = 'body',\r\n\tTower = 'tower',\r\n\tRoof = 'roof'\r\n}\r\n"]}
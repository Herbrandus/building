{"version":3,"sources":["node_modules/browser-pack/_prelude.js","bundle.min.js","src/ts/builder.component.ts","src/ts/config.component.ts","src/ts/main.ts","src/ts/mapGenerationFunctions.component.ts","src/ts/mapper.component.ts","src/ts/primitives.component.ts","src/ts/renderelements.component.ts","src/ts/tile.component.ts"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","Object","defineProperty","value","mapGenerationFunctions_component_1","config_component_1","renderelements_component_1","Renderer","[object Object]","this","config","Config","calculations","MapGenerationFunctions","render","RenderElements","map","html","mapWidth","mapLength","tileWidth","tileLength","htmlMap","getMapWidth","y","x","getColumn","isDefined","tileTopColor","getTopTile","getColor","rgb","height","mapToBuild","mapTotalWidth","mapTotalLength","testTile","createTile","yDeviation","coords","bottom","top","right","left","tileHalfWidthLeft","tileHalfWidthRight","tileHalfLengthTop","mapLengthTop","mapLengthBottom","mapWidthPx","Math","round","mapLengthPx","detailsHtml","lastTile","startTileX","thisPosY","thisPosX","newTile","newData","h","tile","createBlock","tileHeight","tileStack","allowDebug","debugInfo","blockGroup","id","xPos","yPos","edge","corner","createSlopeBlock","getTile","./config.component","./mapGenerationFunctions.component","./renderelements.component","2","_allowDebug","_tileWidth","_tileLength","_tileHeight","_tileSmallAngle","_tileLargeAngle","_groundColor","Color","_buildingBaseColor","floor","random","_tileEdgeBleed","_maxAllowedHeight","tileSmallAngle","tileLargeAngle","groundColor","buildingBaseColor","tileEdgeBleed","maxAllowedHeight","mapArrayWidth","mapArrayLength","3","mapper_component_1","builder_component_1","RandomBuilding","_builder","_map","default","document","querySelector","style","background","hex","showData","build2DMap","buildMap","building","innerHTML","colorMap","addEventListener","./builder.component","./mapper.component","4","smallAngle","largeAngle","maximumBlockIterations","blockWidth","blockHeight","smallOuterAngle","largeOuterAngle","horizontalWidthFromBottom","getHorizontalBottomShortestWidth","verticalHeightFromBottom","getVerticalBottomShortestHeight","horizontalWidthFromTop","getHorizontalTopLongestWidth","verticalHeightFromTop","getVerticalTopLongestHeight","totalWidth","totalHeight","diagonalWidth","sin","toRadians","diagonalHeight","cos","angle","PI","TileColor","BuildingHeightVariations","params","error","validateHex","hexColor","charAt","setHex","hexToRgb","validateRgb","setRgb","rgbToHex","toString","g","b","_colorRgb","hexadecimal","hexVal1","hexVal2","hexVal3","_colorHex","match","hexValues","substr","split","hexPair1","parseInt","hexPair2","hexPair3","hexR","Number","hexG","hexB","amount","encoding","newR","newG","newB","5","tile_component_1","primitives_component_1","mapMaxHeight","mapEdgeWidth","averageBuildingSize","pyramid","_mapGen","primitives","Primitives","_blockHeightVariationLabels","TallCenter","TallSurrounds","Random","_blockHeightVariation","_mapWidth","_mapLength","_mapMaxHeight","_mapEdgeWidth","_averageBuildingSize","_blockHeight","_maximumBlockIterations","_additionalBlockIterations","calculateAdditionalBlockIterations","_blockGroups","_blockEdges","_blockHeightsArray","_mapHalfLength","_blockIdIterator","mapLengthHalf","startblockLength","startblockWidth","startblockXfromCenter","startblockLengthHalf","startingPositionX","_world","firstBlockHeight","thisBlockGroup","column","Column","thisPillar","thisWindowed","isRoof","push","Tile","TileType","Body","roof","pillar","windowed","tower","indexOf","Array","console","log","getEdges","randomPositionPicker","ceil","thisHeight","thisBlockLength","thisBlockWidth","clearMapEdges","mirrorMap","considerLowerEdges","pos","getPyramid","remainderLength","remainderWidth","edgeX","edgeY","row","unshift","mapLengthEven","newGroupId","tileType","type","tileOptions","options","defined","colX","colY","colHeight","_edge","_tileStack","_defined","_x","_y","_height","groupNum","_blockGroup","_corner","tiles","./primitives.component","./tile.component","6","7","tileW","tileL","tileH","bleed","dimensions","calculateStraightLinesFromIsometricSquare","tileColor","regularColor","regularDarkerColor","changeColorLighting","regularLighterColor","shadowLight","shadowHighlight","shadow","highlight","almostDarkestColor","almostLightestColor","darkestColor","lightestColor","pointTop","pointLeft","pointBottom","pointRight","leftWallLeftTop","leftWallLeftBottom","leftWallRightBottom","leftWallRightTop","rightWallLeftTop","rightWallLeftBottom","rightWallRightBottom","rightWallRightTop","blockTopLeft","blockTopBottom","blockTopRight","blockTopTop","slopeDirection","blockRightBottom","blockRightRight","blockRightTop","blockLeftLeft","blockLeftBottom","blockLeftTop","blockBottomLeft","blockBottomRight","blockBottomTop","8","_options","_id","_h","_tileType","_tileColor","None"],"mappings":"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","file":"bundle.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()",null,"import { MapGenerationFunctions, Color } from './mapGenerationFunctions.component'\r\nimport Map from './mapper.component'\r\nimport { Tile, TileType } from './tile.component'\r\nimport { Config, Coords, TileTemplate, Position } from './config.component'\r\nimport { RenderElements } from './renderelements.component'\r\n\r\nexport class Renderer {\t\r\n\r\n\tprivate config: Config = new Config()\r\n\tprivate calculations: MapGenerationFunctions = new MapGenerationFunctions()\r\n\tprivate render: RenderElements = new RenderElements()\r\n\r\n\tconstructor() {\t}\r\n\r\n\tshowData(map: Map): string {\r\n\r\n\t\tlet html = '<div class=\"showData\">'\r\n\t\thtml += `map width: ${map.mapWidth} tiles<br>map length: ${map.mapLength} tiles<br>`\r\n\t\thtml += `tile width: ${this.config.tileWidth}<br>tile length: ${this.config.tileLength}<br>`\r\n\t\thtml += '</div>'\r\n\r\n\t\treturn html\r\n\t}\r\n\r\n\tbuild2DMap(map: Map): string {\r\n\r\n\t\tlet htmlMap = `<div class=\"map\" style=\"width:${this.config.getMapWidth(map.mapWidth)}px;\">`\r\n\r\n\t\tfor (let y = 0; y < map.mapLength; y++) {\r\n\t\t\tfor (let x = 0; x < map.mapWidth; x++) {\r\n\r\n\t\t\t\thtmlMap += `<div class=\"tile\" style=\"width:${this.config.tileWidth}px;height:${this.config.tileLength}px;`\r\n\r\n\t\t\t\tif (map.getColumn(x, y).isDefined) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet tile = map.getTopTile(x, y)\r\n\t\t\t\t\tlet tileTopColor = tile.getColor().rgb()\r\n\t\t\t\t\tlet tileColor = `rgb(${tileTopColor['r']}, ${tileTopColor['g']}, ${tileTopColor['b']})`\r\n\r\n\t\t\t\t\thtmlMap += `background-color:${tileColor}\">${map.map[y][x].height}<br>(${x}, ${y})</div>`\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\thtmlMap += `\">${x}, ${y}</div>`\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\thtmlMap += `</div>`\r\n\r\n\t\treturn htmlMap\r\n\t}\r\n\r\n\tbuildMap(mapToBuild: Map): string {\r\n\r\n\t\tlet mapTotalWidth = mapToBuild.mapWidth\r\n\t\tlet mapTotalLength = mapToBuild.mapLength\r\n\r\n\t\tlet testTile = this.render.createTile(0, 0)\r\n\r\n\t\tlet xDeviation = testTile.coords.bottom.x - testTile.coords.top.x\r\n\t\tlet yDeviation = testTile.coords.right.y - testTile.coords.left.y\r\n\t\tlet tileHalfWidthLeft = testTile.coords.top.x - testTile.coords.left.x\r\n\t\tlet tileHalfWidthRight = testTile.coords.right.x - testTile.coords.top.x\r\n\t\tlet mapWidthLeft = tileHalfWidthLeft * mapTotalLength\r\n\t\tlet mapWidthRight = tileHalfWidthRight * mapTotalWidth\r\n\t\tlet tileHalfLengthTop = testTile.coords.right.y\r\n\t\tlet tileHalfLengthBottom = testTile.coords.bottom.y - testTile.coords.right.y\r\n\t\tlet mapLengthTop = tileHalfLengthTop * mapTotalWidth\r\n\t\tlet mapLengthBottom = tileHalfLengthBottom * mapTotalLength\r\n\t\tlet mapWidthPx = Math.round((tileHalfWidthLeft + tileHalfWidthRight) * (mapTotalWidth ))\r\n\t\tlet mapLengthPx = Math.round(mapLengthTop + mapLengthBottom)\r\n\r\n\t\tconst map = mapToBuild.map\r\n\r\n\t\tlet detailsHtml = ''\r\n\t\tlet html = '<svg width=\"'+mapWidthPx+'\" height=\"'+mapLengthPx+'\">'\r\n\r\n\t\tlet lastTile = null\r\n\t\tlet startTileX = tileHalfWidthLeft * (mapTotalWidth - 1)\r\n\r\n\t\tfor (let y = 0; y < mapTotalLength; y++) {\r\n\r\n\t\t\tfor (let x = 0; x < mapTotalWidth; x++) {\r\n\r\n\t\t\t\tlet thisPosY = 0\r\n\t\t\t\tlet thisPosX = 0\r\n\r\n\t\t\t\tif (x === 0 && y === 0) {\r\n\t\t\t\t\tthisPosX = startTileX\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (lastTile != null) {\r\n\t\t\t\t\tthisPosY = lastTile.coords.right.y\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (y > 0 && x === 0) {\r\n\t\t\t\t\tthisPosX = startTileX - (tileHalfWidthLeft * y)\r\n\t\t\t\t\tthisPosY = (tileHalfLengthTop * y) - (yDeviation * y)\r\n\t\t\t\t}\t\r\n\t\t\t\t\r\n\t\t\t\tif (x > 0) {\r\n\t\t\t\t\tthisPosX = (lastTile.coords.right.x - (lastTile.coords.right.x - lastTile.coords.bottom.x))\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet newTile = this.render.createTile(thisPosX, thisPosY)\r\n\t\t\t\tlet newData = ''\r\n\t\t\t\t\r\n\t\t\t\tif (map[y][x].isDefined) {\r\n\t\t\t\t\tfor (let h = 0; h < map[y][x].height; h++) {\r\n\t\t\t\t\t\tlet tile = this.render.createBlock(thisPosX, thisPosY - this.config.tileHeight, map[y][x].tileStack[h])\r\n\t\t\t\t\t\tnewData += tile.html\r\n\r\n\t\t\t\t\t\tif (this.config.allowDebug) {\r\n\t\t\t\t\t\t\tif (h === map[y][x].height - 1) {\r\n\t\t\t\t\t\t\t\tlet debugInfo = `<span>x: ${x}, y: ${y} <span class=\"debugLink showGroups\" data-group=\"${map[y][x].blockGroup}\">groupId: ${map[y][x].blockGroup}</span><br>id: ${map[y][x].tileStack[h].id}  h: ${h}</span>`\r\n\t\t\t\t\t\t\t\tdetailsHtml += `<div class=\"blockLabel\" data-groupId=\"${map[y][x].blockGroup}\" style=\"left: ${tile.coords.top.x}px; top: ${tile.coords.top.y - (this.config.tileHeight * h-1)}px;\"><div class=\"point\"></div>${debugInfo}</div>`\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} \r\n\r\n\t\t\t\thtml += newTile.html + newData\r\n\r\n\t\t\t\tlastTile = newTile\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\thtml += '</svg>'\r\n\r\n\t\t// document.querySelector('#debug').innerHTML = detailsHtml\r\n\r\n\t\treturn '<div id=\"debug\">' + detailsHtml + '</div>' + html\r\n\t}\r\n\r\n\taddSlopedEdges(map: any[], x: number, y: number, h: number, xPos: number, yPos: number) {\r\n\r\n\t\tlet tile = null\r\n\r\n\t\tif (map[y][x].edge.top && !map[y][x].corner && h === map[y][x].height-1) {\r\n\t\t\ttile = this.render.createSlopeBlock(xPos, yPos - this.config.tileHeight, map[y][x].getTile(h), 'n')\r\n\t\t} else if (map[y][x].edge.bottom && !map[y][x].corner && h === map[y][x].height-1) {\r\n\t\t\ttile = this.render.createSlopeBlock(xPos, yPos - this.config.tileHeight, map[y][x].getTile(h), 's')\r\n\t\t} else if (map[y][x].edge.right && !map[y][x].corner && h === map[y][x].height-1) {\r\n\t\t\ttile = this.render.createSlopeBlock(xPos, yPos - this.config.tileHeight, map[y][x].getTile(h), 'e')\r\n\t\t} else if (map[y][x].edge.left && !map[y][x].corner && h === map[y][x].height-1) {\r\n\t\t\ttile = this.render.createSlopeBlock(xPos, yPos - this.config.tileHeight, map[y][x].getTile(h), 'w')\r\n\t\t} else {\r\n\t\t\ttile = this.render.createBlock(xPos, yPos - this.config.tileHeight, map[y][x].getTile(h))\t\r\n\t\t}\r\n\r\n\t\tif (map[y][x].corner && h === map[y][x].height-1) {\r\n\t\t\tif (map[y][x].edge.top && map[y][x].edge.left) {\r\n\t\t\t\ttile = this.render.createSlopeBlock(xPos, yPos - this.config.tileHeight, map[y][x].getTile(h), 'nw')\r\n\t\t\t} else if (map[y][x].edge.top && map[y][x].edge.right) {\r\n\t\t\t\ttile = this.render.createSlopeBlock(xPos, yPos - this.config.tileHeight, map[y][x].getTile(h), 'ne')\r\n\t\t\t} else if (map[y][x].edge.bottom && map[y][x].edge.left) {\r\n\t\t\t\ttile = this.render.createSlopeBlock(xPos, yPos - this.config.tileHeight, map[y][x].getTile(h), 'sw')\r\n\t\t\t} else if (map[y][x].edge.bottom && map[y][x].edge.right) {\r\n\t\t\t\ttile = this.render.createSlopeBlock(xPos, yPos - this.config.tileHeight, map[y][x].getTile(h), 'se')\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn tile\r\n\t}\r\n}\r\n","import { Color } from './mapGenerationFunctions.component'\r\n\r\nexport class Config {\r\n\r\n\tprivate _allowDebug: boolean = true\r\n\tprivate _tileWidth: number = 35\r\n\tprivate _tileLength: number = 35\r\n\tprivate _tileHeight: number = 20\r\n\tprivate _tileSmallAngle: number = 85\r\n\tprivate _tileLargeAngle: number = 100\r\n\tprivate _groundColor: Color = new Color('f5f3e5')\r\n\tprivate _buildingBaseColor: Color = new Color(\r\n\t\t115 + Math.floor(Math.random() * 75),\r\n\t\t155 + Math.floor(Math.random() * 40),\r\n\t\t150 + Math.floor(Math.random() * 30)\r\n\t)\r\n\tprivate _tileEdgeBleed: number = 0.3\r\n\tprivate _maxAllowedHeight: number = 12\r\n\r\n\tpublic get allowDebug(): boolean {\r\n\t\treturn this._allowDebug\r\n\t}\r\n\r\n\tpublic get tileWidth(): number {\r\n\t\treturn this._tileWidth\r\n\t}\r\n\r\n\tpublic get tileLength(): number {\r\n\t\treturn this._tileLength\r\n\t}\r\n\r\n\tpublic get tileHeight(): number {\r\n\t\treturn this._tileHeight\r\n\t}\r\n\r\n\tpublic get tileSmallAngle(): number {\r\n\t\treturn this._tileSmallAngle\r\n\t}\r\n\r\n\tpublic get tileLargeAngle(): number {\r\n\t\treturn this._tileLargeAngle\r\n\t}\r\n\r\n\tpublic get groundColor(): Color {\r\n\t\treturn this._groundColor\r\n\t}\r\n\r\n\tpublic get buildingBaseColor(): Color {\r\n\t\treturn this._buildingBaseColor\r\n\t}\r\n\r\n\tpublic get tileEdgeBleed(): number {\r\n\t\treturn this._tileEdgeBleed\r\n\t}\r\n\r\n\tpublic get maxAllowedHeight(): number {\r\n\t\treturn this._maxAllowedHeight\r\n\t}\r\n\r\n\tpublic getMapWidth(mapArrayWidth: number): number {\r\n\t\treturn mapArrayWidth * this._tileWidth\r\n\t}\r\n\r\n\tpublic getMapLength(mapArrayLength: number): number {\r\n\t\treturn mapArrayLength * this._tileLength\r\n\t}\r\n}\r\n\r\nexport interface Coords {\r\n\ttop?: Position,\r\n\tleft?: Position,\r\n\tbottom?: Position,\r\n\tright?: Position\r\n}\r\n\r\nexport interface TileTemplate {\r\n\thtml?: string,\r\n\tcoords?: Coords\r\n}\r\n\r\nexport interface Position {\r\n\tx?: number,\r\n\ty?: number\r\n}\r\n","import Map from './mapper.component'\r\nimport { Renderer } from './builder.component'\r\nimport { Color } from './mapGenerationFunctions.component'\r\nimport { Config } from './config.component'\r\n\r\nclass RandomBuilding {\r\n\r\n\tprivate _map: Map\r\n\tprivate _builder: Renderer = new Renderer\r\n\tprivate config: Config = new Config\r\n\r\n\tconstructor() {\r\n\t\tthis._map = new Map(20, 20, 10, 2, (4 + Math.floor(Math.random() * 7)), 2, 4, false)\r\n\t\tdocument.querySelector('body').style.background = this.config.groundColor.hex()\r\n\t}\r\n\r\n\tpublic debug(): boolean {\r\n\t\treturn this.config.allowDebug\r\n\t}\r\n\r\n\tget map() {\r\n\t\treturn this._map\r\n\t}\r\n\r\n\tpublic colorMap(): string {\r\n\t\treturn this._builder.showData(this._map) + this._builder.build2DMap(this._map)\r\n\t}\r\n\r\n\tpublic drawTileMap(): string {\r\n\t\treturn this._builder.buildMap(this._map)\r\n\t}\r\n}\r\n\r\nconst building = new RandomBuilding()\r\ndocument.querySelector('#world').innerHTML = building.colorMap()\r\n\r\ndocument.querySelector('#generate').addEventListener('click', () => {\r\n\tconst building = new RandomBuilding()\r\n\tdocument.querySelector('#world').innerHTML = building.colorMap()\r\n})\r\n\r\n/*\r\nconst color = new Color(150, 225, 116);\r\n\r\nconst colorDivs = `\r\n\t<div class=\"color__tile\" style=\"background-color: rgb(${color.getShadowsRGB().r},${color.getShadowsRGB().g},${color.getShadowsRGB().b})\"></div>\r\n\t<div class=\"color__tile\" style=\"background-color: rgb(${color.rgb().r},${color.rgb().g},${color.rgb().b})\"></div>\r\n\t<div class=\"color__tile\" style=\"background-color: rgb(${color.getHighlightsRGB().r},${color.getHighlightsRGB().g},${color.getHighlightsRGB().b})\"></div>`\r\n\r\ndocument.querySelector('#color').innerHTML = colorDivs */\r\n\r\n/*\r\ndocument.querySelector('#generate').addEventListener('click', () => {\r\n\tconst building2 = new RandomBuilding();\r\n\tdocument.querySelector(\"#world\").innerHTML = building2.drawTileMap()\r\n\tdocument.querySelector('#debugActive').classList.remove('active')\r\n\r\n\tdocument.querySelectorAll('.point').forEach((item) => {\r\n\t\titem.addEventListener('click', () => {\r\n\t\t\tconsole.log('toggled', item)\r\n\t\t\titem.parentElement.classList.toggle('active')\r\n\t\t})\t\t\r\n\t})\r\n})\r\n\r\ndocument.querySelector('#debugActive').addEventListener('click', () => {\r\n\tdocument.querySelector('#debug').classList.toggle('show')\r\n\tdocument.querySelector('#debugActive').classList.toggle('active')\r\n})\r\n\r\nconst building = new RandomBuilding();\r\ndocument.querySelector(\"#world\").innerHTML = building.drawTileMap()\r\n\r\ndocument.querySelectorAll('.blockLabel').forEach((item) => {\r\n\titem.addEventListener('click', () => {\r\n\t\titem.classList.toggle('active')\r\n\t})\r\n})\r\n\r\ndocument.querySelectorAll('.showGroups').forEach((item) => {\r\n\titem.addEventListener('click', e => {\r\n\t\te.stopPropagation()\r\n\t\tlet group = item.getAttribute('data-group')\r\n\t\tlet groups = document.querySelectorAll('.blockLabel[data-groupid=\"'+group+'\"]')\r\n\t\tgroups.forEach(point => {\r\n\t\t\tpoint.addEventListener('click', () => {\r\n\t\t\t\titem.classList.toggle('group__marker')\r\n\t\t\t})\r\n\t\t})\r\n\r\n\t})\r\n})\r\n\r\nif (!building.debug()) {\r\n\tdocument.querySelector('#debugActive').classList.add('hide')\r\n}\r\n*/\r\n\r\n","import { Config } from './config.component'\r\n\r\nexport class MapGenerationFunctions {\r\n\r\n\tprivate config: Config = new Config();\r\n\tsmallAngle = this.config.tileSmallAngle;\r\n\tlargeAngle = this.config.tileLargeAngle;\r\n\r\n\tconstructor() { }\r\n\r\n\tpublic calculateAdditionalBlockIterations(maximumBlockIterations: number) {\r\n\t\treturn 2 + Math.floor(Math.random() * maximumBlockIterations);\r\n\t}\r\n\r\n\t// calculate the dimensions to draw the isometric perspective tile with the parameters as if it were a straight square tile\r\n\tpublic calculateStraightLinesFromIsometricSquare (blockWidth: number, blockHeight: number) {\r\n\t\t// lengths this function returns when it comes to positions of longest and shortest sides as array\r\n\t\t/*           [0]\r\n\t\t *   _________________ \r\n\t\t *   |    [3]  |      |\r\n\t\t *   | [5]            |\r\n\t\t *   |               -|\r\n\t\t *   |-               | [1]\r\n\t\t *   | [4]            |\r\n\t\t *   |    [2]         |\r\n\t\t *   |_______|________|\r\n\t\t */  \r\n\r\n\t\tlet smallOuterAngle = (180 - this.smallAngle) / 2;\r\n\t\tlet largeOuterAngle = (180 - this.largeAngle) / 2;\r\n\r\n\t\tlet horizontalWidthFromBottom = this.getHorizontalBottomShortestWidth(blockWidth, smallOuterAngle);\r\n\t\tlet verticalHeightFromBottom = this.getVerticalBottomShortestHeight(horizontalWidthFromBottom, smallOuterAngle);\r\n\r\n\t\tlet horizontalWidthFromTop = this.getHorizontalTopLongestWidth(blockHeight, largeOuterAngle);\r\n\t\tlet verticalHeightFromTop = this.getVerticalTopLongestHeight(horizontalWidthFromTop, largeOuterAngle);\r\n\r\n\t\tlet totalHeight = verticalHeightFromBottom + verticalHeightFromTop;\r\n\t\tlet totalWidth = horizontalWidthFromBottom + horizontalWidthFromTop;\r\n\r\n\t\treturn {\t'totalWidth': totalWidth, // 0\r\n\t\t\t\t\t'totalHeight': totalHeight,  // 1\r\n\t\t\t\t\t'horizontalWidthFromBottom': horizontalWidthFromBottom,  // 2\r\n\t\t\t\t\t'horizontalWidthFromTop': horizontalWidthFromTop,  // 3\r\n\t\t\t\t\t'verticalHeightFromBottom': verticalHeightFromBottom,  // 4\r\n\t\t\t\t\t'verticalHeightFromTop': verticalHeightFromTop } // 5\r\n\t}\r\n\r\n\t// calculate the amount of pixels from the bottom left side of a straight square to the point at the bottom \r\n\t// .. where the tip of the tile meets the border of the square\r\n\tpublic getHorizontalBottomShortestWidth (diagonalWidth: number, smallAngle: number): number {\r\n\t\treturn diagonalWidth * Math.sin(this.toRadians(smallAngle));\r\n\t}\r\n\r\n\tpublic getVerticalBottomShortestHeight (diagonalHeight: number, smallAngle: number): number {\r\n\t\treturn diagonalHeight * Math.cos(this.toRadians(smallAngle));\r\n\t}\r\n\r\n\tpublic getHorizontalTopLongestWidth (diagonalWidth: number, largeAngle: number): number {\r\n\t\treturn diagonalWidth * Math.sin(this.toRadians(largeAngle));\r\n\t}\r\n\r\n\tpublic getVerticalTopLongestHeight (diagonalHeight: number, largeAngle: number): number {\r\n\t\treturn diagonalHeight * Math.cos(this.toRadians(largeAngle));\r\n\t}\r\n\r\n\ttoRadians (angle: number): number {\r\n\t\treturn angle * (Math.PI / 180);\r\n\t}\r\n}\r\n\r\nexport enum TileColor {\r\n\tRed = 125 + Math.floor(Math.random() * 75),\r\n\tGreen = 170 + Math.floor(Math.random() * 40),\r\n\tBlue = 180 + Math.floor(Math.random() * 30)\r\n}\r\n\r\nexport enum BuildingHeightVariations {\r\n\tTallCenter = 'tallCenter',\r\n\tTallSurrounds = 'tallSurrounds',\r\n\tRandom = 'random'\r\n}\r\n\r\nexport class Color {\r\n\tprivate _colorRgb: RGB\r\n\tprivate _colorHex: string\r\n\r\n\tconstructor(...params: any[]) {\r\n\t\tlet error = null\r\n\t\tif (params.length === 1) {\r\n\t\t\tif (typeof params[0] === 'string') {\r\n\t\t\t\tif (this.validateHex(params[0])) {\r\n\t\t\t\t\tlet hexColor = params[0]\r\n\t\t\t\t\tif (hexColor.charAt(0) !== '#') {\r\n\t\t\t\t\t\thexColor = `#${hexColor}`\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.setHex(hexColor)\r\n\t\t\t\t\tthis.hexToRgb()\r\n\t\t\t\t} else {\r\n\t\t\t\t\terror = \"Hexadecimal color is incorrect\"\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\terror = \"Length of 1 in parameters is not equal to string\"\r\n\t\t\t}\r\n\t\t} else if (params.length === 3) {\r\n\t\t\tif (this.validateRgb(params)) {\r\n\t\t\t\tthis.setRgb(params[0], params[1], params[2])\r\n\t\t\t\tthis.rgbToHex()\r\n\t\t\t} else {\r\n\t\t\t\terror = \"Values of RGB exceed limits\"\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (error !== null) {\r\n\t\t\tthrow \"Color type is incorrect. \" + error + \": \" + params.toString()\r\n\t\t}\r\n\t}\r\n\r\n\tpublic setRgb(r: number, g: number, b: number) {\r\n\t\tthis._colorRgb = {r: r, g: g, b: b} as RGB\r\n\t}\r\n\r\n\tpublic setHex(hexadecimal: string) {\r\n\t\tif (hexadecimal.length < 7) {\r\n\t\t\tlet hexVal1 = hexadecimal.charAt(1)\r\n\t\t\tlet hexVal2 = hexadecimal.charAt(2)\r\n\t\t\tlet hexVal3 = hexadecimal.charAt(3)\r\n\t\t\thexadecimal = \"#\" + hexVal1 + hexVal1 + hexVal2 + hexVal2 + hexVal3 + hexVal3\r\n\t\t}\r\n\t\tthis._colorHex = hexadecimal\r\n\t}\r\n\r\n\tpublic rgb(): RGB {\r\n\t\treturn this._colorRgb\r\n\t}\r\n\r\n\tpublic hex(): string {\r\n\t\treturn this._colorHex\r\n\t}\r\n\r\n\tvalidateRgb(rgb: number[]): boolean {\r\n\t\tif (rgb[0] > -1 && rgb[0] < 256 &&\r\n\t\t\trgb[1] > -1 && rgb[1] < 256 &&\r\n\t\t\trgb[2] > -1 && rgb[2] < 256) {\r\n\t\t\treturn true\r\n\t\t} else {\r\n\t\t\treturn false\r\n\t\t}\r\n\t}\r\n\r\n\tvalidateHex(hex: string): boolean {\r\n\t\tlet regex = /^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/\r\n\t\tif (hex.match(regex)) {\r\n\t\t\treturn true\r\n\t\t} else {\r\n\t\t\treturn false\r\n\t\t}\r\n\t}\r\n\r\n\thexToRgb() {\r\n\t\tlet hexValues: string[] = this._colorHex.substr(1).split('')\r\n\t\tlet hexPair1 = parseInt(hexValues[0]+hexValues[1], 16)\r\n\t\tlet hexPair2 = parseInt(hexValues[2]+hexValues[3], 16)\r\n\t\tlet hexPair3 = parseInt(hexValues[4]+hexValues[5], 16)\r\n\t\tthis.setRgb(hexPair1, hexPair2, hexPair3)\r\n\t\tthis.rgbToHex()\r\n\t}\r\n\r\n\trgbToHex() {\r\n\t\tif (typeof this._colorRgb === 'object') {\r\n\t\t\tlet r = this._colorRgb.r\r\n\t\t\tlet b = this._colorRgb.b\r\n\t\t\tlet g = this._colorRgb.g\r\n\t\t\tlet hexR = Number(r).toString(16)\r\n\t\t\tlet hexG = Number(g).toString(16)\r\n\t\t\tlet hexB = Number(b).toString(16)\r\n\t\t\tthis._colorHex = \"#\" + hexR + hexG + hexB\r\n\t\t}\r\n\t}\r\n\r\n\tpublic changeColorLighting(amount: number, encoding: string): string {\r\n\t\tlet r = this._colorRgb.r\r\n\t\tlet b = this._colorRgb.b\r\n\t\tlet g = this._colorRgb.g\r\n\t\tlet newR = r + amount\r\n\t\tlet newG = g + amount\r\n\t\tlet newB = b + (amount - 8)\r\n\t\tif (newR > 255) newR = 255\r\n\t\tif (newG > 255) newG = 255\r\n\t\tif (newR > 255) newR = 255\r\n\r\n\t\tlet hexR = Number(newR).toString(16)\r\n\t\tlet hexG = Number(newG).toString(16)\r\n\t\tlet hexB = Number(newB).toString(16)\r\n\t\tlet result = \"#\" + hexR + hexG + hexB\r\n\r\n\t\treturn result\r\n\t}\r\n\r\n\tpublic getLightestRGB(): RGB {\r\n\t\tlet r = this._colorRgb.r\r\n\t\tlet b = this._colorRgb.b\r\n\t\tlet g = this._colorRgb.g\r\n\t\tlet newR = r + 55\r\n\t\tlet newG = g + 55\r\n\t\tlet newB = b + 40\r\n\t\tif (newR > 255) newR = 255\r\n\t\tif (newG > 255) newG = 255\r\n\t\tif (newR > 255) newR = 255\r\n\t\treturn {r: newR, g: newG, b: newB}\r\n\t}\r\n\r\n\tpublic getHighlightsRGB(): RGB {\r\n\t\tlet r = this._colorRgb.r\r\n\t\tlet b = this._colorRgb.b\r\n\t\tlet g = this._colorRgb.g\r\n\t\tlet newR = r + 45\r\n\t\tlet newG = g + 45\r\n\t\tlet newB = b + 30\r\n\t\tif (newR > 255) newR = 255\r\n\t\tif (newG > 255) newG = 255\r\n\t\tif (newR > 255) newR = 255\r\n\t\treturn {r: newR, g: newG, b: newB}\r\n\t}\r\n\r\n\tpublic getDarkerRegularRGB(): RGB {\r\n\t\tlet r = this._colorRgb.r\r\n\t\tlet b = this._colorRgb.b\r\n\t\tlet g = this._colorRgb.g\r\n\t\tlet newR = r + 15\r\n\t\tlet newG = g + 15\r\n\t\tlet newB = b + 5\r\n\t\tif (newR > 255) newR = 255\r\n\t\tif (newG > 255) newG = 255\r\n\t\tif (newR > 255) newR = 255\r\n\t\treturn {r: newR, g: newG, b: newB}\r\n\t}\r\n\r\n\tpublic getHalflightsRGB(): RGB {\r\n\t\tlet r = this._colorRgb.r\r\n\t\tlet b = this._colorRgb.b\r\n\t\tlet g = this._colorRgb.g\r\n\t\tlet newR = r + 25\r\n\t\tlet newG = g + 25\r\n\t\tlet newB = b + 15\r\n\t\tif (newR > 255) newR = 255\r\n\t\tif (newG > 255) newG = 255\r\n\t\tif (newR > 255) newR = 255\r\n\t\treturn {r: newR, g: newG, b: newB}\r\n\t}\r\n\r\n\tpublic getShadowsRGB(): RGB {\r\n\t\tlet r = this._colorRgb.r\r\n\t\tlet b = this._colorRgb.b\r\n\t\tlet g = this._colorRgb.g\r\n\t\tlet newR = r - 55\r\n\t\tlet newG = g - 55\r\n\t\tlet newB = b - 35\r\n\t\tif (newR < 0) newR = 0\r\n\t\tif (newG < 0) newG = 0\r\n\t\tif (newR < 0) newR = 0\r\n\t\treturn {r: newR, g: newG, b: newB}\r\n\t}\r\n\r\n\tpublic getDarkestRGB(): RGB {\r\n\t\tlet r = this._colorRgb.r\r\n\t\tlet b = this._colorRgb.b\r\n\t\tlet g = this._colorRgb.g\r\n\t\tlet newR = r - 70\r\n\t\tlet newG = g - 70\r\n\t\tlet newB = b - 60\r\n\t\tif (newR < 0) newR = 0\r\n\t\tif (newG < 0) newG = 0\r\n\t\tif (newR < 0) newR = 0\r\n\t\treturn {r: newR, g: newG, b: newB}\r\n\t}\r\n}\r\n\r\nexport interface RGB {\r\n\tr: number,\r\n\tg: number,\r\n\tb: number\r\n}\r\n","import { MapGenerationFunctions, BuildingHeightVariations } from './mapGenerationFunctions.component'\r\nimport { Tile, TileType } from './tile.component'\r\nimport { Config, Position } from './config.component'\r\nimport { Primitives } from './primitives.component'\r\n\r\nexport default class Map {\r\n\r\n\tprivate _mapWidth: number\r\n\tprivate _mapLength: number\r\n\tprivate _mapMaxHeight: number\r\n\tprivate _averageBuildingSize: number\r\n\tprivate _blockHeight: number\r\n\tprivate _maximumBlockIterations: number\r\n\tprivate _additionalBlockIterations: number\r\n\tprivate _mapEdgeWidth: number\r\n\tprivate _highestPoint: number\r\n\tprivate _startBlockXfromCenterDeviation: number\r\n\tprivate _mapHalfLength: number\r\n\tprivate _world: any[][]\r\n\tprivate _blockHeightsArray: number[]\r\n\tprivate _blockGroupCollection: any[]\r\n\tprivate _blockGroups: any[]\r\n\tprivate _blockEdges: Position[]\r\n\tprivate _additionalBlockEdges: Position[]\r\n\tprivate _mapGen: MapGenerationFunctions = new MapGenerationFunctions()\r\n\tprivate config: Config = new Config()\r\n\tprivate primitives: Primitives = new Primitives()\r\n\tprivate _blockHeightVariationLabels = [BuildingHeightVariations.TallCenter, BuildingHeightVariations.TallSurrounds, BuildingHeightVariations.Random]\r\n\tprivate _blockHeightVariation = this._blockHeightVariationLabels[Math.floor(Math.random() * 3)]\r\n\tprivate _blockIdIterator: number\r\n\r\n\tconstructor(\t\r\n\t\t\tmapWidth: number, \r\n\t\t\tmapLength: number, \r\n\t\t\tmapMaxHeight: number, \r\n\t\t\tmapEdgeWidth: number,\r\n\t\t\taverageBuildingSize: number,\r\n\t\t\tblockHeight: number,\r\n\t\t\tmaximumBlockIterations: number,\r\n\t\t\tpyramid: boolean)\r\n\t{\r\n\t\tthis._mapWidth = mapWidth\r\n\t\tthis._mapLength = mapLength\r\n\t\tthis._mapMaxHeight = mapMaxHeight\r\n\t\tthis._mapEdgeWidth = mapEdgeWidth\r\n\t\tthis._averageBuildingSize = averageBuildingSize\r\n\t\tthis._blockHeight = blockHeight\r\n\t\tthis._maximumBlockIterations = maximumBlockIterations\r\n\t\tthis._additionalBlockIterations = this._mapGen.calculateAdditionalBlockIterations(maximumBlockIterations)\r\n\t\tthis._blockGroups = []\r\n\t\tthis._blockEdges = []\r\n\t\tthis._blockHeightsArray = []\r\n\t\tthis._mapHalfLength = Math.floor(mapLength / 2)\r\n\t\tthis._blockIdIterator = 0\r\n\r\n\t\tlet mapLengthHalf = Math.floor(mapLength / 2) \r\n\t\tlet mapWidthHalf = Math.floor(mapWidth / 2)\r\n\t\tlet startBlockXfromCenterDeviation = 6\r\n\t\tlet startblockLength = (this._averageBuildingSize + 1) + Math.floor(Math.random() * 6)\r\n\t\tlet startblockWidth = this._averageBuildingSize + Math.floor(Math.random() * 5)\r\n\t\tlet startblockXfromCenter = 6 + Math.floor(Math.random() * startBlockXfromCenterDeviation)\r\n\t\tlet startblockLengthHalf = Math.floor(startblockLength / 2)\r\n\t\tlet startblockWidthHalf = Math.floor(startblockWidth / 2)\r\n\t\tlet startingPositionX = Math.floor(this._mapWidth / 2) - Math.floor(startblockXfromCenter / 2)\r\n\r\n\t\tthis._world = []\r\n\t\tlet tileHeight = 0\r\n\t\tlet firstBlockHeight\r\n\r\n\t\tif (this._blockHeightVariation === BuildingHeightVariations.TallCenter) {\r\n\t\t\tfirstBlockHeight = blockHeight * 2\r\n\t\t} else if (this._blockHeightVariation === BuildingHeightVariations.TallSurrounds) {\r\n\t\t\tfirstBlockHeight = 1 + Math.round(Math.random())\r\n\t\t\tblockHeight = firstBlockHeight\r\n\t\t} else {\r\n\t\t\tfirstBlockHeight = blockHeight\r\n\t\t}\r\n\r\n\t\tfor (let y = 0; y < this.mapLength; y++) {\r\n\r\n\t\t\tthis._world[y] = []\r\n\r\n\t\t\tfor (let x = 0; x < this.mapWidth; x++) {\r\n\r\n\t\t\t\tlet thisBlockGroup = 0\r\n\r\n\t\t\t\tlet column = new Column(false, x, y, 0)\r\n\r\n\t\t\t\tif (y >= mapLengthHalf && y <= (mapLengthHalf + startblockLengthHalf) ) {\r\n\r\n\t\t\t\t\tif (x > startingPositionX && x <= (startingPositionX + startblockWidth) ) {\r\n\r\n\t\t\t\t\t\tthisBlockGroup = 1\r\n\t\t\t\t\t\tlet tileStack = []\r\n\r\n\t\t\t\t\t\tfor (let h = 0; h < firstBlockHeight; h++) {\r\n\r\n\t\t\t\t\t\t\tlet thisPillar = 0\r\n\t\t\t\t\t\t\tlet thisWindowed = 0\r\n\t\t\t\t\t\t\tlet isRoof = (h === firstBlockHeight-1) ? true : false\r\n\r\n\t\t\t\t\t\t\ttileStack.push(\r\n\t\t\t\t\t\t\t\tnew Tile(\r\n\t\t\t\t\t\t\t\t\tthis._blockIdIterator, \r\n\t\t\t\t\t\t\t\t\tx, \r\n\t\t\t\t\t\t\t\t\ty, \r\n\t\t\t\t\t\t\t\t\th, \r\n\t\t\t\t\t\t\t\t\tTileType.Body,\r\n\t\t\t\t\t\t\t\t\tthis.config.buildingBaseColor,\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t'roof':\t\t\tisRoof,\r\n\t\t\t\t\t\t\t\t\t\t'pillar': \t\tthisPillar,\r\n\t\t\t\t\t\t\t\t\t\t'windowed': \tthisWindowed,\r\n\t\t\t\t\t\t\t\t\t\t'tower': \t\tfalse\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t)\r\n\r\n\t\t\t\t\t\t\tif (this._blockGroups.indexOf(thisBlockGroup) === -1) {\r\n\t\t\t\t\t\t\t\tthis._blockGroups[thisBlockGroup] = new Array( [y,x] )\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis._blockGroups[thisBlockGroup].push([y,x])\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tthis._blockHeightsArray.push(firstBlockHeight)\r\n\r\n\t\t\t\t\t\t\tthis._blockIdIterator++\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tcolumn = new Column(true, x, y, firstBlockHeight)\r\n\r\n\t\t\t\t\t\tcolumn.blockGroup = thisBlockGroup\r\n\t\t\t\t\t\tcolumn.height = firstBlockHeight\r\n\t\t\t\t\t\tcolumn.corner = false\r\n\t\t\t\t\t\tcolumn.tileStack = tileStack\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._world[y][x] = column\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (let i = 0; i < this._additionalBlockIterations; i++) {\r\n\r\n\t\t\tconsole.log('iteration #'+i)\r\n\t\t\tthis.getEdges()\r\n\r\n\t\t\tlet randomPositionPicker = 3 + Math.ceil(Math.random() * (this._blockEdges.length / 2))\r\n\t\t\tlet thisHeight = 0\r\n\r\n\t\t\tconsole.log('this._blockEdges', this._blockEdges)\r\n\t\t\tconsole.log('randomPositionPicker', randomPositionPicker)\r\n\r\n\t\t\tif (this._blockHeightVariation === BuildingHeightVariations.TallCenter) {\r\n\t\t\t\tthisHeight = this._blockHeight - i;\r\n\t\t\t\t\r\n\t\t\t} else if (this._blockHeightVariation === BuildingHeightVariations.TallSurrounds) {\r\n\r\n\t\t\t\tthisHeight = this._blockHeight + i;\r\n\r\n\t\t\t} else if (this._blockHeightVariation === BuildingHeightVariations.Random) {\r\n\r\n\t\t\t\tthisHeight = this._blockHeight + 1;\r\n\t\t\t}\r\n\r\n\t\t\tif (thisHeight < 2) {\r\n\t\t\t\tthisHeight = 2\r\n\t\t\t} else if (thisHeight > this.config.maxAllowedHeight) {\r\n\t\t\t\tthisHeight = this.config.maxAllowedHeight\r\n\t\t\t}\r\n\r\n\t\t\tlet yPos = this._blockEdges[randomPositionPicker].x\r\n\t\t\tlet xPos = this._blockEdges[randomPositionPicker].y\r\n\r\n\t\t\tlet thisBlockLength = (this._averageBuildingSize - 2) + Math.floor(Math.random() * 4)\r\n\t\t\tlet thisBlockWidth = (this._averageBuildingSize - 2) + Math.floor(Math.random() * 4)\r\n\r\n\t\t\tfor (let y = 0; y < this._mapLength; y++) {\r\n\t\t\t\t\r\n\t\t\t\tfor (let x = 0; x < this._mapWidth; x++) {\r\n\r\n\t\t\t\t\tif (y >= (yPos - Math.floor(thisBlockLength / 2)) && \r\n\t\t\t\t\t\ty <= (yPos + Math.floor(thisBlockLength / 2)) && \r\n\t\t\t\t\t\tx >= (xPos - Math.floor(thisBlockWidth / 2)) && \r\n\t\t\t\t\t\tx <= (xPos + Math.floor(thisBlockWidth / 2)) ) {\r\n\r\n\t\t\t\t\t\tlet thisBlockGroup = i+2\r\n\t\t\t\t\t\tlet tileStack = []\r\n\r\n\t\t\t\t\t\tfor (let h = 0; h < thisHeight; h++) {\r\n\r\n\t\t\t\t\t\t\tlet thisPillar = 0\r\n\t\t\t\t\t\t\tlet thisWindowed = 0\r\n\t\t\t\t\t\t\tlet isRoof = (h === thisHeight-1) ? true : false\r\n\r\n\t\t\t\t\t\t\ttileStack.push(\r\n\t\t\t\t\t\t\t\tnew Tile(\r\n\t\t\t\t\t\t\t\t\tthis._blockIdIterator, \r\n\t\t\t\t\t\t\t\t\tx, \r\n\t\t\t\t\t\t\t\t\ty, \r\n\t\t\t\t\t\t\t\t\th, \r\n\t\t\t\t\t\t\t\t\tTileType.Body,\r\n\t\t\t\t\t\t\t\t\tthis.config.buildingBaseColor,\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t'roof':\t\t\tisRoof,\r\n\t\t\t\t\t\t\t\t\t\t'pillar': \t\tthisPillar,\r\n\t\t\t\t\t\t\t\t\t\t'windowed': \tthisWindowed,\r\n\t\t\t\t\t\t\t\t\t\t'tower': \t\tfalse\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t)\r\n\r\n\t\t\t\t\t\t\tif (this._blockGroups.indexOf(thisBlockGroup) === -1) {\r\n\t\t\t\t\t\t\t\tthis._blockGroups[thisBlockGroup] = new Array( [y,x] )\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis._blockGroups[thisBlockGroup].push([y,x])\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tthis._world[y][x] = null\r\n\r\n\t\t\t\t\t\t\tlet column = new Column(true, x, y, thisHeight)\r\n\r\n\t\t\t\t\t\t\tcolumn.blockGroup = thisBlockGroup\r\n\t\t\t\t\t\t\tcolumn.height = thisHeight\r\n\t\t\t\t\t\t\tcolumn.corner = false\r\n\t\t\t\t\t\t\tcolumn.tileStack = tileStack\r\n\r\n\t\t\t\t\t\t\tthis._blockHeightsArray.push(thisHeight)\r\n\r\n\t\t\t\t\t\t\tthis._blockIdIterator++\r\n\r\n\t\t\t\t\t\t\tthis._world[y][x] = column\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.clearMapEdges()\r\n\t\tthis.mirrorMap()\r\n\t}\r\n\r\n\tget mapWidth(): number {\r\n\t\treturn this._mapWidth\r\n\t}\r\n\r\n\tget mapLength(): number {\r\n\t\treturn this._mapLength\r\n\t}\r\n\r\n\tget map(): any[] {\r\n\t\treturn this._world\r\n\t}\r\n\r\n\tpublic getColumn(x, y): Column {\r\n\t\treturn this._world[y][x]\r\n\t}\r\n\r\n\tpublic getTiles(x, y): Tile[] {\r\n\t\treturn this._world[y][x].tileStack\r\n\t}\r\n\r\n\tpublic getTile(x, y, h): Tile {\r\n\t\treturn this._world[y][x].getTile(h)\r\n\t}\r\n\r\n\tpublic getTopTile(x, y): Tile {\r\n\t\tlet height = this._world[y][x].height\r\n\t\treturn this._world[y][x].getTile(height-1)\r\n\t}\r\n\r\n\tsetEdges(considerLowerEdges: boolean): void {\r\n\r\n\t\tfor (let y = 0; y < this.mapLength; y++) {\r\n\t\t\tfor (let x = 0; x < this.mapWidth; x++) {\r\n\t\t\t\t\r\n\t\t\t\tif (y > 0 && x > 0 && y < this.mapLength-1 && x < this.mapWidth-1 && this._world[y][x].isDefined) {\r\n\r\n\t\t\t\t\tif (considerLowerEdges) {\r\n\r\n\t\t\t\t\t\tif (this._world[y-1][x].height < this._world[y][x].height) {\r\n\t\t\t\t\t\t\tthis._world[y][x].edge.top = true\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (this._world[y+1][x].height < this._world[y][x].height) {\r\n\t\t\t\t\t\t\tthis._world[y][x].edge.bottom = true\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (this._world[y][x-1].height < this._world[y][x].height) {\r\n\t\t\t\t\t\t\tthis._world[y][x].edge.left = true\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (this._world[y][x+1].height < this._world[y][x].height) {\r\n\t\t\t\t\t\t\tthis._world[y][x].edge.right = true\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tif (!this._world[y-1][x].isDefined) {\r\n\t\t\t\t\t\t\tthis._world[y][x].edge.top = true\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (!this._world[y+1][x].isDefined) {\r\n\t\t\t\t\t\t\tthis._world[y][x].edge.bottom = true\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (!this._world[y][x-1].isDefined) {\r\n\t\t\t\t\t\t\tthis._world[y][x].edge.left = true\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (!this._world[y][x+1].isDefined) {\r\n\t\t\t\t\t\t\tthis._world[y][x].edge.right = true\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( (this._world[y][x].edge['top'] && this._world[y][x].edge['right']) ||\r\n\t\t\t\t\t\t (this._world[y][x].edge['top'] && this._world[y][x].edge['left']) ||\r\n\t\t\t\t\t\t (this._world[y][x].edge['bottom'] && this._world[y][x].edge['right']) ||\r\n\t\t\t\t\t\t (this._world[y][x].edge['bottom'] && this._world[y][x].edge['left']) ) {\r\n\t\t\t\t\t\tthis._world[y][x].corner = true\r\n\t\t\t\t\t}\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgetEdges(): void {\r\n\r\n\t\tfor (let y = 0; y < this._mapLength; y++) {\r\n\t\t\t// only check second half of map\r\n\r\n\t\t\tif (y > this._mapHalfLength + 1) {\r\n\r\n\t\t\t\tfor (let x = 0; x < this._mapWidth; x++) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (x > this._mapEdgeWidth && x < this._mapWidth - 1) {\r\n\r\n\t\t\t\t\t\tif (this._world[y][x].isDefined) {\r\n\r\n\t\t\t\t\t\t\t// if the current tile type is 0, look to the tiles around it to find the edges\r\n\t\t\t\t\t\t\tif (this._world[y][x+1].isDefined || \r\n\t\t\t\t\t\t\t\tthis._world[y][x-1].isDefined || \r\n\t\t\t\t\t\t\t\tthis._world[y-1][x].isDefined || \r\n\t\t\t\t\t\t\t\tthis._world[y-1][x+1].isDefined || \r\n\t\t\t\t\t\t\t\tthis._world[y-1][x-1].isDefined) {\r\n\r\n\t\t\t\t\t\t\t\t// push edges above the block\r\n\r\n\t\t\t\t\t\t\t\tlet pos: Position = {x: x,y: y}\r\n\r\n\t\t\t\t\t\t\t\tthis._blockEdges.push(pos)\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tclearMapEdges(): void {\r\n\r\n\t\tfor (let y = 0; y < this._mapLength; y++) {\r\n\t\t\tfor (let x = 0; x < this._mapWidth; x++) {\r\n\t\t\t\tif (x <= this._mapEdgeWidth || x >= this._mapWidth - this._mapEdgeWidth ||\r\n\t\t\t\t\ty <= this._mapEdgeWidth || y >= this._mapLength - this._mapEdgeWidth) {\r\n\t\t\t\t\tthis._world[y][x] = null\r\n\t\t\t\t\tlet column = new Column(false, x, y, 0)\r\n\t\t\t\t\tthis._world[y][x] = column\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tcreatePyramid(): void {\r\n\r\n\t\tlet pyramid = this.primitives.getPyramid()\r\n\t\tlet remainderLength = this.mapLength - pyramid.length\r\n\t\tlet remainderWidth = this.mapWidth - pyramid[0].length\r\n\t\tlet edgeX = Math.round(remainderWidth / 2)\r\n\t\tlet edgeY = Math.round(remainderLength / 2)\r\n\t\tlet row: number[] = []\r\n\t\tlet edge: number[] = []\r\n\r\n\t\tfor (let i = 0; i < this.mapWidth; i++) {\r\n\t\t\trow.push(0)\r\n\t\t}\r\n\r\n\t\tfor (let y = 0; y < pyramid.length; y++) {\r\n\t\t\tfor (let r = 0; r < edgeX; r++) {\r\n\t\t\t\tpyramid[y].unshift(0)\r\n\t\t\t\tpyramid[y].push(0)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (let y = 0; y < this.mapLength-1; y++) {\r\n\t\t\tif (y < edgeY - 1) {\r\n\t\t\t\tpyramid.unshift(row)\r\n\t\t\t} else if (y > pyramid.length + 2 - edgeY) {\r\n\t\t\t\tpyramid.push(row)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._world = pyramid\r\n\t\tlet i = 0\r\n\r\n\t\tfor (let y = 0; y < this.mapLength; y++) {\r\n\r\n\t\t\tfor (let x = 0; x < this.mapWidth; x++) {\r\n\r\n\t\t\t\tlet height = pyramid[y][x]\t\t\t\t\r\n\r\n\t\t\t\tlet column = new Column(false, x, y, 0)\r\n\r\n\t\t\t\tlet thisBlockGroup = 0\r\n\t\t\t\tlet tileStack = []\r\n\r\n\t\t\t\tif (height > 0) {\r\n\r\n\t\t\t\t\tfor (let h = 0; h < height; h++) {\r\n\r\n\t\t\t\t\t\tlet thisPillar = 0\r\n\t\t\t\t\t\tlet thisWindowed = 0\r\n\t\t\t\t\t\tlet isRoof = (h === height-1) ? true : false\r\n\r\n\t\t\t\t\t\ttileStack.push(\r\n\t\t\t\t\t\t\tnew Tile(\r\n\t\t\t\t\t\t\t\ti, \r\n\t\t\t\t\t\t\t\tx, \r\n\t\t\t\t\t\t\t\ty, \r\n\t\t\t\t\t\t\t\th, \r\n\t\t\t\t\t\t\t\tTileType.Body,\r\n\t\t\t\t\t\t\t\tthis.config.buildingBaseColor,\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t'roof':\t\t\tisRoof,\r\n\t\t\t\t\t\t\t\t\t'pillar': \t\tthisPillar,\r\n\t\t\t\t\t\t\t\t\t'windowed': \tthisWindowed,\r\n\t\t\t\t\t\t\t\t\t'tower': \t\tfalse\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t)\r\n\r\n\t\t\t\t\t\tif (this._blockGroups.indexOf(thisBlockGroup) === -1) {\r\n\t\t\t\t\t\t\tthis._blockGroups[thisBlockGroup] = new Array( [y,x] )\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis._blockGroups[thisBlockGroup].push([y,x])\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\ti++\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcolumn = new Column(true, x, y, height)\r\n\r\n\t\t\t\t\tcolumn.blockGroup = thisBlockGroup\r\n\t\t\t\t\tcolumn.height = height\r\n\t\t\t\t\tcolumn.corner = false\r\n\t\t\t\t\tcolumn.tileStack = tileStack\r\n\t\t\t\t}\t\t\t\t\r\n\r\n\t\t\t\tthis._world[y][x] = column\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tmirrorMap(): void {\r\n\r\n\t\tlet mapLengthEven = false\r\n\r\n\t\t// determine if map length is even or uneven\r\n\t\tif ((this._mapHalfLength % 2) == 0) {\r\n\t\t\tmapLengthEven = true;\r\n\t\t}\r\n\r\n\t\tlet i = 0;\r\n\r\n\t\tconsole.log('this._blockGroups', this._blockGroups)\r\n\r\n\t\tfor (let y = 0; y < this._mapHalfLength; y++) {\r\n\t\t\tif (y < this._mapHalfLength) {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\tfor (let x = 0; x < this._mapWidth; x++) {\r\n\r\n\t\t\t\t\tif (this._world[this._mapHalfLength-y-1][x].isDefined) {\r\n\r\n\t\t\t\t\t\tlet newGroupId = this._blockGroups.length + 1\r\n\r\n\t\t\t\t\t\tlet thisHeight = this._world[this._mapHalfLength-y-1][x].height\r\n\t\t\t\t\t\tlet tileStack = []\r\n\r\n\t\t\t\t\t\tfor (let h = 0; h < thisHeight; h++) {\r\n\r\n\t\t\t\t\t\t\tlet tileType = this._world[this._mapHalfLength-y-1][x].tileStack[h].type\r\n\t\t\t\t\t\t\tlet tileOptions = this._world[this._mapHalfLength-y-1][x].tileStack[h].options\r\n\r\n\t\t\t\t\t\t\ttileStack.push(\r\n\t\t\t\t\t\t\t\tnew Tile(\r\n\t\t\t\t\t\t\t\t\tthis._blockIdIterator, \r\n\t\t\t\t\t\t\t\t\tx, \r\n\t\t\t\t\t\t\t\t\ty, \r\n\t\t\t\t\t\t\t\t\th, \r\n\t\t\t\t\t\t\t\t\ttileType,\r\n\t\t\t\t\t\t\t\t\tthis.config.buildingBaseColor,\r\n\t\t\t\t\t\t\t\t\ttileOptions)\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tthis._world[y][x] = null\r\n\r\n\t\t\t\t\t\tlet column = new Column(true, x, y, thisHeight)\r\n\r\n\t\t\t\t\t\tcolumn.blockGroup = newGroupId\r\n\t\t\t\t\t\tcolumn.height = thisHeight\r\n\t\t\t\t\t\tcolumn.corner = this._world[this._mapHalfLength-y-1][x].corner\r\n\t\t\t\t\t\tcolumn.edge = this._world[this._mapHalfLength-y-1][x].edge\r\n\t\t\t\t\t\tcolumn.tileStack = tileStack\r\n\r\n\t\t\t\t\t\tthis._world[y][x] = column\r\n\r\n\t\t\t\t\t\tif (this._blockGroups.indexOf(newGroupId) === -1) {\r\n\t\t\t\t\t\t\tthis._blockGroups[newGroupId] = new Array( [y,x] )\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis._blockGroups[newGroupId].push([y,x])\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tthis._blockIdIterator++\r\n\t\t\t\t\t\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis._world[y][x] = null\r\n\t\t\t\t\t\tthis._world[y][x] = new Column(false, x, y, 0)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\tfor (var y=0; y<mapLength; y++) {\r\n\t\t\tif (y < mapLengthHalf) {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\tfor (var x=0; x<mapWidth; x++) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (world[mapLength-y-1][x].blockGroup > 0) {\r\n\t\t\t\t\t\tif (world[mapLength-y-1][x].blockGroup == 0) var thisGroup = 0;\r\n\t\t\t\t\t\tif (world[mapLength-y-1][x].blockGroup == 1) var thisGroup = 1;\r\n\t\t\t\t\t\tif (world[mapLength-y-1][x].blockGroup == 2) var thisGroup = 8;\r\n\t\t\t\t\t\tif (world[mapLength-y-1][x].blockGroup == 3) var thisGroup = 9;\r\n\t\t\t\t\t\tif (world[mapLength-y-1][x].blockGroup == 4) var thisGroup = 10;\r\n\t\t\t\t\t\tif (world[mapLength-y-1][x].blockGroup == 5) var thisGroup = 11;\r\n\t\t\t\t\t\tif (world[mapLength-y-1][x].blockGroup == 6) var thisGroup = 12;\r\n\t\t\t\t\t\tif (world[mapLength-y-1][x].blockGroup == 7) var thisGroup = 13;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar clone = {\r\n\t\t\t\t\t\t'id': i,\r\n\t\t\t\t\t\t'tileType': world[mapLength-y-1][x].tileType, \r\n\t\t\t\t\t\t'blockGroup': thisGroup,\r\n\t\t\t\t\t\t'color': world[mapLength-y-1][x].color,\r\n\t\t\t\t\t\t'groupSurface': world[mapLength-y-1][x].groupSurface,\r\n\t\t\t\t\t\t'noiseVal': world[mapLength-y-1][x].noiseVal, \r\n\t\t\t\t\t\t'height': world[mapLength-y-1][x].height, \r\n\t\t\t\t\t\t'floated': world[mapLength-y-1][x].floated, \r\n\t\t\t\t\t\t'pillar': world[mapLength-y-1][x].pillar,\r\n\t\t\t\t\t\t'marker': world[mapLength-y-1][x].marker,\r\n\t\t\t\t\t\t'edge': world[mapLength-y-1][x].edge,\r\n\t\t\t\t\t\t'windowed': world[mapLength-y-1][x].windowed\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tworld[y][x] = clone;\r\n\r\n\t\t\t\t\tif (blockGroupCollection.indexOf(thisGroup) == -1 && (thisGroup) != undefined) {\r\n\t\t\t\t\t\tblockGroupCollection.push(thisGroup);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (blockGroups.indexOf( thisGroup ) == -1) {\r\n\t\t\t\t\t\tblockGroups[ thisGroup ] = new Array( [y,x] );\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tblockGroups[ thisGroup ].push( [y,x] );\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ti++;\r\n\t\t\t\t}\t\t\r\n\t\t\t}\r\n\t\t} */\r\n\t}\r\n\r\n}\r\n\r\nclass Column {\r\n\r\n\tprivate _defined: boolean\r\n\tprivate _x: number\r\n\tprivate _y: number\r\n\tprivate _height: number\r\n\tprivate _blockGroup: number\r\n\tprivate _corner: boolean\r\n\tprivate _edge: object = { 'top': false, 'right': false, 'bottom': false, 'left': false }\r\n\tprivate _tileStack: Tile[] = []\r\n\r\n\tconstructor(private defined: boolean, private colX: number, private colY: number, private colHeight: number) {\r\n\t\tthis._defined = defined\r\n\t\tthis._x = colX\r\n\t\tthis._y = colY\r\n\t\tthis._height = colHeight\r\n\t}\r\n\r\n\tset x(x: number) {\r\n\t\tthis._x = x\r\n\t}\r\n\r\n\tset y(y: number) {\r\n\t\tthis._y = y\r\n\t}\r\n\r\n\tset height(height: number) {\r\n\t\tthis._height = height\r\n\t}\r\n\r\n\tset blockGroup(groupNum: number) {\r\n\t\tthis._blockGroup = groupNum\r\n\t}\r\n\r\n\tset corner(corner: boolean) {\r\n\t\tthis._corner = corner\r\n\t}\r\n\r\n\tset edge(edge: object) {\r\n\t\tthis._edge = edge\r\n\t}\r\n\r\n\tset tileStack(tiles: Tile[]) {\r\n\t\tthis._tileStack = tiles\r\n\t}\r\n\r\n\tget isDefined(): boolean {\r\n\t\treturn this._defined\r\n\t}\r\n\r\n\tget x(): number {\r\n\t\treturn this._x\r\n\t}\r\n\r\n\tget y(): number {\r\n\t\treturn this._y\r\n\t}\r\n\r\n\tget height(): number {\r\n\t\treturn this._height\r\n\t}\r\n\r\n\tget blockGroup(): number {\r\n\t\treturn this._blockGroup\r\n\t}\r\n\r\n\tget corner(): boolean {\r\n\t\treturn this._corner\r\n\t}\r\n\r\n\tget edge(): object {\r\n\t\treturn this._edge\r\n\t}\r\n\r\n\tget tileStack(): Tile[] {\r\n\t\treturn this._tileStack\r\n\t}\r\n\r\n\tpublic getTile(height: number): Tile {\r\n\t\treturn this._tileStack[height]\r\n\t}\r\n}\r\n","export class Primitives {\r\n\r\n\tgetPyramid(): number[][] {\r\n\r\n\t\treturn [\r\n\t\t\t\t[0,0,0,0,0,0,0,0,0,0,0,0],\r\n\t\t\t\t[0,1,1,1,1,1,1,1,1,1,1,0],\r\n\t\t\t\t[0,1,2,2,2,2,2,2,2,2,1,0],\r\n\t\t\t\t[0,1,2,3,3,3,3,3,3,2,1,0],\r\n\t\t\t\t[0,1,2,3,4,4,4,4,3,2,1,0],\r\n\t\t\t\t[0,1,2,3,4,5,5,4,3,2,1,0],\r\n\t\t\t\t[0,1,2,3,4,5,5,4,3,2,1,0],\r\n\t\t\t\t[0,1,2,3,4,4,4,4,3,2,1,0],\r\n\t\t\t\t[0,1,2,3,3,3,3,3,3,2,1,0],\r\n\t\t\t\t[0,1,2,2,2,2,2,2,2,2,1,0],\r\n\t\t\t\t[0,1,1,1,1,1,1,1,1,1,1,0],\r\n\t\t\t\t[0,0,0,0,0,0,0,0,0,0,0,0],\r\n\t\t\t]\r\n\t}\r\n}","import { Config, Coords, TileTemplate, Position } from './config.component'\r\nimport { MapGenerationFunctions, Color } from './mapGenerationFunctions.component'\r\nimport { Tile, TileType } from './tile.component'\r\n\r\nexport class RenderElements {\r\n\r\n\tprivate config: Config = new Config()\r\n\tprivate calculations: MapGenerationFunctions = new MapGenerationFunctions()\r\n\r\n\tprivate tileW: number = this.config.tileWidth\r\n\tprivate tileL: number = this.config.tileLength\r\n\tprivate tileH: number = this.config.tileHeight\r\n\tprivate bleed: number = this.config.tileEdgeBleed\r\n\tprivate dimensions = this.calculations.calculateStraightLinesFromIsometricSquare(this.tileW, this.tileL)\r\n\r\n\tprivate tileColor: string = this.config.groundColor.hex()\r\n\tprivate regularColor: string = this.config.buildingBaseColor.hex()\r\n\t/*\r\n\tprivate regularDarkerColor: string = `rgb(${this.config.buildingBaseColor.getDarkerRegularRGB().r},${this.config.buildingBaseColor.getDarkerRegularRGB().g},${this.config.buildingBaseColor.getDarkerRegularRGB().b})`\r\n\tprivate highlightColor: string = `rgb(${this.config.buildingBaseColor.getHighlightsRGB().r},${this.config.buildingBaseColor.getHighlightsRGB().g},${this.config.buildingBaseColor.getHighlightsRGB().b})`\r\n\tprivate shadowColor: string = `rgb(${this.config.buildingBaseColor.getShadowsRGB().r},${this.config.buildingBaseColor.getShadowsRGB().g},${this.config.buildingBaseColor.getShadowsRGB().b})`\r\n\tprivate halflightColor: string = `rgb(${this.config.buildingBaseColor.getHalflightsRGB().r},${this.config.buildingBaseColor.getHalflightsRGB().g},${this.config.buildingBaseColor.getHalflightsRGB().b})`\r\n\tprivate darkestColor: string = `rgb(${this.config.buildingBaseColor.getDarkestRGB().r},${this.config.buildingBaseColor.getDarkestRGB().g},${this.config.buildingBaseColor.getDarkestRGB().b})`\r\n\tprivate lightestColor: string = `rgb(${this.config.buildingBaseColor.getLightestRGB().r},${this.config.buildingBaseColor.getLightestRGB().g},${this.config.buildingBaseColor.getLightestRGB().b})`\r\n\t*/\r\n\r\n\tprivate regularDarkerColor: string = this.config.buildingBaseColor.changeColorLighting(-10, 'hex')\r\n\tprivate regularLighterColor: string = this.config.buildingBaseColor.changeColorLighting(10, 'hex')\r\n\tprivate shadowLight: string = this.config.buildingBaseColor.changeColorLighting(-20, 'hex')\r\n\tprivate shadowHighlight: string = this.config.buildingBaseColor.changeColorLighting(20, 'hex')\r\n\tprivate shadow: string = this.config.buildingBaseColor.changeColorLighting(-30, 'hex')\r\n\tprivate highlight: string = this.config.buildingBaseColor.changeColorLighting(30, 'hex')\r\n\tprivate almostDarkestColor: string = this.config.buildingBaseColor.changeColorLighting(-40, 'hex')\r\n\tprivate almostLightestColor: string = this.config.buildingBaseColor.changeColorLighting(40, 'hex')\r\n\tprivate darkestColor: string = this.config.buildingBaseColor.changeColorLighting(-50, 'hex')\r\n\tprivate lightestColor: string = this.config.buildingBaseColor.changeColorLighting(50, 'hex')\r\n\r\n\r\n\tcreateTile(xPos: number, yPos: number): TileTemplate {\r\n\r\n\t\tlet top: Position = { \"x\": (xPos + this.dimensions.horizontalWidthFromTop), \"y\": yPos}\r\n\t\tlet left: Position = { \"x\": xPos, \"y\": (yPos + this.dimensions.verticalHeightFromTop) }\r\n\t\tlet bottom: Position = { \"x\": (xPos + this.dimensions.horizontalWidthFromBottom), \"y\": (yPos + this.dimensions.totalHeight) }\r\n\t\tlet right: Position = { \"x\": (xPos + this.dimensions.totalWidth), \"y\": (yPos + this.dimensions.verticalHeightFromBottom) }\r\n\r\n\t\tlet pointTop = `${top.x} ${top.y-this.bleed}`\r\n\t\tlet pointLeft = `${left.x-this.bleed} ${left.y}`\r\n\t\tlet pointBottom = `${bottom.x} ${bottom.y+this.bleed}`\r\n\t\tlet pointRight = `${right.x+this.bleed} ${right.y}`\r\n\r\n\t\tvar html = `<path fill=\"${this.tileColor}\"\r\n\t\t\t\t\td=\"M${pointLeft} \r\n\t\t\t\t\tL${pointBottom} \r\n\t\t\t\t\tL${pointRight} \r\n\t\t\t\t\tL${pointTop} \r\n\t\t\t\t\tL${pointLeft} Z\" />`\r\n\r\n\t\tlet coords: Coords = { \"top\": top, \"left\": left, \"bottom\": bottom, \"right\": right }\r\n\r\n\t\treturn { html: html, coords: coords }\r\n\t}\r\n\r\n\tcreateBlock(xPos: number, yPos: number, tile: Tile): TileTemplate {\r\n\r\n\t\tlet id = tile.id\r\n\t\tlet height = (tile.h * this.tileH) - this.tileH\r\n\r\n\t\tlet top: Position = { \"x\": Math.ceil(xPos + this.dimensions.horizontalWidthFromTop), \"y\": Math.ceil(yPos) }\r\n\t\tlet left: Position = { \"x\": Math.ceil(xPos), \"y\": Math.ceil(yPos + this.dimensions.verticalHeightFromTop) }\r\n\t\tlet bottom: Position = { \"x\": Math.ceil(xPos + this.dimensions.horizontalWidthFromBottom), \"y\": Math.ceil(yPos + this.dimensions.totalHeight) }\r\n\t\tlet right: Position = { \"x\": Math.ceil(xPos + this.dimensions.totalWidth), \"y\": Math.ceil(yPos + this.dimensions.verticalHeightFromBottom) }\r\n\r\n\t\tlet leftWallLeftTop = `${left.x-this.bleed} ${left.y-height-this.tileH}`\r\n\t\tlet leftWallLeftBottom = `${left.x-this.bleed} ${left.y-height+this.bleed}`\r\n\t\tlet leftWallRightBottom = `${bottom.x} ${bottom.y-height+this.bleed}`\r\n\t\tlet leftWallRightTop = `${bottom.x} ${bottom.y-height-this.tileH}`\r\n\r\n\t\tlet rightWallLeftTop = `${bottom.x} ${bottom.y-height-this.tileH}`\r\n\t\tlet rightWallLeftBottom = `${bottom.x} ${bottom.y-height+this.bleed}`\r\n\t\tlet rightWallRightBottom = `${right.x+this.bleed} ${right.y-height+this.bleed}`\r\n\t\tlet rightWallRightTop = `${right.x+this.bleed} ${right.y-height-this.tileH}`\r\n\r\n\t\tlet blockTopLeft = `${left.x-this.bleed} ${left.y-height-this.tileH}`\r\n\t\tlet blockTopBottom = `${bottom.x} ${bottom.y-height-this.tileH}`\r\n\t\tlet blockTopRight = `${right.x+this.bleed} ${right.y-height-this.tileH}`\r\n\t\tlet blockTopTop = `${top.x} ${top.y-height-this.tileH}`\r\n\r\n\t\tlet html = `<g style=\"z-index:${id};\"><path fill=\"${this.darkestColor}\"\r\n\t\t\t\t\td=\"M${leftWallLeftTop} \r\n\t\t\t\t\tL${leftWallLeftBottom} \r\n\t\t\t\t\tL${leftWallRightBottom} \r\n\t\t\t\t\tL${leftWallRightTop} \r\n\t\t\t\t\tL${leftWallLeftTop} Z\" />\r\n\t\t\t\t\t<path fill=\"${this.regularColor}\"\r\n\t\t\t\t\td=\"M${rightWallLeftTop} \r\n\t\t\t\t\tL${rightWallLeftBottom} \r\n\t\t\t\t\tL${rightWallRightBottom} \r\n\t\t\t\t\tL${rightWallRightTop} \r\n\t\t\t\t\tL${rightWallLeftTop} Z\" />\r\n\t\t\t\t\t<path fill=\"${this.highlight}\"\r\n\t\t\t\t\td=\"M${blockTopLeft} \r\n\t\t\t\t\tL${blockTopBottom} \r\n\t\t\t\t\tL${blockTopRight} \r\n\t\t\t\t\tL${blockTopTop} \r\n\t\t\t\t\tL${blockTopLeft} Z\" /></g>`\r\n\r\n\t\tlet coords: Coords = { \"top\": top, \"left\": left, \"bottom\": bottom, \"right\": right }\r\n\r\n\t\treturn { html: html, coords: coords }\r\n\t}\r\n\r\n\tcreateSlopeBlock(xPos: number, yPos: number, tile: Tile, slopeDirection: string): TileTemplate {\r\n\r\n\t\tlet id = tile.id\r\n\t\tlet height = (tile.h * this.tileH) - this.tileH\r\n\r\n\t\tlet top: Position = { \"x\": Math.ceil(xPos + this.dimensions.horizontalWidthFromTop), \"y\": Math.ceil(yPos) }\r\n\t\tlet left: Position = { \"x\": Math.ceil(xPos), \"y\": Math.ceil(yPos + this.dimensions.verticalHeightFromTop) }\r\n\t\tlet bottom: Position = { \"x\": Math.ceil(xPos + this.dimensions.horizontalWidthFromBottom), \"y\": Math.ceil(yPos + this.dimensions.totalHeight) }\r\n\t\tlet right: Position = { \"x\": Math.ceil(xPos + this.dimensions.totalWidth), \"y\": Math.ceil(yPos + this.dimensions.verticalHeightFromBottom) }\r\n\r\n\t\tlet html = ''\r\n\t\tlet coords: Coords = { \"top\": top, \"left\": left, \"bottom\": bottom, \"right\": right }\r\n\r\n\t\tif (slopeDirection === 'n') {\r\n\r\n\t\t\tlet leftWallLeftTop = `${left.x-this.bleed} ${left.y-height-this.tileH}`\r\n\t\t\tlet leftWallLeftBottom = `${left.x-this.bleed} ${left.y-height+this.bleed}`\r\n\t\t\tlet leftWallRightBottom = `${bottom.x} ${bottom.y-height+this.bleed}`\r\n\t\t\tlet leftWallRightTop = `${bottom.x} ${bottom.y-height-this.tileH}`\r\n\r\n\t\t\tlet rightWallLeftTop = `${bottom.x} ${bottom.y-height-this.tileH}`\r\n\t\t\tlet rightWallLeftBottom = `${bottom.x} ${bottom.y-height+this.bleed}`\r\n\t\t\tlet rightWallRightBottom = `${right.x+this.bleed} ${right.y-height+this.bleed}`\r\n\r\n\t\t\tlet blockTopLeft = `${left.x-this.bleed} ${left.y-height-this.tileH}`\r\n\t\t\tlet blockTopBottom = `${bottom.x} ${bottom.y-height-this.tileH}`\r\n\t\t\tlet blockTopRight = `${right.x+this.bleed} ${right.y-height+this.bleed}`\r\n\t\t\tlet blockTopTop = `${top.x} ${top.y-height}`\r\n\r\n\t\t\thtml = `<g style=\"z-index:${id};\">\r\n\t\t\t\t\t\t\t<path fill=\"${this.shadow}\"\r\n\t\t\t\t\t\t\td=\"M${leftWallLeftTop} \r\n\t\t\t\t\t\t\tL${leftWallLeftBottom} \r\n\t\t\t\t\t\t\tL${leftWallRightBottom} \r\n\t\t\t\t\t\t\tL${leftWallRightTop} \r\n\t\t\t\t\t\t\tL${leftWallLeftTop} Z\" />\r\n\t\t\t\t\t\t\t<path fill=\"${this.regularColor}\"\r\n\t\t\t\t\t\t\td=\"M${rightWallLeftTop}\r\n\t\t\t\t\t\t\tL${rightWallLeftBottom}\r\n\t\t\t\t\t\t\tL${rightWallRightBottom}\r\n\t\t\t\t\t\t\tL${rightWallLeftTop} Z\" />\r\n\t\t\t\t\t\t\t<path fill=\"${this.lightestColor}\"\r\n\t\t\t\t\t\t\td=\"M${blockTopLeft}\r\n\t\t\t\t\t\t\tL${blockTopBottom}\r\n\t\t\t\t\t\t\tL${blockTopRight}\r\n\t\t\t\t\t\t\tL${blockTopTop}\r\n\t\t\t\t\t\t\tL${blockTopLeft} Z\" />\r\n\t\t\t\t\t\t</g>`\r\n\t\t}\r\n\r\n\t\tif (slopeDirection === 'nw') {\r\n\r\n\t\t\tconsole.log('northwest')\r\n\r\n\t\t\tlet leftWallLeftTop = `${left.x-this.bleed} ${left.y-height}`\r\n\t\t\tlet leftWallLeftBottom = `${left.x-this.bleed} ${left.y-height+this.bleed}`\r\n\t\t\tlet leftWallRightBottom = `${bottom.x} ${bottom.y-height-this.tileH+this.bleed}`\r\n\r\n\t\t\tlet blockTopLeft = `${left.x-this.bleed} ${left.y-height+this.bleed}`\r\n\t\t\tlet blockTopBottom = `${bottom.x} ${bottom.y-height-this.tileH+this.bleed}`\r\n\t\t\tlet blockTopTop = `${top.x} ${top.y-height}`\r\n\r\n\t\t\tlet blockRightBottom = `${bottom.x} ${bottom.y-height-this.tileH}`\r\n\t\t\tlet blockRightRight = `${right.x+this.bleed} ${right.y-height+this.bleed}`\r\n\t\t\tlet blockRightTop = `${top.x} ${top.y-height}`\r\n\r\n\t\t\thtml = `<g style=\"z-index:${id};\">\r\n\t\t\t\t\t\t\t<path fill=\"${this.darkestColor}\"\r\n\t\t\t\t\t\t\td=\"M${leftWallLeftTop}\r\n\t\t\t\t\t\t\tL${leftWallLeftBottom}\r\n\t\t\t\t\t\t\tL${leftWallRightBottom}\r\n\t\t\t\t\t\t\tL${leftWallLeftTop} Z\" />\r\n\t\t\t\t\t\t\t<path fill=\"${this.regularDarkerColor}\"\r\n\t\t\t\t\t\t\td=\"M${blockTopLeft}\r\n\t\t\t\t\t\t\tL${blockTopBottom}\r\n\t\t\t\t\t\t\tL${blockTopTop}\r\n\t\t\t\t\t\t\tL${blockTopLeft} Z\" />\r\n\t\t\t\t\t\t\t<path fill=\"${this.lightestColor}\"\r\n\t\t\t\t\t\t\td=\"M${blockRightBottom}\r\n\t\t\t\t\t\t\tL${blockRightRight}\r\n\t\t\t\t\t\t\tL${blockRightTop}\r\n\t\t\t\t\t\t\tL${blockRightBottom} Z\" />\r\n\t\t\t\t\t\t</g>`\r\n\t\t}\r\n\r\n\t\tif (slopeDirection === 's') {\r\n\r\n\t\t\tlet rightWallLeftBottom = `${bottom.x} ${bottom.y-height+this.bleed}`\r\n\t\t\tlet rightWallRightBottom = `${right.x+this.bleed} ${right.y-height+this.bleed}`\r\n\t\t\tlet rightWallRightTop = `${right.x+this.bleed} ${right.y-height-this.tileH}`\r\n\r\n\t\t\tlet blockTopLeft = `${left.x-this.bleed} ${left.y-height+this.bleed}`\r\n\t\t\tlet blockTopBottom = `${bottom.x} ${bottom.y-height+this.bleed}`\r\n\t\t\tlet blockTopRight = `${right.x+this.bleed} ${right.y-height-this.tileH+this.bleed}`\r\n\t\t\tlet blockTopTop = `${top.x} ${top.y-height-this.tileH}`\r\n\r\n\t\t\thtml = `<g style=\"z-index:${id};\">\r\n\t\t\t\t\t\t\t<path fill=\"${this.regularColor}\"\r\n\t\t\t\t\t\t\td=\"M${rightWallLeftBottom}\r\n\t\t\t\t\t\t\tL${rightWallRightBottom}\r\n\t\t\t\t\t\t\tL${rightWallRightTop}\r\n\t\t\t\t\t\t\tL${rightWallLeftBottom} Z\" />\r\n\t\t\t\t\t\t\t<path fill=\"${this.shadow}\"\r\n\t\t\t\t\t\t\td=\"M${blockTopLeft}\r\n\t\t\t\t\t\t\tL${blockTopBottom}\r\n\t\t\t\t\t\t\tL${blockTopRight}\r\n\t\t\t\t\t\t\tL${blockTopTop}\r\n\t\t\t\t\t\t\tL${blockTopLeft} Z\" />\r\n\t\t\t\t\t\t</g>`\r\n\t\t}\r\n\r\n\t\tif (slopeDirection === 'se') {\r\n\r\n\t\t\tlet blockLeftLeft = `${left.x-this.bleed} ${left.y-height+this.bleed}`\r\n\t\t\tlet blockLeftBottom = `${bottom.x} ${bottom.y-height+this.bleed}`\r\n\t\t\tlet blockLeftTop = `${top.x} ${top.y-height-this.tileH}`\r\n\r\n\t\t\tlet blockRightBottom = `${bottom.x} ${bottom.y-height+this.bleed}`\r\n\t\t\tlet blockRightRight = `${right.x+this.bleed} ${right.y-height+this.bleed}`\r\n\t\t\tlet blockRightTop = `${top.x} ${top.y-height-this.tileH}`\r\n\r\n\t\t\thtml = `<g style=\"z-index:${id};\">\r\n\t\t\t\t\t\t<path fill=\"${this.shadow}\"\r\n\t\t\t\t\t\td=\"M${blockLeftLeft}\r\n\t\t\t\t\t\tL${blockLeftBottom}\r\n\t\t\t\t\t\tL${blockLeftTop}\r\n\t\t\t\t\t\tL${blockLeftLeft} Z\" />\r\n\t\t\t\t\t\t<path fill=\"${this.regularDarkerColor}\"\r\n\t\t\t\t\t\td=\"M${blockRightRight}\r\n\t\t\t\t\t\tL${blockRightBottom}\r\n\t\t\t\t\t\tL${blockRightTop}\r\n\t\t\t\t\t\tL${blockRightRight} Z\" />\r\n\t\t\t\t\t</g>`\r\n\t\t}\r\n\r\n\t\tif (slopeDirection === 'e') {\r\n\r\n\t\t\tlet leftWallLeftTop = `${left.x-this.bleed} ${left.y-height-this.tileH}`\r\n\t\t\tlet leftWallLeftBottom = `${left.x-this.bleed} ${left.y-height+this.bleed}`\r\n\t\t\tlet leftWallRightBottom = `${bottom.x} ${bottom.y-height+this.bleed}`\r\n\r\n\t\t\tlet blockTopLeft = `${left.x-this.bleed} ${left.y-height-this.tileH+this.bleed}`\r\n\t\t\tlet blockTopBottom = `${bottom.x} ${bottom.y-height+this.bleed}`\r\n\t\t\tlet blockTopRight = `${right.x+this.bleed} ${right.y-height+this.bleed}`\r\n\t\t\tlet blockTopTop = `${top.x} ${top.y-height-this.tileH}`\r\n\r\n\t\t\thtml = `<g style=\"z-index:${id};\">\r\n\t\t\t\t\t\t\t<path fill=\"${this.darkestColor}\"\r\n\t\t\t\t\t\t\td=\"M${leftWallLeftTop}\r\n\t\t\t\t\t\t\tL${leftWallLeftBottom}\r\n\t\t\t\t\t\t\tL${leftWallRightBottom}\r\n\t\t\t\t\t\t\tL${leftWallLeftTop} Z\" />\r\n\t\t\t\t\t\t\t<path fill=\"${this.regularDarkerColor}\"\r\n\t\t\t\t\t\t\td=\"M${blockTopLeft}\r\n\t\t\t\t\t\t\tL${blockTopBottom}\r\n\t\t\t\t\t\t\tL${blockTopRight}\r\n\t\t\t\t\t\t\tL${blockTopTop}\r\n\t\t\t\t\t\t\tL${blockTopLeft} Z\" />\r\n\t\t\t\t\t\t</g>`\r\n\t\t}\r\n\r\n\t\tif (slopeDirection === 'ne') {\r\n\r\n\t\t\tlet leftWallLeftTop = `${left.x-this.bleed} ${left.y-height-this.tileH}`\r\n\t\t\tlet leftWallLeftBottom = `${left.x-this.bleed} ${left.y-height+this.bleed}`\r\n\t\t\tlet leftWallRightBottom = `${bottom.x} ${bottom.y-height+this.bleed}`\r\n\r\n\t\t\tlet blockBottomLeft = `${left.x-this.bleed} ${left.y-height-this.tileH+this.bleed}`\r\n\t\t\tlet blockBottomRight = `${right.x+this.bleed} ${right.y-height+this.bleed}`\r\n\t\t\tlet blockBottomTop = `${top.x} ${top.y-height}`\r\n\r\n\t\t\tlet blockTopLeft = `${left.x-this.bleed} ${left.y-height-this.tileH+this.bleed}`\r\n\t\t\tlet blockTopBottom = `${bottom.x} ${bottom.y-height+this.bleed}`\r\n\t\t\tlet blockTopRight = `${right.x+this.bleed} ${right.y-height+this.bleed}`\r\n\r\n\t\t\thtml = `<g style=\"z-index:${id};\">\r\n\t\t\t\t\t\t<path fill=\"${this.darkestColor}\"\r\n\t\t\t\t\t\td=\"M${leftWallLeftTop}\r\n\t\t\t\t\t\tL${leftWallLeftBottom}\r\n\t\t\t\t\t\tL${leftWallRightBottom}\r\n\t\t\t\t\t\tL${leftWallLeftTop} Z\" />\r\n\t\t\t\t\t\t<path fill=\"${this.regularDarkerColor}\"\r\n\t\t\t\t\t\td=\"M${blockTopLeft}\r\n\t\t\t\t\t\tL${blockTopBottom}\r\n\t\t\t\t\t\tL${blockTopRight}\r\n\t\t\t\t\t\tL${blockTopLeft} Z\" />\r\n\t\t\t\t\t\t<path fill=\"${this.lightestColor}\"\r\n\t\t\t\t\t\td=\"M${blockBottomLeft}\r\n\t\t\t\t\t\tL${blockBottomTop}\r\n\t\t\t\t\t\tL${blockBottomRight}\r\n\t\t\t\t\t\tL${blockBottomLeft} Z\" />\r\n\t\t\t\t\t</g>`\r\n\t\t}\r\n\r\n\t\tif (slopeDirection === 'w') {\r\n\r\n\t\t\tlet leftWallLeftTop = `${left.x-this.bleed} ${left.y-height}`\r\n\t\t\tlet leftWallLeftBottom = `${left.x-this.bleed} ${left.y-height+this.bleed}`\r\n\t\t\tlet leftWallRightBottom = `${bottom.x} ${bottom.y-height-this.tileH+this.bleed}`\r\n\r\n\t\t\tlet blockTopLeft = `${left.x-this.bleed} ${left.y-height+this.bleed}`\r\n\t\t\tlet blockTopBottom = `${bottom.x} ${bottom.y-height-this.tileH+this.bleed}`\r\n\t\t\tlet blockTopRight = `${right.x+this.bleed} ${right.y-height-this.tileH+this.bleed}`\r\n\t\t\tlet blockTopTop = `${top.x} ${top.y-height}`\r\n\r\n\t\t\thtml = `<g style=\"z-index:${id};\">\r\n\t\t\t\t\t\t\t<path fill=\"${this.darkestColor}\"\r\n\t\t\t\t\t\t\td=\"M${leftWallLeftTop}\r\n\t\t\t\t\t\t\tL${leftWallLeftBottom}\r\n\t\t\t\t\t\t\tL${leftWallRightBottom}\r\n\t\t\t\t\t\t\tL${leftWallLeftTop} Z\" />\r\n\t\t\t\t\t\t\t<path fill=\"${this.regularDarkerColor}\"\r\n\t\t\t\t\t\t\td=\"M${blockTopLeft}\r\n\t\t\t\t\t\t\tL${blockTopBottom}\r\n\t\t\t\t\t\t\tL${blockTopRight}\r\n\t\t\t\t\t\t\tL${blockTopTop}\r\n\t\t\t\t\t\t\tL${blockTopLeft} Z\" />\r\n\t\t\t\t\t\t</g>`\r\n\t\t}\r\n\r\n\t\tif (slopeDirection === 'sw') {\r\n\r\n\t\t\tlet rightWallLeftBottom = `${bottom.x} ${bottom.y-height+this.bleed}`\r\n\t\t\tlet rightWallRightBottom = `${right.x+this.bleed} ${right.y-height+this.bleed}`\r\n\t\t\tlet rightWallRightTop = `${right.x+this.bleed} ${right.y-height-this.tileH}`\r\n\r\n\t\t\tlet blockTopLeft = `${left.x-this.bleed} ${left.y-height+this.bleed}`\r\n\t\t\tlet blockTopBottom = `${bottom.x} ${bottom.y-height+this.bleed}`\r\n\t\t\tlet blockTopRight = `${right.x+this.bleed} ${right.y-height-this.tileH+this.bleed}`\r\n\t\t\tlet blockTopTop = `${top.x} ${top.y-height}`\r\n\r\n\t\t\thtml = `<g style=\"z-index:${id};\">\r\n\t\t\t\t\t\t\t<path fill=\"${this.regularColor}\"\r\n\t\t\t\t\t\t\td=\"M${rightWallLeftBottom}\r\n\t\t\t\t\t\t\tL${rightWallRightBottom}\r\n\t\t\t\t\t\t\tL${rightWallRightTop}\r\n\t\t\t\t\t\t\tL${rightWallLeftBottom} Z\" />\r\n\t\t\t\t\t\t\t<path fill=\"${this.regularDarkerColor}\"\r\n\t\t\t\t\t\t\td=\"M${blockTopLeft}\r\n\t\t\t\t\t\t\tL${blockTopTop}\r\n\t\t\t\t\t\t\tL${blockTopRight}\r\n\t\t\t\t\t\t\tL${blockTopLeft} Z\" />\r\n\t\t\t\t\t\t\t<path fill=\"${this.shadow}\"\r\n\t\t\t\t\t\t\td=\"M${blockTopLeft}\r\n\t\t\t\t\t\t\tL${blockTopBottom}\r\n\t\t\t\t\t\t\tL${blockTopRight}\r\n\t\t\t\t\t\t\tL${blockTopLeft} Z\" />\r\n\t\t\t\t\t\t</g>`\r\n\t\t}\r\n\r\n\t\treturn { html: html, coords: coords }\r\n\t}\r\n}","import { Color } from './mapGenerationFunctions.component'\r\n\r\nexport class Tile {\r\n\t\r\n\t_id: number\r\n\t_x: number\r\n\t_y: number\r\n\t_h: number\r\n\t_tileType: TileType\r\n\t_tileColor: Color\r\n\t_options?: object = {}\r\n\r\n\tconstructor(\t\t\t\r\n\t\t\tid: number,\r\n\t\t\tx: number,\r\n\t\t\ty: number,\r\n\t\t\th: number,\r\n\t\t\ttileType: TileType,\r\n\t\t\ttileColor: Color,\r\n\t\t\toptions?: object)\r\n\t{\r\n\t\tthis._id = id\r\n\t\tthis._x = x\r\n\t\tthis._y = y\r\n\t\tthis._h = h\r\n\t\tthis._tileType = tileType\r\n\t\tthis._tileColor = tileColor\r\n\r\n\t\tif (options) {\r\n\t\t\tthis._options = options\r\n\t\t}\r\n\t}\r\n\r\n\tget id(): number {\r\n\t\treturn this._id\r\n\t}\r\n\r\n\tget x(): number {\r\n\t\treturn this._x\r\n\t}\r\n\r\n\tget y(): number {\r\n\t\treturn this._y\r\n\t}\r\n\r\n\tget h(): number {\r\n\t\treturn this._h\r\n\t}\r\n\r\n\tget type(): TileType {\r\n\t\treturn this._tileType\r\n\t}\r\n\r\n\tget options(): object {\r\n\t\tif (this._tileType != TileType.None) {\r\n\t\t\treturn this._options\r\n\t\t} else {\r\n\t\t\treturn { 'defined': false }\r\n\t\t}\r\n\t}\r\n\r\n\tpublic getColor(): Color {\r\n\t\treturn this._tileColor\r\n\t}\r\n\r\n}\r\n\r\nexport enum TileType {\r\n\tNone = 'none',\r\n\tBody = 'body',\r\n\tTower = 'tower',\r\n\tRoof = 'roof'\r\n}\r\n"]}
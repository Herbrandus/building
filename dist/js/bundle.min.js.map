{"version":3,"sources":["node_modules/browser-pack/_prelude.js","bundle.min.js","src/ts/builder.component.ts","src/ts/config.component.ts","src/ts/main.ts","src/ts/mapGenerationFunctions.component.ts","src/ts/mapper.component.ts","src/ts/tile.component.ts"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","Object","defineProperty","value","mapGenerationFunctions_component_1","config_component_1","Renderer","[object Object]","this","config","Config","calculations","MapGenerationFunctions","map","html","mapWidth","mapLength","tileWidth","tileLength","htmlMap","getMapWidth","y","x","getColumn","isDefined","tile","getTopTile","tileTopColor","getColor","rgb","id","mapToBuild","mapTotalWidth","mapTotalLength","testTile","createTile","yDeviation","coords","bottom","top","right","left","tileHalfWidthLeft","tileHalfWidthRight","tileHalfLengthTop","mapLengthTop","mapLengthBottom","mapWidthPx","Math","round","mapLengthPx","console","log","lastTile","startTileX","thisPosY","thisPosX","newTile","newData","h","height","createBlock","tileHeight","getTile","xPos","yPos","tileW","tileL","bleed","tileEdgeBleed","tileColor","groundColor","hex","dimensions","calculateStraightLinesFromIsometricSquare","horizontalWidthFromTop","verticalHeightFromTop","horizontalWidthFromBottom","totalHeight","totalWidth","verticalHeightFromBottom","pointLeft","tileH","regularColor","buildingBaseColor","highlightColor","getHighlightsRGB","g","b","shadowColor","getShadowsRGB","leftWallLeftTop","rightWallLeftTop","blockTopLeft","./config.component","./mapGenerationFunctions.component","2","_tileWidth","_tileLength","_tileHeight","_tileSmallAngle","_tileLargeAngle","_groundColor","Color","_buildingBaseColor","floor","random","_tileEdgeBleed","tileSmallAngle","tileLargeAngle","mapArrayWidth","mapArrayLength","3","mapper_component_1","builder_component_1","building","_builder","_map","default","document","querySelector","style","background","showData","build2DMap","buildMap","innerHTML","drawTileMap","./builder.component","./mapper.component","4","smallAngle","largeAngle","maximumBlockIterations","blockWidth","blockHeight","smallOuterAngle","largeOuterAngle","getHorizontalBottomShortestWidth","getVerticalBottomShortestHeight","getHorizontalTopLongestWidth","getVerticalTopLongestHeight","diagonalWidth","sin","toRadians","diagonalHeight","cos","angle","PI","TileColor","BuildingHeightVariations","params","error","validateHex","hexColor","charAt","setHex","hexToRgb","validateRgb","setRgb","rgbToHex","toString","_colorRgb","hexadecimal","hexVal1","hexVal2","hexVal3","_colorHex","match","hexValues","substr","split","hexPair1","parseInt","hexPair2","hexPair3","hexR","Number","hexG","hexB","newR","newG","5","tile_component_1","mapMaxHeight","mapEdgeWidth","averageBuildingSize","_mapGen","_blockHeightVariationLabels","TallCenter","TallSurrounds","Random","_blockHeightVariation","_mapWidth","_mapLength","_mapMaxHeight","_mapEdgeWidth","_averageBuildingSize","_blockHeight","_maximumBlockIterations","_additionalBlockIterations","calculateAdditionalBlockIterations","_blockGroups","mapLengthHalf","startblockLength","startblockWidth","startblockXfromCenter","startblockLengthHalf","startingPositionX","_world","firstBlockHeight","thisBlockGroup","column","Column","tileStack","thisPillar","thisWindowed","isRoof","push","Tile","TileType","Body","roof","pillar","windowed","tower","indexOf","Array","blockGroup","corner","setEdges","edge","defined","colX","colY","colHeight","_edge","_tileStack","_defined","_x","_y","_height","groupNum","_blockGroup","_corner","tiles","./tile.component","6","tileType","options","_options","_id","_h","_tileType","_tileColor","type","None"],"mappings":"CAAA,SAAAA,EAAAC,EAAAC,EAAAC,GAAA,SAAAC,EAAAC,EAAAC,GAAA,IAAAJ,EAAAG,GAAA,CAAA,IAAAJ,EAAAI,GAAA,CAAA,IAAAE,EAAA,mBAAAC,SAAAA,QAAA,IAAAF,GAAAC,EAAA,OAAAA,EAAAF,GAAA,GAAA,GAAAI,EAAA,OAAAA,EAAAJ,GAAA,GAAA,IAAAK,EAAA,IAAAC,MAAA,uBAAAN,EAAA,KAAA,MAAAK,EAAAE,KAAA,mBAAAF,EAAA,IAAAG,EAAAX,EAAAG,GAAA,CAAAS,QAAA,IAAAb,EAAAI,GAAA,GAAAU,KAAAF,EAAAC,QAAA,SAAAd,GAAA,OAAAI,EAAAH,EAAAI,GAAA,GAAAL,IAAAA,IAAAa,EAAAA,EAAAC,QAAAd,EAAAC,EAAAC,EAAAC,GAAA,OAAAD,EAAAG,GAAAS,QAAA,IAAA,IAAAL,EAAA,mBAAAD,SAAAA,QAAAH,EAAA,EAAAA,EAAAF,EAAAa,OAAAX,IAAAD,EAAAD,EAAAE,IAAA,OAAAD,EAAA,CAAA,CAAAa,EAAA,CAAA,SAAAT,EAAAU,EAAAJ,GCCA,aACAK,OAAOC,eAAeN,EAAS,aAAc,CAAEO,OAAO,ICFtD,MAAAC,EAAAd,EAAA,sCAGAe,EAAAf,EAAA,sBAEAM,EAAAU,SAAA,MAKCC,cAHQC,KAAAC,OAAiB,IAAIJ,EAAAK,OACrBF,KAAAG,aAAuC,IAAIP,EAAAQ,uBAInDL,SAASM,GAER,IAAIC,EAAO,yBAKX,OAJAA,iBAAsBD,EAAIE,iCAAiCF,EAAIG,sBAC/DF,kBAAuBN,KAAKC,OAAOQ,6BAA6BT,KAAKC,OAAOS,iBAC5EJ,GAAQ,SAKTP,WAAWM,GAEV,IAAIM,mCAA2CX,KAAKC,OAAOW,YAAYP,EAAIE,iBAE3E,IAAK,IAAIM,EAAI,EAAGA,EAAIR,EAAIG,UAAWK,IAClC,IAAK,IAAIC,EAAI,EAAGA,EAAIT,EAAIE,SAAUO,IAIjC,GAFAH,qCAA6CX,KAAKC,OAAOQ,sBAAsBT,KAAKC,OAAOS,gBAEvFL,EAAIU,UAAUD,EAAGD,GAAGG,UAAW,CAElC,IAAIC,EAAOZ,EAAIa,WAAWJ,EAAGD,GACzBM,EAAeF,EAAKG,WAAWC,MAGnCV,8BAFuBQ,EAAgB,MAAMA,EAAgB,MAAMA,EAAgB,SAEtCF,EAAKK,UAAUR,MAAMD,gBAIlEF,QAAgBG,MAAMD,UAOzB,OAFAF,GAAW,SAKZZ,SAASwB,GAER,IAAIC,EAAgBD,EAAWhB,SAC3BkB,EAAiBF,EAAWf,UAE5BkB,EAAW1B,KAAK2B,WAAW,EAAG,GAG9BC,GADaF,EAASG,OAAOC,OAAOhB,EAAIY,EAASG,OAAOE,IAAIjB,EAC/CY,EAASG,OAAOG,MAAMnB,EAAIa,EAASG,OAAOI,KAAKpB,GAC5DqB,EAAoBR,EAASG,OAAOE,IAAIjB,EAAIY,EAASG,OAAOI,KAAKnB,EACjEqB,EAAqBT,EAASG,OAAOG,MAAMlB,EAAIY,EAASG,OAAOE,IAAIjB,EAGnEsB,EAAoBV,EAASG,OAAOG,MAAMnB,EAE1CwB,EAAeD,EAAoBZ,EACnCc,GAFuBZ,EAASG,OAAOC,OAAOjB,EAAIa,EAASG,OAAOG,MAAMnB,GAE/BY,EACzCc,EAAaC,KAAKC,OAAOP,EAAoBC,GAAsB,GACnEO,EAAcF,KAAKC,MAAMJ,EAAeC,GAE5CK,QAAQC,IAAI,OAAQrB,EAAWlB,KAC/B,MAAMA,EAAMkB,EAAWlB,IAEvB,IAAIC,EAAO,eAAeiC,EAAW,aAAaG,EAAY,KAE1DG,EAAW,KACXC,EAAaZ,GAAqBV,EAAgB,GAEtD,IAAK,IAAIX,EAAI,EAAGA,EAAIY,EAAgBZ,IAEnC,IAAK,IAAIC,EAAI,EAAGA,EAAIU,EAAeV,IAAK,CAEvC,IAAIiC,EAAW,EACXC,EAAW,EAEL,IAANlC,GAAiB,IAAND,IACdmC,EAAWF,GAGI,MAAZD,IACHE,EAAWF,EAAShB,OAAOG,MAAMnB,GAG9BA,EAAI,GAAW,IAANC,IACZkC,EAAWF,EAAcZ,EAAoBrB,EAC7CkC,EAAYX,EAAoBvB,EAAMe,EAAaf,GAGhDC,EAAI,IACPkC,EAAYH,EAAShB,OAAOG,MAAMlB,GAAK+B,EAAShB,OAAOG,MAAMlB,EAAI+B,EAAShB,OAAOC,OAAOhB,IAGzF,IAAImC,EAAUjD,KAAK2B,WAAWqB,EAAUD,GACpCG,EAAU,GAEd,GAAI7C,EAAIQ,GAAGC,GAAGE,UAAW,CACxB2B,QAAQC,IAAIvC,EAAIQ,GAAGC,IACnB,IAAK,IAAIqC,EAAI,EAAGA,EAAI9C,EAAIQ,GAAGC,GAAGsC,OAAQD,IAAK,CAE1CD,GADWlD,KAAKqD,YAAYL,EAAUD,EAAW/C,KAAKC,OAAOqD,WAAYjD,EAAIQ,GAAGC,GAAGyC,QAAQJ,IAC3E7C,MAIlBA,GAAQ2C,EAAQ3C,KAAO4C,EAEvBL,EAAWI,EAMb,OAFA3C,GAAQ,SAKTP,WAAWyD,EAAcC,GAExB,IAAIC,EAAQ1D,KAAKC,OAAOQ,UACpBkD,EAAQ3D,KAAKC,OAAOS,WACpBkD,EAAQ5D,KAAKC,OAAO4D,cAEpBC,EAAY9D,KAAKC,OAAO8D,YAAYC,MAEpCC,EAAajE,KAAKG,aAAa+D,0CAA0CR,EAAOC,GAEhF5B,EAAgB,CAAEjB,EAAM0C,EAAOS,EAAWE,uBAAyBtD,EAAK4C,GACxExB,EAAiB,CAAEnB,EAAK0C,EAAM3C,EAAM4C,EAAOQ,EAAWG,uBACtDtC,EAAmB,CAAEhB,EAAM0C,EAAOS,EAAWI,0BAA4BxD,EAAM4C,EAAOQ,EAAWK,aACjGtC,EAAkB,CAAElB,EAAM0C,EAAOS,EAAWM,WAAa1D,EAAM4C,EAAOQ,EAAWO,0BAGjFC,KAAexC,EAAKnB,EAAE8C,KAAS3B,EAAKpB,IAaxC,MAAO,CAAEP,oBATiBwD,qBACjBW,qBAJY3C,EAAOhB,KAAKgB,EAAOjB,EAAE+C,uBACtB5B,EAAMlB,EAAE8C,KAAS5B,EAAMnB,uBAHzBkB,EAAIjB,KAAKiB,EAAIlB,EAAE+C,oBAU3Ba,UAIe5C,OAFA,CAAEE,IAAOA,EAAKE,KAAQA,EAAMH,OAAUA,EAAQE,MAASA,IAK7EjC,YAAYyD,EAAcC,EAAcxC,GAEvC,IAAIyC,EAAQ1D,KAAKC,OAAOQ,UACpBkD,EAAQ3D,KAAKC,OAAOS,WACpBgE,EAAQ1E,KAAKC,OAAOqD,WACpBM,EAAQ5D,KAAKC,OAAO4D,cAEpBvC,EAAKL,EAAKK,GACV8B,EAAUnC,EAAKkC,EAAIuB,EAASA,EAE5BC,EAAe3E,KAAKC,OAAO2E,kBAAkBZ,MAC7Ca,SAAwB7E,KAAKC,OAAO2E,kBAAkBE,mBAAmBxG,KAAK0B,KAAKC,OAAO2E,kBAAkBE,mBAAmBC,KAAK/E,KAAKC,OAAO2E,kBAAkBE,mBAAmBE,KACrLC,SAAqBjF,KAAKC,OAAO2E,kBAAkBM,gBAAgB5G,KAAK0B,KAAKC,OAAO2E,kBAAkBM,gBAAgBH,KAAK/E,KAAKC,OAAO2E,kBAAkBM,gBAAgBF,KAEzKf,EAAajE,KAAKG,aAAa+D,0CAA0CR,EAAOC,GAEhF5B,EAAgB,CAAEjB,EAAM0C,EAAOS,EAAWE,uBAAyBtD,EAAK4C,GACxExB,EAAiB,CAAEnB,EAAK0C,EAAM3C,EAAM4C,EAAOQ,EAAWG,uBACtDtC,EAAmB,CAAEhB,EAAM0C,EAAOS,EAAWI,0BAA4BxD,EAAM4C,EAAOQ,EAAWK,aACjGtC,EAAkB,CAAElB,EAAM0C,EAAOS,EAAWM,WAAa1D,EAAM4C,EAAOQ,EAAWO,0BAEjFW,KAAqBlD,EAAKnB,EAAE8C,KAAS3B,EAAKpB,EAAEuC,EAAOsB,IAKnDU,KAAsBtD,EAAOhB,KAAKgB,EAAOjB,EAAEuC,EAAOsB,IAKlDW,KAAkBpD,EAAKnB,EAAE8C,KAAS3B,EAAKpB,EAAEuC,EAAOsB,IA2BpD,MAAO,CAAEpE,0BArBuBgB,mBAAoB2D,qBAC3CE,qBAhBmBlD,EAAKnB,EAAE8C,KAAS3B,EAAKpB,EAAEuC,EAAOQ,uBAC7B9B,EAAOhB,KAAKgB,EAAOjB,EAAEuC,EAAOQ,uBAC/B9B,EAAOhB,KAAKgB,EAAOjB,EAAEuC,EAAOsB,oBAkBhDS,kCACWR,qBACRS,qBAjBoBtD,EAAOhB,KAAKgB,EAAOjB,EAAEuC,EAAOQ,uBAC3B5B,EAAMlB,EAAE8C,KAAS5B,EAAMnB,EAAEuC,EAAOQ,uBACnC5B,EAAMlB,EAAE8C,KAAS5B,EAAMnB,EAAEuC,EAAOsB,oBAmBrDU,kCACWP,qBACRQ,qBAlBevD,EAAOhB,KAAKgB,EAAOjB,EAAEuC,EAAOsB,uBAC7B1C,EAAMlB,EAAE8C,KAAS5B,EAAMnB,EAAEuC,EAAOsB,uBAClC3C,EAAIjB,KAAKiB,EAAIlB,EAAEuC,EAAOsB,oBAoBrCW,cAIexD,OAFA,CAAEE,IAAOA,EAAKE,KAAQA,EAAMH,OAAUA,EAAQE,MAASA,ODlD5E,CAACsD,qBAAqB,EAAEC,qCAAqC,IAAIC,EAAE,CAAC,SAAS1G,EAAQU,EAAOJ,GAC9F,aACAK,OAAOC,eAAeN,EAAS,aAAc,CAAEO,OAAO,IErKtD,MAAAC,EAAAd,EAAA,sCAEAM,EAAAc,OAAA,MAAAH,cAESC,KAAAyF,WAAqB,GACrBzF,KAAA0F,YAAsB,GACtB1F,KAAA2F,YAAsB,GACtB3F,KAAA4F,gBAA0B,GAC1B5F,KAAA6F,gBAA0B,IAC1B7F,KAAA8F,aAAsB,IAAIlG,EAAAmG,MAAM,UAChC/F,KAAAgG,mBAA4B,IAAIpG,EAAAmG,MACvC,IAAMvD,KAAKyD,MAAsB,GAAhBzD,KAAK0D,UACtB,IAAM1D,KAAKyD,MAAsB,GAAhBzD,KAAK0D,UACtB,IAAM1D,KAAKyD,MAAsB,GAAhBzD,KAAK0D,WAEflG,KAAAmG,eAAyB,IAEjC1F,gBACC,OAAOT,KAAKyF,WAGb/E,iBACC,OAAOV,KAAK0F,YAGbpC,iBACC,OAAOtD,KAAK2F,YAGbS,qBACC,OAAOpG,KAAK4F,gBAGbS,qBACC,OAAOrG,KAAK6F,gBAGb9B,kBACC,OAAO/D,KAAK8F,aAGblB,wBACC,OAAO5E,KAAKgG,mBAGbnC,oBACC,OAAO7D,KAAKmG,eAGNpG,YAAYuG,GAClB,OAAOA,EAAgBtG,KAAKyF,WAGtB1F,aAAawG,GACnB,OAAOA,EAAiBvG,KAAK0F,eF4J7B,CAACH,qCAAqC,IAAIiB,EAAE,CAAC,SAAS1H,EAAQU,EAAOJ,GACvE,aACAK,OAAOC,eAAeN,EAAS,aAAc,CAAEO,OAAO,IGpNtD,MAAA8G,EAAA3H,EAAA,sBACA4H,EAAA5H,EAAA,uBAEAe,EAAAf,EAAA,sBAoCA,MAAM6H,EAAW,IAlCjB,MAMC5G,cAHQC,KAAA4G,SAAqB,IAAIF,EAAA5G,SACzBE,KAAAC,OAAiB,IAAIJ,EAAAK,OAG5BF,KAAK6G,KAAO,IAAIJ,EAAAK,QAAI,GAAI,GAAI,GAAI,EAAI,EAAItE,KAAKyD,MAAsB,EAAhBzD,KAAK0D,UAAgB,EAAG,GAC3Ea,SAASC,cAAc,QAAQC,MAAMC,WAAalH,KAAKC,OAAO8D,YAAYC,MAG3E3D,UACC,OAAOL,KAAK6G,KAGN9G,WACN,OAAOC,KAAK4G,SAASO,SAASnH,KAAK6G,MAAQ7G,KAAK4G,SAASQ,WAAWpH,KAAK6G,MAGnE9G,cACN,OAAOC,KAAK4G,SAASS,SAASrH,KAAK6G,QAgBrCE,SAASC,cAAc,UAAUM,UAAYX,EAASY,eHkMpD,CAACC,sBAAsB,EAAElC,qBAAqB,EAAEmC,qBAAqB,IAAIC,EAAE,CAAC,SAAS5I,EAAQU,EAAOJ,GACtG,aACAK,OAAOC,eAAeN,EAAS,aAAc,CAAEO,OAAO,II7OtD,MAAAE,EAAAf,EAAA,sBAEAM,EAAAgB,uBAAA,MAMCL,cAJQC,KAAAC,OAAiB,IAAIJ,EAAAK,OAC7BF,KAAA2H,WAAa3H,KAAKC,OAAOmG,eACzBpG,KAAA4H,WAAa5H,KAAKC,OAAOoG,eAIlBtG,mCAAmC8H,GACzC,OAAO,EAAIrF,KAAKyD,MAAMzD,KAAK0D,SAAW2B,GAIhC9H,0CAA2C+H,EAAoBC,GAarE,IAAIC,GAAmB,IAAMhI,KAAK2H,YAAc,EAC5CM,GAAmB,IAAMjI,KAAK4H,YAAc,EAE5CvD,EAA4BrE,KAAKkI,iCAAiCJ,EAAYE,GAC9ExD,EAA2BxE,KAAKmI,gCAAgC9D,EAA2B2D,GAE3F7D,EAAyBnE,KAAKoI,6BAA6BL,EAAaE,GACxE7D,EAAwBpE,KAAKqI,4BAA4BlE,EAAwB8D,GAKrF,MAAO,CAAE1D,WAFQF,EAA4BF,EAG1CG,YAJeE,EAA2BJ,EAK1CC,0BAA6BA,EAC7BF,uBAA0BA,EAC1BK,yBAA4BA,EAC5BJ,sBAAyBA,GAKtBrE,iCAAkCuI,EAAuBX,GAC/D,OAAOW,EAAgB9F,KAAK+F,IAAIvI,KAAKwI,UAAUb,IAGzC5H,gCAAiC0I,EAAwBd,GAC/D,OAAOc,EAAiBjG,KAAKkG,IAAI1I,KAAKwI,UAAUb,IAG1C5H,6BAA8BuI,EAAuBV,GAC3D,OAAOU,EAAgB9F,KAAK+F,IAAIvI,KAAKwI,UAAUZ,IAGzC7H,4BAA6B0I,EAAwBb,GAC3D,OAAOa,EAAiBjG,KAAKkG,IAAI1I,KAAKwI,UAAUZ,IAGjD7H,UAAW4I,GACV,OAAOA,GAASnG,KAAKoG,GAAK,OAI5B,SAAYC,GACXA,EAAAA,EAAA,IAAM,IAAMrG,KAAKyD,MAAsB,GAAhBzD,KAAK0D,WAAc,MAC1C2C,EAAAA,EAAA,MAAQ,IAAMrG,KAAKyD,MAAsB,GAAhBzD,KAAK0D,WAAc,QAC5C2C,EAAAA,EAAA,KAAO,IAAMrG,KAAKyD,MAAsB,GAAhBzD,KAAK0D,WAAc,OAH5C,CAAY9G,EAAAyJ,YAAAzJ,EAAAyJ,UAAS,KAMrB,SAAYC,GACXA,EAAA,WAAA,aACAA,EAAA,cAAA,gBACAA,EAAA,OAAA,SAHD,CAAY1J,EAAA0J,2BAAA1J,EAAA0J,yBAAwB,KAMpC1J,EAAA2G,MAAA,MAIChG,eAAegJ,GACd,IAAIC,EAAQ,KACZ,GAAsB,IAAlBD,EAAOzJ,OACV,GAAyB,iBAAdyJ,EAAO,GACjB,GAAI/I,KAAKiJ,YAAYF,EAAO,IAAK,CAChC,IAAIG,EAAWH,EAAO,GACK,MAAvBG,EAASC,OAAO,KACnBD,MAAeA,KAEhBlJ,KAAKoJ,OAAOF,GACZlJ,KAAKqJ,gBAELL,EAAQ,sCAGTA,EAAQ,wDAEmB,IAAlBD,EAAOzJ,SACbU,KAAKsJ,YAAYP,IACpB/I,KAAKuJ,OAAOR,EAAO,GAAIA,EAAO,GAAIA,EAAO,IACzC/I,KAAKwJ,YAELR,EAAQ,+BAIV,GAAc,OAAVA,EACH,KAAM,4BAA8BA,EAAQ,KAAOD,EAAOU,WAIrD1J,OAAOzB,EAAWyG,EAAWC,GACnChF,KAAK0J,UAAY,CAACpL,EAAGA,EAAGyG,EAAGA,EAAGC,EAAGA,GAG3BjF,OAAO4J,GACb,GAAIA,EAAYrK,OAAS,EAAG,CAC3B,IAAIsK,EAAUD,EAAYR,OAAO,GAC7BU,EAAUF,EAAYR,OAAO,GAC7BW,EAAUH,EAAYR,OAAO,GACjCQ,EAAc,IAAMC,EAAUA,EAAUC,EAAUA,EAAUC,EAAUA,EAEvE9J,KAAK+J,UAAYJ,EAGX5J,MACN,OAAOC,KAAK0J,UAGN3J,MACN,OAAOC,KAAK+J,UAGbhK,YAAYsB,GACX,OAAIA,EAAI,IAAM,GAAKA,EAAI,GAAK,KAC3BA,EAAI,IAAM,GAAKA,EAAI,GAAK,KACxBA,EAAI,IAAM,GAAKA,EAAI,GAAK,IAO1BtB,YAAYiE,GAEX,QAAIA,EAAIgG,MADI,uCAQbjK,WACC,IAAIkK,EAAsBjK,KAAK+J,UAAUG,OAAO,GAAGC,MAAM,IACrDC,EAAWC,SAASJ,EAAU,GAAGA,EAAU,GAAI,IAC/CK,EAAWD,SAASJ,EAAU,GAAGA,EAAU,GAAI,IAC/CM,EAAWF,SAASJ,EAAU,GAAGA,EAAU,GAAI,IACnDjK,KAAKuJ,OAAOa,EAAUE,EAAUC,GAChCvK,KAAKwJ,WAGNzJ,WACC,GAA8B,iBAAnBC,KAAK0J,UAAwB,CACvC,IAAIpL,EAAI0B,KAAK0J,UAAUpL,EACnB0G,EAAIhF,KAAK0J,UAAU1E,EACnBD,EAAI/E,KAAK0J,UAAU3E,EACnByF,EAAOC,OAAOnM,GAAGmL,SAAS,IAC1BiB,EAAOD,OAAO1F,GAAG0E,SAAS,IAC1BkB,EAAOF,OAAOzF,GAAGyE,SAAS,IAC9BzJ,KAAK+J,UAAY,IAAMS,EAAOE,EAAOC,GAIhC5K,mBACN,IAAIzB,EAAI0B,KAAK0J,UAAUpL,EACnB0G,EAAIhF,KAAK0J,UAAU1E,EAEnB4F,EAAOtM,EAAI,GACXuM,EAFI7K,KAAK0J,UAAU3E,EAER,GAKf,OAHI6F,EAAO,MAAKA,EAAO,KACnBC,EAAO,MAAKA,EAAO,KACnBD,EAAO,MAAKA,EAAO,KAChB,CAACtM,EAAGsM,EAAM7F,EAAG8F,EAAM7F,EAJfA,EAAI,IAOTjF,gBACN,IAAIzB,EAAI0B,KAAK0J,UAAUpL,EACnB0G,EAAIhF,KAAK0J,UAAU1E,EAEnB4F,EAAOtM,EAAI,GACXuM,EAFI7K,KAAK0J,UAAU3E,EAER,GAKf,OAHI6F,EAAO,IAAGA,EAAO,GACjBC,EAAO,IAAGA,EAAO,GACjBD,EAAO,IAAGA,EAAO,GACd,CAACtM,EAAGsM,EAAM7F,EAAG8F,EAAM7F,EAJfA,EAAI,OJwNf,CAACM,qBAAqB,IAAIwF,EAAE,CAAC,SAAShM,EAAQU,EAAOJ,GACvD,aACAK,OAAOC,eAAeN,EAAS,aAAc,CAAEO,OAAO,IKjatD,MAAAC,EAAAd,EAAA,sCACAiM,EAAAjM,EAAA,oBACAe,EAAAf,EAAA,sBAEAM,EAAA0H,QAAA,MAuBC/G,YACEQ,EACAC,EACAwK,EACAC,EACAC,EACAnD,EACAF,GAZM7H,KAAAmL,QAAkC,IAAIvL,EAAAQ,uBACtCJ,KAAAC,OAAiB,IAAIJ,EAAAK,OACrBF,KAAAoL,4BAA8B,CAACxL,EAAAkJ,yBAAyBuC,WAAYzL,EAAAkJ,yBAAyBwC,cAAe1L,EAAAkJ,yBAAyByC,QACrIvL,KAAAwL,sBAAwBxL,KAAKoL,4BAA4B5I,KAAKyD,MAAsB,EAAhBzD,KAAK0D,WAWhFlG,KAAKyL,UAAYlL,EACjBP,KAAK0L,WAAalL,EAClBR,KAAK2L,cAAgBX,EACrBhL,KAAK4L,cAAgBX,EACrBjL,KAAK6L,qBAAuBX,EAC5BlL,KAAK8L,aAAe/D,EACpB/H,KAAK+L,wBAA0BlE,EAC/B7H,KAAKgM,2BAA6BhM,KAAKmL,QAAQc,mCAAmCpE,GAClF7H,KAAKkM,aAAe,GAEpB,IAAIC,EAAgB3J,KAAKyD,MAAMzF,EAAY,GAGvC4L,GAFe5J,KAAKyD,MAAM1F,EAAW,GAEjBP,KAAK6L,qBAAuB,EAAKrJ,KAAKyD,MAAsB,EAAhBzD,KAAK0D,WACrEmG,EAAkBrM,KAAK6L,qBAAuBrJ,KAAKyD,MAAsB,EAAhBzD,KAAK0D,UAC9DoG,EAAwB,EAAI9J,KAAKyD,MAHA,EAGMzD,KAAK0D,UAC5CqG,EAAuB/J,KAAKyD,MAAMmG,EAAmB,GAErDI,GADsBhK,KAAKyD,MAAMoG,EAAkB,GAC/B7J,KAAKyD,MAAMjG,KAAKyL,UAAY,GAAKjJ,KAAKyD,MAAMqG,EAAwB,IAE5FtM,KAAKyM,OAAS,GACd,IAEIC,EAFA/N,EAAI,EAIJqB,KAAKwL,uBAAyB5L,EAAAkJ,yBAAyBuC,WAC1DqB,EAAiC,EAAd3E,EACT/H,KAAKwL,uBAAyB5L,EAAAkJ,yBAAyBwC,cAEjEvD,EADA2E,EAAmB,EAAIlK,KAAKC,MAAMD,KAAK0D,UAGvCwG,EAAmB3E,EAGpBpF,QAAQC,IAAI,2BAA6B5C,KAAKwL,uBAE9C,IAAK,IAAI3K,EAAI,EAAGA,EAAIb,KAAKQ,UAAWK,IAAK,CAExCb,KAAKyM,OAAO5L,GAAK,GAEjB,IAAK,IAAIC,EAAI,EAAGA,EAAId,KAAKO,SAAUO,IAAK,CAEvC,IAAI6L,EAAiB,EAEjBC,EAAS,IAAIC,GAAO,EAAO/L,EAAGD,EAAG,GAErC,GAAIA,GAAKsL,GAAiBtL,GAAMsL,EAAgBI,GAE3CzL,EAAI0L,GAAqB1L,GAAM0L,EAAoBH,EAAmB,CAEzEM,EAAiB,EACjB,IAAIG,EAAY,GAEhB,IAAK,IAAI3J,EAAI,EAAGA,EAAIuJ,EAAkBvJ,IAAK,CAE1C,IAAI4J,EAAa,EACbC,EAAe,EACfC,EAAU9J,IAAMuJ,EAAiB,EAErCI,EAAUI,KACT,IAAInC,EAAAoC,KACHxO,EACAmC,EACAD,EACAsC,EACA4H,EAAAqC,SAASC,KACTrN,KAAKC,OAAO2E,kBACZ,CACC0I,KAAUL,EACVM,OAAYR,EACZS,SAAaR,EACbS,OAAW,MAIqC,IAA/CzN,KAAKkM,aAAawB,QAAQf,GAC7B3M,KAAKkM,aAAaS,GAAkB,IAAIgB,MAAO,CAAC9M,EAAEC,IAElDd,KAAKkM,aAAaS,GAAgBO,KAAK,CAACrM,EAAEC,IAG3CnC,KAGDiO,EAAS,IAAIC,GAAO,EAAM/L,EAAGD,EAAG6L,IAEzBkB,WAAajB,EACpBC,EAAOxJ,OAASsJ,EAChBE,EAAOiB,QAAS,EAChBjB,EAAOE,UAAYA,EAIrB9M,KAAKyM,OAAO5L,GAAGC,GAAK8L,GAItB5M,KAAK8N,WAGNvN,eACC,OAAOP,KAAKyL,UAGbjL,gBACC,OAAOR,KAAK0L,WAGbrL,UACC,OAAOL,KAAKyM,OAGN1M,UAAUe,EAAGD,GACnB,OAAOb,KAAKyM,OAAO5L,GAAGC,GAGhBf,SAASe,EAAGD,GAClB,OAAOb,KAAKyM,OAAO5L,GAAGC,GAAGgM,UAGnB/M,QAAQe,EAAGD,EAAGsC,GACpB,OAAOnD,KAAKyM,OAAO5L,GAAGC,GAAGyC,QAAQJ,GAG3BpD,WAAWe,EAAGD,GACpB,IAAIuC,EAASpD,KAAKyM,OAAO5L,GAAGC,GAAGsC,OAC/B,OAAOpD,KAAKyM,OAAO5L,GAAGC,GAAGyC,QAAQH,EAAO,GAGzCrD,WAEC,IAAK,IAAIc,EAAI,EAAGA,EAAIb,KAAKQ,UAAWK,IACnC,IAAK,IAAIC,EAAI,EAAGA,EAAId,KAAKO,SAAUO,IAE9BD,EAAI,GAAKC,EAAI,GAAKD,EAAIb,KAAKQ,UAAU,GAAKM,EAAId,KAAKO,SAAS,GAAKP,KAAKyM,OAAO5L,GAAGC,GAAGE,YAEjFhB,KAAKyM,OAAO5L,EAAE,GAAGC,GAAGE,YACxBhB,KAAKyM,OAAO5L,GAAGC,GAAGiN,KAAKhM,KAAM,GAGzB/B,KAAKyM,OAAO5L,EAAE,GAAGC,GAAGE,YACxBhB,KAAKyM,OAAO5L,GAAGC,GAAGiN,KAAKjM,QAAS,GAG5B9B,KAAKyM,OAAO5L,GAAGC,EAAE,GAAGE,YACxBhB,KAAKyM,OAAO5L,GAAGC,GAAGiN,KAAK9L,MAAO,GAG1BjC,KAAKyM,OAAO5L,GAAGC,EAAE,GAAGE,YACxBhB,KAAKyM,OAAO5L,GAAGC,GAAGiN,KAAK/L,OAAQ,IAG1BhC,KAAKyM,OAAO5L,GAAGC,GAAGiN,KAAU,KAAK/N,KAAKyM,OAAO5L,GAAGC,GAAGiN,KAAY,OAClE/N,KAAKyM,OAAO5L,GAAGC,GAAGiN,KAAU,KAAK/N,KAAKyM,OAAO5L,GAAGC,GAAGiN,KAAW,MAC9D/N,KAAKyM,OAAO5L,GAAGC,GAAGiN,KAAa,QAAK/N,KAAKyM,OAAO5L,GAAGC,GAAGiN,KAAY,OAClE/N,KAAKyM,OAAO5L,GAAGC,GAAGiN,KAAa,QAAK/N,KAAKyM,OAAO5L,GAAGC,GAAGiN,KAAW,QACnE/N,KAAKyM,OAAO5L,GAAGC,GAAG+M,QAAS,MASjC,MAAMhB,EAWL9M,YAAoBiO,EAA0BC,EAAsBC,EAAsBC,GAAtEnO,KAAAgO,QAAAA,EAA0BhO,KAAAiO,KAAAA,EAAsBjO,KAAAkO,KAAAA,EAAsBlO,KAAAmO,UAAAA,EAHlFnO,KAAAoO,MAAgB,CAAErM,KAAO,EAAOC,OAAS,EAAOF,QAAU,EAAOG,MAAQ,GACzEjC,KAAAqO,WAAqB,GAG5BrO,KAAKsO,SAAWN,EAChBhO,KAAKuO,GAAKN,EACVjO,KAAKwO,GAAKN,EACVlO,KAAKyO,QAAUN,EAGhBrN,MAAMA,GACLd,KAAKuO,GAAKzN,EAGXD,MAAMA,GACLb,KAAKwO,GAAK3N,EAGXuC,WAAWA,GACVpD,KAAKyO,QAAUrL,EAGhBwK,eAAec,GACd1O,KAAK2O,YAAcD,EAGpBb,WAAWA,GACV7N,KAAK4O,QAAUf,EAGhBE,SAASA,GACR/N,KAAKoO,MAAQL,EAGdjB,cAAc+B,GACb7O,KAAKqO,WAAaQ,EAGnB7N,gBACC,OAAOhB,KAAKsO,SAGbxN,QACC,OAAOd,KAAKuO,GAGb1N,QACC,OAAOb,KAAKwO,GAGbpL,aACC,OAAOpD,KAAKyO,QAGbb,iBACC,OAAO5N,KAAK2O,YAGbd,aACC,OAAO7N,KAAK4O,QAGbb,WACC,OAAO/N,KAAKoO,MAGbtB,gBACC,OAAO9M,KAAKqO,WAGNtO,QAAQqD,GACd,OAAOpD,KAAKqO,WAAWjL,ML2UvB,CAACkC,qBAAqB,EAAEC,qCAAqC,EAAEuJ,mBAAmB,IAAIC,EAAE,CAAC,SAASjQ,EAAQU,EAAOJ,GACnH,aACAK,OAAOC,eAAeN,EAAS,aAAc,CAAEO,OAAO,IMliBtD,IAAYyN,EAjEZhO,EAAA+N,KAAA,MAUCpN,YACEuB,EACAR,EACAD,EACAsC,EACA6L,EACAlL,EACAmL,GATFjP,KAAAkP,SAAoB,GAWnBlP,KAAKmP,IAAM7N,EACXtB,KAAKuO,GAAKzN,EACVd,KAAKwO,GAAK3N,EACVb,KAAKoP,GAAKjM,EACVnD,KAAKqP,UAAYL,EACjBhP,KAAKsP,WAAaxL,EAEdmL,IACHjP,KAAKkP,SAAWD,GAIlB3N,SACC,OAAOtB,KAAKmP,IAGbrO,QACC,OAAOd,KAAKuO,GAGb1N,QACC,OAAOb,KAAKwO,GAGbrL,QACC,OAAOnD,KAAKoP,GAGbG,WACC,OAAOvP,KAAKqP,UAGbJ,cACC,OAAIjP,KAAKqP,WAAajC,EAASoC,KACvBxP,KAAKkP,SAEL,CAAElB,SAAW,GAIfjO,WACN,OAAOC,KAAKsP,aAKd,SAAYlC,GACXA,EAAA,KAAA,OACAA,EAAA,KAAA,OACAA,EAAA,MAAA,QACAA,EAAA,KAAA,OAJD,CAAYA,EAAAhO,EAAAgO,WAAAhO,EAAAgO,SAAQ,MNmlBlB,KAAK,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE","file":"bundle.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()",null,"import { MapGenerationFunctions, Color } from './mapGenerationFunctions.component'\r\nimport Map from './mapper.component'\r\nimport { Tile, TileType } from './tile.component'\r\nimport { Config, Coords, TileTemplate, Position } from './config.component'\r\n\r\nexport class Renderer {\t\r\n\r\n\tprivate config: Config = new Config()\r\n\tprivate calculations: MapGenerationFunctions = new MapGenerationFunctions()\r\n\r\n\tconstructor() {\t}\r\n\r\n\tshowData(map: Map): string {\r\n\r\n\t\tlet html = '<div class=\"showData\">'\r\n\t\thtml += `map width: ${map.mapWidth} tiles<br>map length: ${map.mapLength} tiles<br>`\r\n\t\thtml += `tile width: ${this.config.tileWidth}<br>tile length: ${this.config.tileLength}<br>`\r\n\t\thtml += '</div>'\r\n\r\n\t\treturn html\r\n\t}\r\n\r\n\tbuild2DMap(map: Map): string {\r\n\r\n\t\tlet htmlMap = `<div class=\"map\" style=\"width:${this.config.getMapWidth(map.mapWidth)}px;\">`\r\n\r\n\t\tfor (let y = 0; y < map.mapLength; y++) {\r\n\t\t\tfor (let x = 0; x < map.mapWidth; x++) {\r\n\r\n\t\t\t\thtmlMap += `<div class=\"tile\" style=\"width:${this.config.tileWidth}px;height:${this.config.tileLength}px;`\r\n\r\n\t\t\t\tif (map.getColumn(x, y).isDefined) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet tile = map.getTopTile(x, y)\r\n\t\t\t\t\tlet tileTopColor = tile.getColor().rgb()\r\n\t\t\t\t\tlet tileColor = `rgb(${tileTopColor['r']}, ${tileTopColor['g']}, ${tileTopColor['b']})`\r\n\r\n\t\t\t\t\thtmlMap += `background-color:${tileColor}\">${tile.id}<br>(${x}, ${y})</div>`\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\thtmlMap += `\">${x}, ${y}</div>`\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\thtmlMap += `</div>`\r\n\r\n\t\treturn htmlMap\r\n\t}\r\n\r\n\tbuildMap(mapToBuild: Map): string {\r\n\r\n\t\tlet mapTotalWidth = mapToBuild.mapWidth\r\n\t\tlet mapTotalLength = mapToBuild.mapLength\r\n\r\n\t\tlet testTile = this.createTile(0, 0)\r\n\r\n\t\tlet xDeviation = testTile.coords.bottom.x - testTile.coords.top.x\r\n\t\tlet yDeviation = testTile.coords.right.y - testTile.coords.left.y\r\n\t\tlet tileHalfWidthLeft = testTile.coords.top.x - testTile.coords.left.x\r\n\t\tlet tileHalfWidthRight = testTile.coords.right.x - testTile.coords.top.x\r\n\t\tlet mapWidthLeft = tileHalfWidthLeft * mapTotalLength\r\n\t\tlet mapWidthRight = tileHalfWidthRight * mapTotalWidth\r\n\t\tlet tileHalfLengthTop = testTile.coords.right.y\r\n\t\tlet tileHalfLengthBottom = testTile.coords.bottom.y - testTile.coords.right.y\r\n\t\tlet mapLengthTop = tileHalfLengthTop * mapTotalWidth\r\n\t\tlet mapLengthBottom = tileHalfLengthBottom * mapTotalLength\r\n\t\tlet mapWidthPx = Math.round((tileHalfWidthLeft + tileHalfWidthRight) * (mapTotalWidth ))\r\n\t\tlet mapLengthPx = Math.round(mapLengthTop + mapLengthBottom)\r\n\r\n\t\tconsole.log('map:', mapToBuild.map)\r\n\t\tconst map = mapToBuild.map\r\n\r\n\t\tlet html = '<svg width=\"'+mapWidthPx+'\" height=\"'+mapLengthPx+'\">'\r\n\r\n\t\tlet lastTile = null\r\n\t\tlet startTileX = tileHalfWidthLeft * (mapTotalWidth - 1)\r\n\r\n\t\tfor (let y = 0; y < mapTotalLength; y++) {\r\n\r\n\t\t\tfor (let x = 0; x < mapTotalWidth; x++) {\r\n\r\n\t\t\t\tlet thisPosY = 0\r\n\t\t\t\tlet thisPosX = 0\r\n\r\n\t\t\t\tif (x === 0 && y === 0) {\r\n\t\t\t\t\tthisPosX = startTileX\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (lastTile != null) {\r\n\t\t\t\t\tthisPosY = lastTile.coords.right.y\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (y > 0 && x === 0) {\r\n\t\t\t\t\tthisPosX = startTileX - (tileHalfWidthLeft * y)\r\n\t\t\t\t\tthisPosY = (tileHalfLengthTop * y) - (yDeviation * y)\r\n\t\t\t\t}\t\r\n\t\t\t\t\r\n\t\t\t\tif (x > 0) {\r\n\t\t\t\t\tthisPosX = (lastTile.coords.right.x - (lastTile.coords.right.x - lastTile.coords.bottom.x))\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet newTile = this.createTile(thisPosX, thisPosY)\r\n\t\t\t\tlet newData = ''\r\n\r\n\t\t\t\tif (map[y][x].isDefined) {\r\n\t\t\t\t\tconsole.log(map[y][x])\r\n\t\t\t\t\tfor (let h = 0; h < map[y][x].height; h++) {\r\n\t\t\t\t\t\tlet tile = this.createBlock(thisPosX, thisPosY - this.config.tileHeight, map[y][x].getTile(h))\r\n\t\t\t\t\t\tnewData += tile.html\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\thtml += newTile.html + newData\r\n\r\n\t\t\t\tlastTile = newTile\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\thtml += '</svg>'\r\n\r\n\t\treturn html\r\n\t}\r\n\r\n\tcreateTile(xPos: number, yPos: number): TileTemplate {\r\n\r\n\t\tlet tileW = this.config.tileWidth\r\n\t\tlet tileL = this.config.tileLength\r\n\t\tlet bleed = this.config.tileEdgeBleed\r\n\r\n\t\tlet tileColor = this.config.groundColor.hex()\r\n\r\n\t\tlet dimensions = this.calculations.calculateStraightLinesFromIsometricSquare(tileW, tileL)\r\n\r\n\t\tlet top: Position = { \"x\": (xPos + dimensions.horizontalWidthFromTop), \"y\": yPos}\r\n\t\tlet left: Position = { \"x\": xPos, \"y\": (yPos + dimensions.verticalHeightFromTop) }\r\n\t\tlet bottom: Position = { \"x\": (xPos + dimensions.horizontalWidthFromBottom), \"y\": (yPos + dimensions.totalHeight) }\r\n\t\tlet right: Position = { \"x\": (xPos + dimensions.totalWidth), \"y\": (yPos + dimensions.verticalHeightFromBottom) }\r\n\r\n\t\tlet pointTop = `${top.x} ${top.y-bleed}`\r\n\t\tlet pointLeft = `${left.x-bleed} ${left.y}`\r\n\t\tlet pointBottom = `${bottom.x} ${bottom.y+bleed}`\r\n\t\tlet pointRight = `${right.x+bleed} ${right.y}`\r\n\r\n\t\tvar html = `<path fill=\"${tileColor}\"\r\n\t\t\t\t\td=\"M${pointLeft} \r\n\t\t\t\t\tL${pointBottom} \r\n\t\t\t\t\tL${pointRight} \r\n\t\t\t\t\tL${pointTop} \r\n\t\t\t\t\tL${pointLeft} Z\" />`\r\n\r\n\t\tlet coords: Coords = { \"top\": top, \"left\": left, \"bottom\": bottom, \"right\": right }\r\n\r\n\t\treturn { html: html, coords: coords }\r\n\t}\r\n\r\n\tcreateBlock(xPos: number, yPos: number, tile: Tile): TileTemplate {\r\n\r\n\t\tlet tileW = this.config.tileWidth\r\n\t\tlet tileL = this.config.tileLength\r\n\t\tlet tileH = this.config.tileHeight\r\n\t\tlet bleed = this.config.tileEdgeBleed\r\n\r\n\t\tlet id = tile.id\r\n\t\tlet height = (tile.h * tileH) - tileH\r\n\r\n\t\tlet regularColor = this.config.buildingBaseColor.hex()\r\n\t\tlet highlightColor = `rgb(${this.config.buildingBaseColor.getHighlightsRGB().r},${this.config.buildingBaseColor.getHighlightsRGB().g},${this.config.buildingBaseColor.getHighlightsRGB().b})`\r\n\t\tlet shadowColor = `rgb(${this.config.buildingBaseColor.getShadowsRGB().r},${this.config.buildingBaseColor.getShadowsRGB().g},${this.config.buildingBaseColor.getShadowsRGB().b})`\r\n\r\n\t\tlet dimensions = this.calculations.calculateStraightLinesFromIsometricSquare(tileW, tileL)\r\n\r\n\t\tlet top: Position = { \"x\": (xPos + dimensions.horizontalWidthFromTop), \"y\": yPos }\r\n\t\tlet left: Position = { \"x\": xPos, \"y\": (yPos + dimensions.verticalHeightFromTop) }\r\n\t\tlet bottom: Position = { \"x\": (xPos + dimensions.horizontalWidthFromBottom), \"y\": (yPos + dimensions.totalHeight) }\r\n\t\tlet right: Position = { \"x\": (xPos + dimensions.totalWidth), \"y\": (yPos + dimensions.verticalHeightFromBottom) }\r\n\r\n\t\tlet leftWallLeftTop = `${left.x-bleed} ${left.y-height-tileH}`\r\n\t\tlet leftWallLeftBottom = `${left.x-bleed} ${left.y-height+bleed}`\r\n\t\tlet leftWallRightBottom = `${bottom.x} ${bottom.y-height+bleed}`\r\n\t\tlet leftWallRightTop = `${bottom.x} ${bottom.y-height-tileH}`\r\n\r\n\t\tlet rightWallLeftTop = `${bottom.x} ${bottom.y-height-tileH}`\r\n\t\tlet rightWallLeftBottom = `${bottom.x} ${bottom.y-height+bleed}`\r\n\t\tlet rightWallRightBottom = `${right.x+bleed} ${right.y-height+bleed}`\r\n\t\tlet rightWallRightTop = `${right.x+bleed} ${right.y-height-tileH}`\r\n\r\n\t\tlet blockTopLeft = `${left.x-bleed} ${left.y-height-tileH}`\r\n\t\tlet blockTopBottom = `${bottom.x} ${bottom.y-height-tileH}`\r\n\t\tlet blockTopRight = `${right.x+bleed} ${right.y-height-tileH}`\r\n\t\tlet blockTopTop = `${top.x} ${top.y-height-tileH}`\r\n\r\n\r\n\t\tlet html = `<g style=\"z-index:${id};\"><path fill=\"${shadowColor}\"\r\n\t\t\t\t\td=\"M${leftWallLeftTop} \r\n\t\t\t\t\tL${leftWallLeftBottom} \r\n\t\t\t\t\tL${leftWallRightBottom} \r\n\t\t\t\t\tL${leftWallRightTop} \r\n\t\t\t\t\tL${leftWallLeftTop} Z\" />\r\n\t\t\t\t\t<path fill=\"${regularColor}\"\r\n\t\t\t\t\td=\"M${rightWallLeftTop} \r\n\t\t\t\t\tL${rightWallLeftBottom} \r\n\t\t\t\t\tL${rightWallRightBottom} \r\n\t\t\t\t\tL${rightWallRightTop} \r\n\t\t\t\t\tL${rightWallLeftTop} Z\" />\r\n\t\t\t\t\t<path fill=\"${highlightColor}\"\r\n\t\t\t\t\td=\"M${blockTopLeft} \r\n\t\t\t\t\tL${blockTopBottom} \r\n\t\t\t\t\tL${blockTopRight} \r\n\t\t\t\t\tL${blockTopTop} \r\n\t\t\t\t\tL${blockTopLeft} Z\" /></g>`\r\n\r\n\t\tlet coords: Coords = { \"top\": top, \"left\": left, \"bottom\": bottom, \"right\": right }\r\n\r\n\t\treturn { html: html, coords: coords }\r\n\t}\r\n}\r\n","import { Color } from './mapGenerationFunctions.component'\r\n\r\nexport class Config {\r\n\r\n\tprivate _tileWidth: number = 35\r\n\tprivate _tileLength: number = 35\r\n\tprivate _tileHeight: number = 20\r\n\tprivate _tileSmallAngle: number = 85\r\n\tprivate _tileLargeAngle: number = 100\r\n\tprivate _groundColor: Color = new Color('f5f3e5')\r\n\tprivate _buildingBaseColor: Color = new Color(\r\n\t\t125 + Math.floor(Math.random() * 75),\r\n\t\t170 + Math.floor(Math.random() * 40),\r\n\t\t180 + Math.floor(Math.random() * 30)\r\n\t)\r\n\tprivate _tileEdgeBleed: number = 0.38\r\n\r\n\tpublic get tileWidth(): number {\r\n\t\treturn this._tileWidth\r\n\t}\r\n\r\n\tpublic get tileLength(): number {\r\n\t\treturn this._tileLength\r\n\t}\r\n\r\n\tpublic get tileHeight(): number {\r\n\t\treturn this._tileHeight\r\n\t}\r\n\r\n\tpublic get tileSmallAngle(): number {\r\n\t\treturn this._tileSmallAngle\r\n\t}\r\n\r\n\tpublic get tileLargeAngle(): number {\r\n\t\treturn this._tileLargeAngle\r\n\t}\r\n\r\n\tpublic get groundColor(): Color {\r\n\t\treturn this._groundColor\r\n\t}\r\n\r\n\tpublic get buildingBaseColor(): Color {\r\n\t\treturn this._buildingBaseColor\r\n\t}\r\n\r\n\tpublic get tileEdgeBleed(): number {\r\n\t\treturn this._tileEdgeBleed\r\n\t}\r\n\r\n\tpublic getMapWidth(mapArrayWidth: number): number {\r\n\t\treturn mapArrayWidth * this._tileWidth\r\n\t}\r\n\r\n\tpublic getMapLength(mapArrayLength: number): number {\r\n\t\treturn mapArrayLength * this._tileLength\r\n\t}\r\n}\r\n\r\nexport interface Coords {\r\n\ttop?: Position,\r\n\tleft?: Position,\r\n\tbottom?: Position,\r\n\tright?: Position\r\n}\r\n\r\nexport interface TileTemplate {\r\n\thtml?: string,\r\n\tcoords?: Coords\r\n}\r\n\r\nexport interface Position {\r\n\tx?: number,\r\n\ty?: number\r\n}\r\n","import Map from './mapper.component'\r\nimport { Renderer } from './builder.component'\r\nimport { Color } from './mapGenerationFunctions.component'\r\nimport { Config } from './config.component'\r\n\r\nclass RandomBuilding {\r\n\r\n\tprivate _map: Map\r\n\tprivate _builder: Renderer = new Renderer\r\n\tprivate config: Config = new Config\r\n\r\n\tconstructor() {\r\n\t\tthis._map = new Map(20, 20, 10, 2, (4 + Math.floor(Math.random() * 7)), 2, 4)\r\n\t\tdocument.querySelector('body').style.background = this.config.groundColor.hex()\r\n\t}\r\n\r\n\tget map() {\r\n\t\treturn this._map\r\n\t}\r\n\r\n\tpublic colorMap(): string {\r\n\t\treturn this._builder.showData(this._map) + this._builder.build2DMap(this._map)\r\n\t}\r\n\r\n\tpublic drawTileMap(): string {\r\n\t\treturn this._builder.buildMap(this._map)\r\n\t}\r\n}\r\n\r\n/*\r\nconst color = new Color(150, 225, 116);\r\n\r\nconst colorDivs = `\r\n\t<div class=\"color__tile\" style=\"background-color: rgb(${color.getShadowsRGB().r},${color.getShadowsRGB().g},${color.getShadowsRGB().b})\"></div>\r\n\t<div class=\"color__tile\" style=\"background-color: rgb(${color.rgb().r},${color.rgb().g},${color.rgb().b})\"></div>\r\n\t<div class=\"color__tile\" style=\"background-color: rgb(${color.getHighlightsRGB().r},${color.getHighlightsRGB().g},${color.getHighlightsRGB().b})\"></div>`\r\n\r\ndocument.querySelector('#color').innerHTML = colorDivs */\r\n\r\nconst building = new RandomBuilding();\r\n\r\ndocument.querySelector(\"#world\").innerHTML = building.drawTileMap()","import { Config } from './config.component'\r\n\r\nexport class MapGenerationFunctions {\r\n\r\n\tprivate config: Config = new Config();\r\n\tsmallAngle = this.config.tileSmallAngle;\r\n\tlargeAngle = this.config.tileLargeAngle;\r\n\r\n\tconstructor() { }\r\n\r\n\tpublic calculateAdditionalBlockIterations(maximumBlockIterations: number) {\r\n\t\treturn 2 + Math.floor(Math.random() * maximumBlockIterations);\r\n\t}\r\n\r\n\t// calculate the dimensions to draw the isometric perspective tile with the parameters as if it were a straight square tile\r\n\tpublic calculateStraightLinesFromIsometricSquare (blockWidth: number, blockHeight: number) {\r\n\t\t// lengths this function returns when it comes to positions of longest and shortest sides as array\r\n\t\t/*           [0]\r\n\t\t *   _________________ \r\n\t\t *   |    [3]  |      |\r\n\t\t *   | [5]            |\r\n\t\t *   |               -|\r\n\t\t *   |-               | [1]\r\n\t\t *   | [4]            |\r\n\t\t *   |    [2]         |\r\n\t\t *   |_______|________|\r\n\t\t */  \r\n\r\n\t\tlet smallOuterAngle = (180 - this.smallAngle) / 2;\r\n\t\tlet largeOuterAngle = (180 - this.largeAngle) / 2;\r\n\r\n\t\tlet horizontalWidthFromBottom = this.getHorizontalBottomShortestWidth(blockWidth, smallOuterAngle);\r\n\t\tlet verticalHeightFromBottom = this.getVerticalBottomShortestHeight(horizontalWidthFromBottom, smallOuterAngle);\r\n\r\n\t\tlet horizontalWidthFromTop = this.getHorizontalTopLongestWidth(blockHeight, largeOuterAngle);\r\n\t\tlet verticalHeightFromTop = this.getVerticalTopLongestHeight(horizontalWidthFromTop, largeOuterAngle);\r\n\r\n\t\tlet totalHeight = verticalHeightFromBottom + verticalHeightFromTop;\r\n\t\tlet totalWidth = horizontalWidthFromBottom + horizontalWidthFromTop;\r\n\r\n\t\treturn {\t'totalWidth': totalWidth, // 0\r\n\t\t\t\t\t'totalHeight': totalHeight,  // 1\r\n\t\t\t\t\t'horizontalWidthFromBottom': horizontalWidthFromBottom,  // 2\r\n\t\t\t\t\t'horizontalWidthFromTop': horizontalWidthFromTop,  // 3\r\n\t\t\t\t\t'verticalHeightFromBottom': verticalHeightFromBottom,  // 4\r\n\t\t\t\t\t'verticalHeightFromTop': verticalHeightFromTop } // 5\r\n\t}\r\n\r\n\t// calculate the amount of pixels from the bottom left side of a straight square to the point at the bottom \r\n\t// .. where the tip of the tile meets the border of the square\r\n\tpublic getHorizontalBottomShortestWidth (diagonalWidth: number, smallAngle: number): number {\r\n\t\treturn diagonalWidth * Math.sin(this.toRadians(smallAngle));\r\n\t}\r\n\r\n\tpublic getVerticalBottomShortestHeight (diagonalHeight: number, smallAngle: number): number {\r\n\t\treturn diagonalHeight * Math.cos(this.toRadians(smallAngle));\r\n\t}\r\n\r\n\tpublic getHorizontalTopLongestWidth (diagonalWidth: number, largeAngle: number): number {\r\n\t\treturn diagonalWidth * Math.sin(this.toRadians(largeAngle));\r\n\t}\r\n\r\n\tpublic getVerticalTopLongestHeight (diagonalHeight: number, largeAngle: number): number {\r\n\t\treturn diagonalHeight * Math.cos(this.toRadians(largeAngle));\r\n\t}\r\n\r\n\ttoRadians (angle: number): number {\r\n\t\treturn angle * (Math.PI / 180);\r\n\t}\r\n}\r\n\r\nexport enum TileColor {\r\n\tRed = 125 + Math.floor(Math.random() * 75),\r\n\tGreen = 170 + Math.floor(Math.random() * 40),\r\n\tBlue = 180 + Math.floor(Math.random() * 30)\r\n}\r\n\r\nexport enum BuildingHeightVariations {\r\n\tTallCenter = 'tallCenter',\r\n\tTallSurrounds = 'tallSurrounds',\r\n\tRandom = 'random'\r\n}\r\n\r\nexport class Color {\r\n\tprivate _colorRgb: RGB\r\n\tprivate _colorHex: string\r\n\r\n\tconstructor(...params: any[]) {\r\n\t\tlet error = null\r\n\t\tif (params.length === 1) {\r\n\t\t\tif (typeof params[0] === 'string') {\r\n\t\t\t\tif (this.validateHex(params[0])) {\r\n\t\t\t\t\tlet hexColor = params[0]\r\n\t\t\t\t\tif (hexColor.charAt(0) !== '#') {\r\n\t\t\t\t\t\thexColor = `#${hexColor}`\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.setHex(hexColor)\r\n\t\t\t\t\tthis.hexToRgb()\r\n\t\t\t\t} else {\r\n\t\t\t\t\terror = \"Hexadecimal color is incorrect\"\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\terror = \"Length of 1 in parameters is not equal to string\"\r\n\t\t\t}\r\n\t\t} else if (params.length === 3) {\r\n\t\t\tif (this.validateRgb(params)) {\r\n\t\t\t\tthis.setRgb(params[0], params[1], params[2])\r\n\t\t\t\tthis.rgbToHex()\r\n\t\t\t} else {\r\n\t\t\t\terror = \"Values of RGB exceed limits\"\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (error !== null) {\r\n\t\t\tthrow \"Color type is incorrect. \" + error + \": \" + params.toString()\r\n\t\t}\r\n\t}\r\n\r\n\tpublic setRgb(r: number, g: number, b: number) {\r\n\t\tthis._colorRgb = {r: r, g: g, b: b} as RGB\r\n\t}\r\n\r\n\tpublic setHex(hexadecimal: string) {\r\n\t\tif (hexadecimal.length < 7) {\r\n\t\t\tlet hexVal1 = hexadecimal.charAt(1)\r\n\t\t\tlet hexVal2 = hexadecimal.charAt(2)\r\n\t\t\tlet hexVal3 = hexadecimal.charAt(3)\r\n\t\t\thexadecimal = \"#\" + hexVal1 + hexVal1 + hexVal2 + hexVal2 + hexVal3 + hexVal3\r\n\t\t}\r\n\t\tthis._colorHex = hexadecimal\r\n\t}\r\n\r\n\tpublic rgb(): RGB {\r\n\t\treturn this._colorRgb\r\n\t}\r\n\r\n\tpublic hex(): string {\r\n\t\treturn this._colorHex\r\n\t}\r\n\r\n\tvalidateRgb(rgb: number[]): boolean {\r\n\t\tif (rgb[0] > -1 && rgb[0] < 256 &&\r\n\t\t\trgb[1] > -1 && rgb[1] < 256 &&\r\n\t\t\trgb[2] > -1 && rgb[2] < 256) {\r\n\t\t\treturn true\r\n\t\t} else {\r\n\t\t\treturn false\r\n\t\t}\r\n\t}\r\n\r\n\tvalidateHex(hex: string): boolean {\r\n\t\tlet regex = /^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/\r\n\t\tif (hex.match(regex)) {\r\n\t\t\treturn true\r\n\t\t} else {\r\n\t\t\treturn false\r\n\t\t}\r\n\t}\r\n\r\n\thexToRgb() {\r\n\t\tlet hexValues: string[] = this._colorHex.substr(1).split('')\r\n\t\tlet hexPair1 = parseInt(hexValues[0]+hexValues[1], 16)\r\n\t\tlet hexPair2 = parseInt(hexValues[2]+hexValues[3], 16)\r\n\t\tlet hexPair3 = parseInt(hexValues[4]+hexValues[5], 16)\r\n\t\tthis.setRgb(hexPair1, hexPair2, hexPair3)\r\n\t\tthis.rgbToHex()\r\n\t}\r\n\r\n\trgbToHex() {\r\n\t\tif (typeof this._colorRgb === 'object') {\r\n\t\t\tlet r = this._colorRgb.r\r\n\t\t\tlet b = this._colorRgb.b\r\n\t\t\tlet g = this._colorRgb.g\r\n\t\t\tlet hexR = Number(r).toString(16)\r\n\t\t\tlet hexG = Number(g).toString(16)\r\n\t\t\tlet hexB = Number(b).toString(16)\r\n\t\t\tthis._colorHex = \"#\" + hexR + hexG + hexB\r\n\t\t}\r\n\t}\r\n\r\n\tpublic getHighlightsRGB(): RGB {\r\n\t\tlet r = this._colorRgb.r\r\n\t\tlet b = this._colorRgb.b\r\n\t\tlet g = this._colorRgb.g\r\n\t\tlet newR = r + 45\r\n\t\tlet newG = g + 45\r\n\t\tlet newB = b + 30\r\n\t\tif (newR > 255) newR = 255\r\n\t\tif (newG > 255) newG = 255\r\n\t\tif (newR > 255) newR = 255\r\n\t\treturn {r: newR, g: newG, b: newB}\r\n\t}\r\n\r\n\tpublic getShadowsRGB(): RGB {\r\n\t\tlet r = this._colorRgb.r\r\n\t\tlet b = this._colorRgb.b\r\n\t\tlet g = this._colorRgb.g\r\n\t\tlet newR = r - 70\r\n\t\tlet newG = g - 70\r\n\t\tlet newB = b - 60\r\n\t\tif (newR < 0) newR = 0\r\n\t\tif (newG < 0) newG = 0\r\n\t\tif (newR < 0) newR = 0\r\n\t\treturn {r: newR, g: newG, b: newB}\r\n\t}\r\n}\r\n\r\nexport interface RGB {\r\n\tr: number,\r\n\tg: number,\r\n\tb: number\r\n}\r\n","import { MapGenerationFunctions, BuildingHeightVariations } from './mapGenerationFunctions.component'\r\nimport { Tile, TileType } from './tile.component'\r\nimport { Config } from './config.component'\r\n\r\nexport default class Map {\r\n\r\n\tprivate _mapWidth: number\r\n\tprivate _mapLength: number\r\n\tprivate _mapMaxHeight: number\r\n\tprivate _averageBuildingSize: number\r\n\tprivate _blockHeight: number\r\n\tprivate _maximumBlockIterations: number\r\n\tprivate _additionalBlockIterations: number\r\n\tprivate _mapEdgeWidth: number\r\n\tprivate _highestPoint: number\r\n\tprivate _startBlockXfromCenterDeviation: number\r\n\tprivate _world: any[][]\r\n\tprivate _blockHeightsArray: number[]\r\n\tprivate _blockGroupCollection: any[]\r\n\tprivate _blockGroups: any[]\r\n\tprivate _startBlockEdges: number[]\r\n\tprivate _additionalBlockEdges: number[]\r\n\tprivate _mapGen: MapGenerationFunctions = new MapGenerationFunctions()\r\n\tprivate config: Config = new Config()\r\n\tprivate _blockHeightVariationLabels = [BuildingHeightVariations.TallCenter, BuildingHeightVariations.TallSurrounds, BuildingHeightVariations.Random]\r\n\tprivate _blockHeightVariation = this._blockHeightVariationLabels[Math.floor(Math.random() * 3)]\r\n\r\n\tconstructor(\t\r\n\t\t\tmapWidth: number, \r\n\t\t\tmapLength: number, \r\n\t\t\tmapMaxHeight: number, \r\n\t\t\tmapEdgeWidth: number,\r\n\t\t\taverageBuildingSize: number,\r\n\t\t\tblockHeight: number,\r\n\t\t\tmaximumBlockIterations: number)\r\n\t{\r\n\t\tthis._mapWidth = mapWidth\r\n\t\tthis._mapLength = mapLength\r\n\t\tthis._mapMaxHeight = mapMaxHeight\r\n\t\tthis._mapEdgeWidth = mapEdgeWidth\r\n\t\tthis._averageBuildingSize = averageBuildingSize\r\n\t\tthis._blockHeight = blockHeight\r\n\t\tthis._maximumBlockIterations = maximumBlockIterations\r\n\t\tthis._additionalBlockIterations = this._mapGen.calculateAdditionalBlockIterations(maximumBlockIterations)\r\n\t\tthis._blockGroups = []\r\n\r\n\t\tlet mapLengthHalf = Math.floor(mapLength / 2)\r\n\t\tlet mapWidthHalf = Math.floor(mapWidth / 2)\r\n\t\tlet startBlockXfromCenterDeviation = 6\r\n\t\tlet startblockLength = (this._averageBuildingSize + 1) + Math.floor(Math.random() * 6)\r\n\t\tlet startblockWidth = this._averageBuildingSize + Math.floor(Math.random() * 5)\r\n\t\tlet startblockXfromCenter = 6 + Math.floor(Math.random() * startBlockXfromCenterDeviation)\r\n\t\tlet startblockLengthHalf = Math.floor(startblockLength / 2)\r\n\t\tlet startblockWidthHalf = Math.floor(startblockWidth / 2)\r\n\t\tlet startingPositionX = Math.floor(this._mapWidth / 2) - Math.floor(startblockXfromCenter / 2)\r\n\r\n\t\tthis._world = []\r\n\t\tlet i = 0\r\n\t\tlet tileHeight = 0\r\n\t\tlet firstBlockHeight\r\n\r\n\t\tif (this._blockHeightVariation == BuildingHeightVariations.TallCenter) {\r\n\t\t\tfirstBlockHeight = blockHeight * 2\r\n\t\t} else if (this._blockHeightVariation == BuildingHeightVariations.TallSurrounds) {\r\n\t\t\tfirstBlockHeight = 1 + Math.round(Math.random())\r\n\t\t\tblockHeight = firstBlockHeight\r\n\t\t} else {\r\n\t\t\tfirstBlockHeight = blockHeight\r\n\t\t}\r\n\r\n\t\tconsole.log(\"Block height variation: \" + this._blockHeightVariation)\r\n\r\n\t\tfor (let y = 0; y < this.mapLength; y++) {\r\n\r\n\t\t\tthis._world[y] = []\r\n\r\n\t\t\tfor (let x = 0; x < this.mapWidth; x++) {\r\n\r\n\t\t\t\tlet thisBlockGroup = 0\r\n\r\n\t\t\t\tlet column = new Column(false, x, y, 0)\r\n\r\n\t\t\t\tif (y >= mapLengthHalf && y <= (mapLengthHalf + startblockLengthHalf) ) {\r\n\r\n\t\t\t\t\tif (x > startingPositionX && x <= (startingPositionX + startblockWidth) ) {\r\n\r\n\t\t\t\t\t\tthisBlockGroup = 1\r\n\t\t\t\t\t\tlet tileStack = []\r\n\r\n\t\t\t\t\t\tfor (let h = 0; h < firstBlockHeight; h++) {\r\n\r\n\t\t\t\t\t\t\tlet thisPillar = 0\r\n\t\t\t\t\t\t\tlet thisWindowed = 0\r\n\t\t\t\t\t\t\tlet isRoof = (h === firstBlockHeight-1) ? true : false\r\n\r\n\t\t\t\t\t\t\ttileStack.push(\r\n\t\t\t\t\t\t\t\tnew Tile(\r\n\t\t\t\t\t\t\t\t\ti, \r\n\t\t\t\t\t\t\t\t\tx, \r\n\t\t\t\t\t\t\t\t\ty, \r\n\t\t\t\t\t\t\t\t\th, \r\n\t\t\t\t\t\t\t\t\tTileType.Body,\r\n\t\t\t\t\t\t\t\t\tthis.config.buildingBaseColor,\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t'roof':\t\t\tisRoof,\r\n\t\t\t\t\t\t\t\t\t\t'pillar': \t\tthisPillar,\r\n\t\t\t\t\t\t\t\t\t\t'windowed': \tthisWindowed,\r\n\t\t\t\t\t\t\t\t\t\t'tower': \t\tfalse\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t)\r\n\r\n\t\t\t\t\t\t\tif (this._blockGroups.indexOf(thisBlockGroup) === -1) {\r\n\t\t\t\t\t\t\t\tthis._blockGroups[thisBlockGroup] = new Array( [y,x] )\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis._blockGroups[thisBlockGroup].push([y,x])\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\ti++\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tcolumn = new Column(true, x, y, firstBlockHeight)\r\n\r\n\t\t\t\t\t\tcolumn.blockGroup = thisBlockGroup\r\n\t\t\t\t\t\tcolumn.height = firstBlockHeight\r\n\t\t\t\t\t\tcolumn.corner = false\r\n\t\t\t\t\t\tcolumn.tileStack = tileStack\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._world[y][x] = column\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.setEdges()\r\n\t}\r\n\r\n\tget mapWidth(): number {\r\n\t\treturn this._mapWidth\r\n\t}\r\n\r\n\tget mapLength(): number {\r\n\t\treturn this._mapLength\r\n\t}\r\n\r\n\tget map(): any[] {\r\n\t\treturn this._world\r\n\t}\r\n\r\n\tpublic getColumn(x, y): Column {\r\n\t\treturn this._world[y][x]\r\n\t}\r\n\r\n\tpublic getTiles(x, y): Tile[] {\r\n\t\treturn this._world[y][x].tileStack\r\n\t}\r\n\r\n\tpublic getTile(x, y, h): Tile {\r\n\t\treturn this._world[y][x].getTile(h)\r\n\t}\r\n\r\n\tpublic getTopTile(x, y): Tile {\r\n\t\tlet height = this._world[y][x].height\r\n\t\treturn this._world[y][x].getTile(height-1)\r\n\t}\r\n\r\n\tsetEdges(): void {\r\n\r\n\t\tfor (let y = 0; y < this.mapLength; y++) {\r\n\t\t\tfor (let x = 0; x < this.mapWidth; x++) {\r\n\t\t\t\t\r\n\t\t\t\tif (y > 0 && x > 0 && y < this.mapLength-1 && x < this.mapWidth-1 && this._world[y][x].isDefined) {\r\n\r\n\t\t\t\t\tif (!this._world[y-1][x].isDefined) {\r\n\t\t\t\t\t\tthis._world[y][x].edge.top = true\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (!this._world[y+1][x].isDefined) {\r\n\t\t\t\t\t\tthis._world[y][x].edge.bottom = true\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (!this._world[y][x-1].isDefined) {\r\n\t\t\t\t\t\tthis._world[y][x].edge.left = true\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (!this._world[y][x+1].isDefined) {\r\n\t\t\t\t\t\tthis._world[y][x].edge.right = true\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( (this._world[y][x].edge['top'] && this._world[y][x].edge['right']) ||\r\n\t\t\t\t\t\t (this._world[y][x].edge['top'] && this._world[y][x].edge['left']) ||\r\n\t\t\t\t\t\t (this._world[y][x].edge['bottom'] && this._world[y][x].edge['right']) ||\r\n\t\t\t\t\t\t (this._world[y][x].edge['bottom'] && this._world[y][x].edge['left']) ) {\r\n\t\t\t\t\t\tthis._world[y][x].corner = true\r\n\t\t\t\t\t}\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nclass Column {\r\n\r\n\tprivate _defined: boolean\r\n\tprivate _x: number\r\n\tprivate _y: number\r\n\tprivate _height: number\r\n\tprivate _blockGroup: number\r\n\tprivate _corner: boolean\r\n\tprivate _edge: object = { 'top': false, 'right': false, 'bottom': false, 'left': false }\r\n\tprivate _tileStack: Tile[] = []\r\n\r\n\tconstructor(private defined: boolean, private colX: number, private colY: number, private colHeight: number) {\r\n\t\tthis._defined = defined\r\n\t\tthis._x = colX\r\n\t\tthis._y = colY\r\n\t\tthis._height = colHeight\r\n\t}\r\n\r\n\tset x(x: number) {\r\n\t\tthis._x = x\r\n\t}\r\n\r\n\tset y(y: number) {\r\n\t\tthis._y = y\r\n\t}\r\n\r\n\tset height(height: number) {\r\n\t\tthis._height = height\r\n\t}\r\n\r\n\tset blockGroup(groupNum: number) {\r\n\t\tthis._blockGroup = groupNum\r\n\t}\r\n\r\n\tset corner(corner: boolean) {\r\n\t\tthis._corner = corner\r\n\t}\r\n\r\n\tset edge(edge: object) {\r\n\t\tthis._edge = edge\r\n\t}\r\n\r\n\tset tileStack(tiles: Tile[]) {\r\n\t\tthis._tileStack = tiles\r\n\t}\r\n\r\n\tget isDefined(): boolean {\r\n\t\treturn this._defined\r\n\t}\r\n\r\n\tget x(): number {\r\n\t\treturn this._x\r\n\t}\r\n\r\n\tget y(): number {\r\n\t\treturn this._y\r\n\t}\r\n\r\n\tget height(): number {\r\n\t\treturn this._height\r\n\t}\r\n\r\n\tget blockGroup(): number {\r\n\t\treturn this._blockGroup\r\n\t}\r\n\r\n\tget corner(): boolean {\r\n\t\treturn this._corner\r\n\t}\r\n\r\n\tget edge(): object {\r\n\t\treturn this._edge\r\n\t}\r\n\r\n\tget tileStack(): Tile[] {\r\n\t\treturn this._tileStack\r\n\t}\r\n\r\n\tpublic getTile(height: number): Tile {\r\n\t\treturn this._tileStack[height]\r\n\t}\r\n}\r\n","import { Color } from './mapGenerationFunctions.component'\r\n\r\nexport class Tile {\r\n\t\r\n\t_id: number\r\n\t_x: number\r\n\t_y: number\r\n\t_h: number\r\n\t_tileType: TileType\r\n\t_tileColor: Color\r\n\t_options?: object = {}\r\n\r\n\tconstructor(\t\t\t\r\n\t\t\tid: number,\r\n\t\t\tx: number,\r\n\t\t\ty: number,\r\n\t\t\th: number,\r\n\t\t\ttileType: TileType,\r\n\t\t\ttileColor: Color,\r\n\t\t\toptions?: object)\r\n\t{\r\n\t\tthis._id = id\r\n\t\tthis._x = x\r\n\t\tthis._y = y\r\n\t\tthis._h = h\r\n\t\tthis._tileType = tileType\r\n\t\tthis._tileColor = tileColor\r\n\r\n\t\tif (options) {\r\n\t\t\tthis._options = options\r\n\t\t}\r\n\t}\r\n\r\n\tget id(): number {\r\n\t\treturn this._id\r\n\t}\r\n\r\n\tget x(): number {\r\n\t\treturn this._x\r\n\t}\r\n\r\n\tget y(): number {\r\n\t\treturn this._y\r\n\t}\r\n\r\n\tget h(): number {\r\n\t\treturn this._h\r\n\t}\r\n\r\n\tget type(): TileType {\r\n\t\treturn this._tileType\r\n\t}\r\n\r\n\tget options(): object {\r\n\t\tif (this._tileType != TileType.None) {\r\n\t\t\treturn this._options\r\n\t\t} else {\r\n\t\t\treturn { 'defined': false }\r\n\t\t}\r\n\t}\r\n\r\n\tpublic getColor(): Color {\r\n\t\treturn this._tileColor\r\n\t}\r\n\r\n}\r\n\r\nexport enum TileType {\r\n\tNone = 'none',\r\n\tBody = 'body',\r\n\tTower = 'tower',\r\n\tRoof = 'roof'\r\n}\r\n"]}
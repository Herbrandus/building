{"version":3,"sources":["node_modules/browser-pack/_prelude.js","bundle.min.js","src/ts/builder.component.ts","src/ts/config.component.ts","src/ts/main.ts","src/ts/mapGenerationFunctions.component.ts","src/ts/mapper.component.ts","src/ts/tile.component.ts"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","Object","defineProperty","value","mapGenerationFunctions_component_1","config_component_1","Builder","[object Object]","this","config","Config","calculations","MapGenerationFunctions","map","html","mapWidth","mapLength","tileWidth","tileLength","htmlMap","getMapWidth","y","x","getColumn","isDefined","tile","getTopTile","tileTopColor","getColor","id","mapTotalWidth","mapTotalLength","testTile","createTile","console","log","coords","bottom","top","yDeviation","right","left","tileHalfWidthLeft","tileHalfWidthRight","mapWidthLeft","tileHalfLengthTop","mapLengthTop","mapLengthBottom","mapWidthPx","Math","round","mapLengthPx","lastTile","startTileX","thisPosY","thisPosX","newTile","xPos","yPos","tileW","tileL","tileColor","groundColor","dimensions","calculateStraightLinesFromIsometricSquare","horizontalWidthFromTop","verticalHeightFromTop","horizontalWidthFromBottom","totalHeight","totalWidth","verticalHeightFromBottom","pointLeft","./config.component","./mapGenerationFunctions.component","2","_tileWidth","_tileLength","_tileHeight","_tileSmallAngle","_tileLargeAngle","_groundColor","tileHeight","tileSmallAngle","tileLargeAngle","mapArrayWidth","mapArrayLength","3","mapper_component_1","builder_component_1","building","_builder","_map","default","floor","random","showData","build2DMap","buildMap","document","querySelector","innerHTML","drawTileMap","./builder.component","./mapper.component","4","smallAngle","largeAngle","maximumBlockIterations","adjacent","opposite","sum","pow","sqrt","blockWidth","blockHeight","smallOuterAngle","largeOuterAngle","getHorizontalBottomShortestWidth","getVerticalBottomShortestHeight","getHorizontalTopLongestWidth","getVerticalTopLongestHeight","diagonalWidth","ceil","sin","toRadians","diagonalHeight","cos","angle","PI","TileColor","BuildingHeightVariations","5","tile_component_1","mapMaxHeight","mapEdgeWidth","averageBuildingSize","_mapGenerationFunctions","_blockHeightVariationLabels","TallCenter","TallSurrounds","Random","_blockHeightVariation","_mapWidth","_mapLength","_mapMaxHeight","_mapEdgeWidth","_averageBuildingSize","_blockHeight","_maximumBlockIterations","_additionalBlockIterations","calculateAdditionalBlockIterations","_blockGroups","mapLengthHalf","startblockLength","startblockWidth","startblockXfromCenter","startblockLengthHalf","startingPositionX","_world","firstBlockHeight","thisBlockGroup","column","Column","tileStack","h","thisPillar","thisWindowed","isRoof","push","Tile","TileType","Body","Red","Green","Blue","roof","pillar","windowed","tower","indexOf","Array","blockGroup","height","corner","setEdges","getTile","edge","defined","colX","colY","colHeight","_edge","_tileStack","_defined","_x","_y","_height","groupNum","_blockGroup","_corner","tiles","./tile.component","6","tileType","colorRed","colorGreen","colorBlue","options","_options","_id","_h","_tileType","_colorRed","_colorGreen","_colorBlue","type","None","g","b"],"mappings":"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","file":"bundle.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()",null,"import { MapGenerationFunctions } from './mapGenerationFunctions.component'\r\nimport Map from './mapper.component'\r\nimport { Tile, TileType } from './tile.component'\r\nimport { Config, Coords, TileTemplate, Position } from './config.component'\r\n\r\nexport class Builder {\t\r\n\r\n\tprivate config: Config = new Config()\r\n\tprivate calculations: MapGenerationFunctions = new MapGenerationFunctions()\r\n\r\n\tconstructor() {\t}\r\n\r\n\tshowData(map: Map): string {\r\n\r\n\t\tlet html = '<div class=\"showData\">'\r\n\r\n\t\thtml += `map width: ${map.mapWidth} tiles<br>map length: ${map.mapLength} tiles<br>`\r\n\t\thtml += `tile width: ${this.config.tileWidth}<br>tile length: ${this.config.tileLength}<br>`\r\n\t\thtml += '</div>'\r\n\r\n\t\treturn html\r\n\t}\r\n\r\n\tbuild2DMap(map: Map): string {\r\n\r\n\t\tlet htmlMap = `<div class=\"map\" style=\"width:${this.config.getMapWidth(map.mapWidth)}px;\">`\r\n\r\n\t\tfor (let y = 0; y < map.mapLength; y++) {\r\n\t\t\tfor (let x = 0; x < map.mapWidth; x++) {\r\n\r\n\t\t\t\thtmlMap += `<div class=\"tile\" style=\"width:${this.config.tileWidth}px;height:${this.config.tileLength}px;`\r\n\r\n\t\t\t\tif (map.getColumn(x, y).isDefined) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet tile = map.getTopTile(x, y)\r\n\t\t\t\t\tlet tileTopColor = tile.getColor()\r\n\t\t\t\t\tlet tileColor = `rgb(${tileTopColor['r']}, ${tileTopColor['g']}, ${tileTopColor['b']})`\r\n\r\n\t\t\t\t\thtmlMap += `background-color:${tileColor};\">${tile.id}<br>(${x}, ${y})</div>`\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\thtmlMap += `\">${x}, ${y}</div>`\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\thtmlMap += `</div>`\r\n\r\n\t\treturn htmlMap\r\n\t}\r\n\r\n\tbuildMap(map: Map): string {\r\n\r\n\t\tlet mapTotalWidth = map.mapWidth\r\n\t\tlet mapTotalLength = map.mapLength\r\n\r\n\t\tlet testTile = this.createTile(0, 0);\r\n\r\n\t\tconsole.log(testTile)\r\n\r\n\t\tlet xDeviation = testTile.coords.bottom.x - testTile.coords.top.x;\r\n\t\tlet yDeviation = testTile.coords.right.y - testTile.coords.left.y;\r\n\t\tlet tileHalfWidthLeft = testTile.coords.top.x - testTile.coords.left.x;\r\n\t\tlet tileHalfWidthRight = testTile.coords.right.x - testTile.coords.top.x;\r\n\t\tlet mapWidthLeft = tileHalfWidthLeft * mapTotalLength;\r\n\t\tlet mapWidthRight = tileHalfWidthRight * mapTotalWidth;\r\n\t\tlet tileHalfLengthTop = testTile.coords.right.y;\r\n\t\tlet tileHalfLengthBottom = testTile.coords.bottom.y - testTile.coords.right.y;\r\n\t\tlet mapLengthTop = tileHalfLengthTop * mapTotalWidth;\r\n\t\tlet mapLengthBottom = tileHalfLengthBottom * mapTotalLength;\r\n\t\tlet mapWidthPx = Math.round((tileHalfWidthLeft + tileHalfWidthRight) * (mapTotalWidth ))\r\n\t\tlet mapLengthPx = Math.round(mapLengthTop + mapLengthBottom)\r\n\r\n\t\tconsole.log(mapWidthLeft)\r\n\r\n\t\tlet html = '<svg width=\"'+mapWidthPx+'\" height=\"'+mapLengthPx+'\">';\r\n\r\n\t\tlet lastTile = null\r\n\t\tlet startTileX = tileHalfWidthLeft * (mapTotalWidth - 1)\r\n\r\n\t\tfor (let y = 0; y < mapTotalLength; y++) {\r\n\r\n\t\t\t//console.log('y: ' + y)\r\n\r\n\t\t\tfor (let x = 0; x < mapTotalWidth; x++) {\r\n\r\n\t\t\t\tlet thisPosY = 0\r\n\t\t\t\tlet thisPosX = 0\r\n\r\n\t\t\t\tif (x === 0 && y === 0) {\r\n\t\t\t\t\tthisPosX = startTileX\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (lastTile != null) {\r\n\t\t\t\t\tthisPosY = lastTile.coords.right.y\t\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (y > 0 && x === 0) {\r\n\t\t\t\t\tthisPosX = startTileX - (tileHalfWidthLeft * y)\r\n\t\t\t\t\tthisPosY = (tileHalfLengthTop * y) - (yDeviation * y)\r\n\t\t\t\t}\t\r\n\t\t\t\t\r\n\t\t\t\tif (x > 0) {\r\n\t\t\t\t\tthisPosX = (lastTile.coords.right.x - (lastTile.coords.right.x - lastTile.coords.bottom.x))\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet newTile = this.createTile(thisPosX, thisPosY)\r\n\r\n\t\t\t\thtml += newTile.html\r\n\r\n\t\t\t\tlastTile = newTile\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\thtml += '</svg>'\r\n\r\n\t\treturn html\r\n\t}\r\n\r\n\tcreateTile(xPos: number, yPos: number): TileTemplate {\r\n\r\n\t\tlet tileW = this.config.tileWidth\r\n\t\tlet tileL = this.config.tileLength\r\n\r\n\t\tlet tileColor = `#${this.config.groundColor}`\r\n\r\n\t\tlet dimensions = this.calculations.calculateStraightLinesFromIsometricSquare(tileW, tileL);\r\n\r\n\t\tlet top: Position = { \"x\": (xPos + dimensions.horizontalWidthFromTop), \"y\": yPos}\r\n\t\tlet left: Position = { \"x\": xPos, \"y\": (yPos + dimensions.verticalHeightFromTop) }\r\n\t\tlet bottom: Position = { \"x\": (xPos + dimensions.horizontalWidthFromBottom), \"y\": (yPos + dimensions.totalHeight) }\r\n\t\tlet right: Position = { \"x\": (xPos + dimensions.totalWidth), \"y\": (yPos + dimensions.verticalHeightFromBottom) }\r\n\r\n\t\tlet pointTop = `${top.x} ${top.y}`\r\n\t\tlet pointLeft = `${left.x} ${left.y}`\r\n\t\tlet pointBottom = `${bottom.x} ${bottom.y}`\r\n\t\tlet pointRight = `${right.x} ${right.y}`\r\n\r\n\t\tvar html = `<path fill=\"${tileColor}\"\r\n\t\t\t\t\td=\"M${pointLeft} \r\n\t\t\t\t\tL${pointBottom} \r\n\t\t\t\t\tL${pointRight} \r\n\t\t\t\t\tL${pointTop} \r\n\t\t\t\t\tL${pointLeft} Z\" />`\r\n\r\n\t\tlet coords: Coords = { \"top\": top, \"left\": left, \"bottom\": bottom, \"right\": right }\r\n\r\n\t\treturn { html: html, coords: coords }\r\n\t}\r\n}","export class Config {\r\n\r\n\tprivate _tileWidth: number = 35\r\n\tprivate _tileLength: number = 35\r\n\tprivate _tileHeight: number = 20\r\n\tprivate _tileSmallAngle: number = 80\r\n\tprivate _tileLargeAngle: number = 100\r\n\tprivate _groundColor: string = 'dbc'\r\n\r\n\tpublic get tileWidth(): number {\r\n\t\treturn this._tileWidth\r\n\t}\r\n\r\n\tpublic get tileLength(): number {\r\n\t\treturn this._tileLength\r\n\t}\r\n\r\n\tpublic get tileHeight(): number {\r\n\t\treturn this._tileHeight\r\n\t}\r\n\r\n\tpublic get tileSmallAngle(): number {\r\n\t\treturn this._tileSmallAngle\r\n\t}\r\n\r\n\tpublic get tileLargeAngle(): number {\r\n\t\treturn this._tileLargeAngle\r\n\t}\r\n\r\n\tpublic get groundColor(): string {\r\n\t\treturn this._groundColor\r\n\t}\r\n\r\n\tpublic getMapWidth(mapArrayWidth: number): number {\r\n\t\treturn mapArrayWidth * this._tileWidth\r\n\t}\r\n\r\n\tpublic getMapLength(mapArrayLength: number): number {\r\n\t\treturn mapArrayLength * this._tileLength\r\n\t}\r\n}\r\n\r\nexport interface Coords {\r\n\ttop?: Position,\r\n\tleft?: Position,\r\n\tbottom?: Position,\r\n\tright?: Position\r\n}\r\n\r\nexport interface TileTemplate {\r\n\thtml?: string,\r\n\tcoords?: Coords\r\n}\r\n\r\nexport interface Position {\r\n\tx?: number,\r\n\ty?: number\r\n}","import Map from './mapper.component'\r\nimport { Builder } from './builder.component'\r\n\r\nclass RandomBuilding {\r\n\r\n\tprivate _map: Map\r\n\tprivate _builder: Builder = new Builder\r\n\r\n\tconstructor() {\r\n\t\tthis._map = new Map(20, 20, 10, 2, (4 + Math.floor(Math.random() * 7)), 2, 4)\r\n\t}\r\n\r\n\tget map() {\r\n\t\treturn this._map\r\n\t}\r\n\r\n\tpublic colorMap(): string {\r\n\t\treturn this._builder.showData(this._map) + this._builder.build2DMap(this._map)\r\n\t}\r\n\r\n\tpublic drawTileMap(): string {\r\n\t\treturn this._builder.buildMap(this._map)\r\n\t}\r\n}\r\n\r\nconst building = new RandomBuilding();\r\n\r\n//document.querySelector('#world').innerHTML = building.colorMap()\r\n\r\ndocument.querySelector(\"#world\").innerHTML = building.drawTileMap()","import { Config } from './config.component'\r\n\r\nexport class MapGenerationFunctions {\r\n\r\n\tprivate config: Config = new Config()\r\n\tsmallAngle = this.config.tileSmallAngle\r\n\tlargeAngle = this.config.tileLargeAngle\r\n\r\n\tconstructor() { }\r\n\r\n\tpublic calculateAdditionalBlockIterations(maximumBlockIterations: number) {\r\n\t\treturn 2 + Math.floor(Math.random() * maximumBlockIterations)\r\n\t}\r\n\r\n\tpublic calculateTriangleHypotenuse(adjacent: number, opposite: number): number {\r\n\t\tlet sum = Math.pow(adjacent, 2) + Math.pow(opposite, 2)\r\n\t\tlet result = Math.sqrt(sum)\r\n\t\treturn result\r\n\t}\t\r\n\r\n\t// calculate the dimensions to draw the isometric perspective tile with the parameters as if it were a straight square tile\r\n\tpublic calculateStraightLinesFromIsometricSquare (blockWidth: number, blockHeight: number) {\r\n\t\t// lengths this function returns when it comes to positions of longest and shortest sides as array\r\n\t\t/*           [0]\r\n\t\t *   _________________ \r\n\t\t *   |    [3]  |      |\r\n\t\t *   | [5]            |\r\n\t\t *   |               -|\r\n\t\t *   |-               | [1]\r\n\t\t *   | [4]            |\r\n\t\t *   |    [2]         |\r\n\t\t *   |_______|________|\r\n\t\t */  \r\n\r\n\t\tlet smallOuterAngle = (180 - this.smallAngle) / 2;\r\n\t\tlet largeOuterAngle = (180 - this.largeAngle) / 2;\r\n\r\n\t\tlet horizontalWidthFromBottom = this.getHorizontalBottomShortestWidth(blockWidth, smallOuterAngle);\r\n\t\tlet verticalHeightFromBottom = this.getVerticalBottomShortestHeight(horizontalWidthFromBottom, smallOuterAngle);\r\n\r\n\t\tlet horizontalWidthFromTop = this.getHorizontalTopLongestWidth(blockHeight, largeOuterAngle);\r\n\t\tlet verticalHeightFromTop = this.getVerticalTopLongestHeight(horizontalWidthFromTop, largeOuterAngle);\r\n\r\n\t\tlet totalHeight = verticalHeightFromBottom + verticalHeightFromTop;\r\n\t\tlet totalWidth = horizontalWidthFromBottom + horizontalWidthFromTop;\r\n\r\n\t\treturn {\t'totalWidth': totalWidth, \r\n\t\t\t\t\t'totalHeight': totalHeight, \r\n\t\t\t\t\t'horizontalWidthFromBottom': horizontalWidthFromBottom, \r\n\t\t\t\t\t'horizontalWidthFromTop': horizontalWidthFromTop, \r\n\t\t\t\t\t'verticalHeightFromBottom': verticalHeightFromBottom, \r\n\t\t\t\t\t'verticalHeightFromTop': verticalHeightFromTop }\r\n\t}\r\n\r\n\t// calculate the amount of pixels from the bottom left side of a straight square to the point at the bottom \r\n\t// .. where the tip of the tile meets the border of the square\r\n\tpublic getHorizontalBottomShortestWidth (diagonalWidth: number, smallAngle: number) {\r\n\t\treturn Math.ceil((diagonalWidth * Math.sin(this.toRadians(smallAngle))) * 100) / 100;\r\n\t}\r\n\r\n\tpublic getVerticalBottomShortestHeight (diagonalHeight: number, smallAngle: number) {\r\n\t\treturn Math.ceil((diagonalHeight * Math.cos(this.toRadians(smallAngle))) * 100) / 100;\r\n\t}\r\n\r\n\tpublic getHorizontalTopLongestWidth (diagonalWidth: number, largeAngle: number) {\r\n\t\treturn Math.floor((diagonalWidth * Math.sin(this.toRadians(largeAngle))) * 100) / 100;\r\n\t}\r\n\r\n\tpublic getVerticalTopLongestHeight (diagonalHeight: number, largeAngle: number) {\r\n\t\treturn Math.ceil(diagonalHeight * Math.cos(this.toRadians(largeAngle)));\r\n\t}\r\n\r\n\ttoRadians (angle) {\r\n\t\treturn angle * (Math.PI / 180);\r\n\t}\r\n}\r\n\r\nexport enum TileColor {\r\n\tRed = 125 + Math.floor(Math.random() * 75),\r\n\tGreen = 170 + Math.floor(Math.random() * 40),\r\n\tBlue = 180 + Math.floor(Math.random() * 30)\r\n}\r\n\r\nexport enum BuildingHeightVariations {\r\n\tTallCenter = 'tallcenter', \r\n\tTallSurrounds = 'tallsurrounds', \r\n\tRandom = 'random'\r\n}","import { MapGenerationFunctions, TileColor, BuildingHeightVariations } from './mapGenerationFunctions.component'\r\nimport { Tile, TileType } from './tile.component'\r\n\r\nexport default class Map {\r\n\r\n\tprivate _mapWidth: number\r\n\tprivate _mapLength: number\r\n\tprivate _mapMaxHeight: number\r\n\tprivate _averageBuildingSize: number\r\n\tprivate _blockHeight: number\r\n\tprivate _maximumBlockIterations: number\r\n\tprivate _additionalBlockIterations: number\r\n\tprivate _mapEdgeWidth: number\r\n\tprivate _highestPoint: number\r\n\tprivate _startBlockXfromCenterDeviation: number\r\n\tprivate _world: any[][]\r\n\tprivate _blockHeightsArray: number[]\r\n\tprivate _blockGroupCollection: any[]\r\n\tprivate _blockGroups: any[]\r\n\tprivate _startBlockEdges: number[]\r\n\tprivate _additionalBlockEdges: number[]\r\n\tprivate _mapGenerationFunctions: MapGenerationFunctions = new MapGenerationFunctions()\r\n\tprivate _blockHeightVariationLabels = [BuildingHeightVariations.TallCenter, BuildingHeightVariations.TallSurrounds, BuildingHeightVariations.Random];\r\n\tprivate _blockHeightVariation = this._blockHeightVariationLabels[Math.floor(Math.random() * 3)];\r\n\r\n\tconstructor(\t\r\n\t\t\tmapWidth: number, \r\n\t\t\tmapLength: number, \r\n\t\t\tmapMaxHeight: number, \r\n\t\t\tmapEdgeWidth: number,\r\n\t\t\taverageBuildingSize: number,\r\n\t\t\tblockHeight: number,\r\n\t\t\tmaximumBlockIterations: number)\r\n\t{\r\n\t\tthis._mapWidth = mapWidth\r\n\t\tthis._mapLength = mapLength\r\n\t\tthis._mapMaxHeight = mapMaxHeight\r\n\t\tthis._mapEdgeWidth = mapEdgeWidth\r\n\t\tthis._averageBuildingSize = averageBuildingSize\r\n\t\tthis._blockHeight = blockHeight\r\n\t\tthis._maximumBlockIterations = maximumBlockIterations\r\n\t\tthis._additionalBlockIterations = this._mapGenerationFunctions.calculateAdditionalBlockIterations(maximumBlockIterations)\r\n\t\tthis._blockGroups = []\r\n\r\n\t\tlet mapLengthHalf = Math.floor(mapLength / 2)\r\n\t\tlet mapWidthHalf = Math.floor(mapWidth / 2)\r\n\t\tlet startBlockXfromCenterDeviation = 6\r\n\t\tlet startblockLength = (this._averageBuildingSize + 1) + Math.floor(Math.random() * 6)\r\n\t\tlet startblockWidth = this._averageBuildingSize + Math.floor(Math.random() * 5)\r\n\t\tlet startblockXfromCenter = 6 + Math.floor(Math.random() * startBlockXfromCenterDeviation)\r\n\t\tlet startblockLengthHalf = Math.floor(startblockLength / 2)\r\n\t\tlet startblockWidthHalf = Math.floor(startblockWidth / 2)\r\n\t\tlet startingPositionX = Math.floor(this._mapWidth / 2) - Math.floor(startblockXfromCenter / 2)\r\n\r\n\t\tthis._world = []\r\n\t\tlet i = 0\r\n\t\tlet tileHeight = 0\r\n\t\tlet firstBlockHeight\r\n\r\n\t\tif (this._blockHeightVariation == BuildingHeightVariations.TallCenter) {\r\n\t\t\tfirstBlockHeight = blockHeight * 2;\r\n\t\t} else if (this._blockHeightVariation == BuildingHeightVariations.TallSurrounds) {\r\n\t\t\tfirstBlockHeight = 1 + Math.round(Math.random());\r\n\t\t\tblockHeight = firstBlockHeight;\r\n\t\t} else {\r\n\t\t\tfirstBlockHeight = blockHeight;\r\n\t\t}\r\n\r\n\t\tfor (let y = 0; y < this.mapLength; y++) {\r\n\r\n\t\t\tthis._world[y] = []\r\n\r\n\t\t\tfor (let x = 0; x < this.mapWidth; x++) {\r\n\r\n\t\t\t\tlet thisBlockGroup = 0\r\n\r\n\t\t\t\tlet column = new Column(false, x, y, 0)\r\n\r\n\t\t\t\tif (y >= mapLengthHalf && y <= (mapLengthHalf + startblockLengthHalf) ) {\r\n\r\n\t\t\t\t\tif (x > startingPositionX && x <= (startingPositionX + startblockWidth) ) {\r\n\r\n\t\t\t\t\t\tthisBlockGroup = 1\r\n\t\t\t\t\t\tlet tileStack = []\r\n\r\n\t\t\t\t\t\tfor (let h = 0; h < firstBlockHeight; h++) {\r\n\r\n\t\t\t\t\t\t\tlet thisPillar = 0\r\n\t\t\t\t\t\t\tlet thisWindowed = 0\r\n\t\t\t\t\t\t\tlet isRoof = (h === firstBlockHeight-1) ? true : false\r\n\r\n\t\t\t\t\t\t\ttileStack.push(\r\n\t\t\t\t\t\t\t\tnew Tile(\r\n\t\t\t\t\t\t\t\t\ti, \r\n\t\t\t\t\t\t\t\t\tx, \r\n\t\t\t\t\t\t\t\t\ty, \r\n\t\t\t\t\t\t\t\t\th, \r\n\t\t\t\t\t\t\t\t\tTileType.Body,\r\n\t\t\t\t\t\t\t\t\tTileColor.Red, \r\n\t\t\t\t\t\t\t\t\tTileColor.Green, \r\n\t\t\t\t\t\t\t\t\tTileColor.Blue,\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t'roof':\t\t\tisRoof,\r\n\t\t\t\t\t\t\t\t\t\t'pillar': \t\tthisPillar,\r\n\t\t\t\t\t\t\t\t\t\t'windowed': \tthisWindowed,\r\n\t\t\t\t\t\t\t\t\t\t'tower': \t\tfalse\r\n\t\t\t\t\t\t\t\t\t})\t\t\t\r\n\t\t\t\t\t\t\t\t)\r\n\r\n\t\t\t\t\t\t\tif (this._blockGroups.indexOf(thisBlockGroup) == -1) {\r\n\t\t\t\t\t\t\t\tthis._blockGroups[thisBlockGroup] = new Array( [y,x] );\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis._blockGroups[thisBlockGroup].push([y,x]);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\ti++;\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tcolumn = new Column(true, x, y, firstBlockHeight)\r\n\r\n\t\t\t\t\t\tcolumn.blockGroup = thisBlockGroup\r\n\t\t\t\t\t\tcolumn.height = firstBlockHeight\r\n\t\t\t\t\t\tcolumn.corner = false\r\n\t\t\t\t\t\tcolumn.tileStack = tileStack\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._world[y][x] = column;\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.setEdges()\r\n\t}\r\n\r\n\tget mapWidth(): number {\r\n\t\treturn this._mapWidth\r\n\t}\r\n\r\n\tget mapLength(): number {\r\n\t\treturn this._mapLength\r\n\t}\r\n\r\n\tget map(): any[] {\r\n\t\treturn this._world\r\n\t}\r\n\r\n\tpublic getColumn(x, y): Column {\r\n\t\treturn this._world[y][x]\r\n\t}\r\n\r\n\tpublic getTiles(x, y): Tile[] {\r\n\t\treturn this._world[y][x].tileStack\r\n\t}\r\n\r\n\tpublic getTile(x, y, h): Tile {\r\n\t\treturn this._world[y][x].getTile(h)\r\n\t}\r\n\r\n\tpublic getTopTile(x, y): Tile {\r\n\t\tlet height = this._world[y][x].height\r\n\t\treturn this._world[y][x].getTile(height-1)\r\n\t}\r\n\r\n\tsetEdges(): void {\r\n\r\n\t\tfor (let y = 0; y < this.mapLength; y++) {\r\n\t\t\tfor (let x = 0; x < this.mapWidth; x++) {\r\n\t\t\t\t\r\n\t\t\t\tif (y > 0 && x > 0 && y < this.mapLength-1 && x < this.mapWidth-1 && this._world[y][x].isDefined) {\r\n\r\n\t\t\t\t\tif (!this._world[y-1][x].isDefined) {\r\n\t\t\t\t\t\tthis._world[y][x].edge.top = true\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (!this._world[y+1][x].isDefined) {\r\n\t\t\t\t\t\tthis._world[y][x].edge.bottom = true\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (!this._world[y][x-1].isDefined) {\r\n\t\t\t\t\t\tthis._world[y][x].edge.left = true\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (!this._world[y][x+1].isDefined) {\r\n\t\t\t\t\t\tthis._world[y][x].edge.right = true\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( (this._world[y][x].edge['top'] && this._world[y][x].edge['right']) ||\r\n\t\t\t\t\t\t (this._world[y][x].edge['top'] && this._world[y][x].edge['left']) ||\r\n\t\t\t\t\t\t (this._world[y][x].edge['bottom'] && this._world[y][x].edge['right']) ||\r\n\t\t\t\t\t\t (this._world[y][x].edge['bottom'] && this._world[y][x].edge['left']) ) {\r\n\t\t\t\t\t\tthis._world[y][x].corner = true\r\n\t\t\t\t\t}\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nclass Column {\r\n\r\n\tprivate _defined: boolean\r\n\tprivate _x: number\r\n\tprivate _y: number\r\n\tprivate _height: number\r\n\tprivate _blockGroup: number\r\n\tprivate _corner: boolean\r\n\tprivate _edge: object = { 'top': false, 'right': false, 'bottom': false, 'left': false }\r\n\tprivate _tileStack: Tile[] = []\r\n\r\n\tconstructor(private defined: boolean, private colX: number, private colY: number, private colHeight: number) {\r\n\t\tthis._defined = defined\r\n\t\tthis._x = colX\r\n\t\tthis._y = colY\r\n\t\tthis._height = colHeight\r\n\t}\r\n\r\n\tset x(x: number) {\r\n\t\tthis._x = x\r\n\t}\r\n\r\n\tset y(y: number) {\r\n\t\tthis._y = y\r\n\t}\r\n\r\n\tset height(height: number) {\r\n\t\tthis._height = height\r\n\t}\r\n\r\n\tset blockGroup(groupNum: number) {\r\n\t\tthis._blockGroup = groupNum\r\n\t}\r\n\r\n\tset corner(corner: boolean) {\r\n\t\tthis._corner = corner\r\n\t}\r\n\r\n\tset edge(edge: object) {\r\n\t\tthis._edge = edge\r\n\t}\r\n\r\n\tset tileStack(tiles: Tile[]) {\r\n\t\tthis._tileStack = tiles\r\n\t}\r\n\r\n\tget isDefined(): boolean {\r\n\t\treturn this._defined\r\n\t}\r\n\r\n\tget x(): number {\r\n\t\treturn this._x\r\n\t}\r\n\r\n\tget y(): number {\r\n\t\treturn this._y\r\n\t}\r\n\r\n\tget height(): number {\r\n\t\treturn this._height\r\n\t}\r\n\r\n\tget blockGroup(): number {\r\n\t\treturn this._blockGroup\r\n\t}\r\n\r\n\tget corner(): boolean {\r\n\t\treturn this._corner\r\n\t}\r\n\r\n\tget edge(): object {\r\n\t\treturn this._edge\r\n\t}\r\n\r\n\tget tileStack(): Tile[] {\r\n\t\treturn this._tileStack\r\n\t}\r\n\r\n\tpublic getTile(height: number): Tile {\r\n\t\treturn this._tileStack[height]\r\n\t}\r\n}","import { TileColor } from './mapGenerationFunctions.component'\r\n\r\nexport class Tile {\r\n\t\r\n\t_id: number\r\n\t_x: number\r\n\t_y: number\r\n\t_h: number\r\n\t_tileType: TileType\r\n\t_colorRed: TileColor\r\n\t_colorGreen: TileColor\r\n\t_colorBlue: TileColor\r\n\t_options?: object = {}\r\n\r\n\tconstructor(\t\t\t\r\n\t\t\tid: number,\r\n\t\t\tx: number,\r\n\t\t\ty: number,\r\n\t\t\th: number,\r\n\t\t\ttileType: TileType,\r\n\t\t\tcolorRed: TileColor,\r\n\t\t\tcolorGreen: TileColor,\r\n\t\t\tcolorBlue: TileColor,\r\n\t\t\toptions?: object)\r\n\t{\r\n\t\tthis._id = id\r\n\t\tthis._x = x\r\n\t\tthis._y = y\r\n\t\tthis._h = h\r\n\t\tthis._tileType = tileType\r\n\t\tthis._colorRed = colorRed\r\n\t\tthis._colorGreen = colorGreen\r\n\t\tthis._colorBlue = colorBlue\r\n\r\n\t\tif (options) {\r\n\t\t\tthis._options = options\r\n\t\t}\r\n\t}\r\n\r\n\tget id(): number {\r\n\t\treturn this._id\r\n\t}\r\n\r\n\tget x(): number {\r\n\t\treturn this._x\r\n\t}\r\n\r\n\tget y(): number {\r\n\t\treturn this._y\r\n\t}\t\r\n\r\n\tget type(): TileType {\r\n\t\treturn this._tileType\r\n\t}\r\n\r\n\tget options(): object {\r\n\t\tif (this._tileType != TileType.None) {\r\n\t\t\treturn this._options\r\n\t\t} else {\r\n\t\t\treturn { 'defined': false }\r\n\t\t}\r\n\t}\r\n\r\n\tpublic getColor(): object {\r\n\t\treturn {\r\n\t\t\t'r': this._colorRed,\r\n\t\t\t'g': this._colorGreen,\r\n\t\t\t'b': this._colorBlue\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nexport enum TileType {\r\n\tNone = 'none',\r\n\tBody = 'body',\r\n\tTower = 'tower',\r\n\tRoof = 'roof'\r\n}"]}
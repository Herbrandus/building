{"version":3,"sources":["node_modules/browser-pack/_prelude.js","bundle.min.js","src/ts/builder.component.ts","src/ts/config.component.ts","src/ts/main.ts","src/ts/mapGenerationFunctions.component.ts","src/ts/mapper.component.ts","src/ts/tile.component.ts"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","Object","defineProperty","value","config_component_1","default","[object Object]","this","_config","map","html","mapWidth","mapLength","tileWidth","tileLength","htmlMap","getMapWidth","y","x","getColumn","isDefined","tile","getTopTile","tileTopColor","getColor","id","./config.component","2","_tileWidth","_tileLength","_tileHeight","tileHeight","mapArrayWidth","mapArrayLength","3","mapper_component_1","builder_component_1","building","_builder","_map","Math","floor","random","showData","build2DMap","console","log","document","querySelector","innerHTML","colorMap","./builder.component","./mapper.component","4","MapGenerationFunctions","maximumBlockIterations","TileColor","BuildingHeightVariations","5","mapGenerationFunctions_component_1","tile_component_1","mapMaxHeight","mapEdgeWidth","averageBuildingSize","blockHeight","_mapGenerationFunctions","_blockHeightVariationLabels","TallCenter","TallSurrounds","Random","_blockHeightVariation","_mapWidth","_mapLength","_mapMaxHeight","_mapEdgeWidth","_averageBuildingSize","_blockHeight","_maximumBlockIterations","_additionalBlockIterations","calculateAdditionalBlockIterations","_blockGroups","mapLengthHalf","startblockLength","startblockWidth","startblockXfromCenter","startblockLengthHalf","startingPositionX","_world","firstBlockHeight","round","thisBlockGroup","column","Column","tileStack","h","thisPillar","thisWindowed","isRoof","push","Tile","TileType","Body","Red","Green","Blue","roof","pillar","windowed","tower","indexOf","Array","blockGroup","height","corner","setEdges","getTile","edge","top","bottom","left","right","defined","colX","colY","colHeight","_edge","_tileStack","_defined","_x","_y","_height","groupNum","_blockGroup","_corner","tiles","./mapGenerationFunctions.component","./tile.component","6","tileType","colorRed","colorGreen","colorBlue","options","_options","_id","_h","_tileType","_colorRed","_colorGreen","_colorBlue","type","None","g","b"],"mappings":"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","file":"bundle.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()",null,"import Map from './mapper.component'\r\nimport { Tile, TileType } from './tile.component'\r\nimport Config from './config.component'\r\n\r\nexport default class Builder {\t\r\n\r\n\tprivate _config: Config = new Config()\r\n\r\n\tconstructor() {\t}\r\n\r\n\tshowData(map: Map): string {\r\n\r\n\t\tlet html = '<div class=\"showData\">'\r\n\r\n\t\thtml += `map width: ${map.mapWidth} tiles<br>map length: ${map.mapLength} tiles<br>`\r\n\t\thtml += `tile width: ${this._config.tileWidth}<br>tile length: ${this._config.tileLength}<br>`\r\n\t\thtml += '</div>'\r\n\r\n\t\treturn html\r\n\t}\r\n\r\n\tbuild2DMap(map: Map): string {\r\n\r\n\t\tlet htmlMap = `<div class=\"map\" style=\"width:${this._config.getMapWidth(map.mapWidth)}px;\">`\r\n\r\n\t\tfor (let y = 0; y < map.mapLength; y++) {\r\n\t\t\tfor (let x = 0; x < map.mapWidth; x++) {\r\n\r\n\t\t\t\thtmlMap += `<div class=\"tile\" style=\"width:${this._config.tileWidth}px;height:${this._config.tileLength}px;`\r\n\r\n\t\t\t\tif (map.getColumn(x, y).isDefined) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet tile = map.getTopTile(x, y)\r\n\t\t\t\t\tlet tileTopColor = tile.getColor()\r\n\t\t\t\t\tlet tileColor = `rgb(${tileTopColor['r']}, ${tileTopColor['g']}, ${tileTopColor['b']})`\r\n\r\n\t\t\t\t\thtmlMap += `background-color:${tileColor};\">${tile.id}<br>(${x}, ${y})</div>`\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\thtmlMap += `\">${x}, ${y}</div>`\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\thtmlMap += `</div>`\r\n\r\n\t\treturn htmlMap\r\n\t}\r\n\r\n\tbuildMap(map: Map): string {\r\n\r\n\t\tlet htmlMap = '';\r\n\r\n\t\treturn htmlMap\r\n\t}\r\n}","export default class Config {\r\n\r\n\tprivate _tileWidth: number = 40\r\n\tprivate _tileLength: number = 40\r\n\tprivate _tileHeight: number = 20\r\n\r\n\tpublic get tileWidth(): number {\r\n\t\treturn this._tileWidth\r\n\t}\r\n\r\n\tpublic get tileLength(): number {\r\n\t\treturn this._tileLength\r\n\t}\r\n\r\n\tpublic get tileHeight(): number {\r\n\t\treturn this._tileHeight\r\n\t}\r\n\r\n\tpublic getMapWidth(mapArrayWidth: number): number {\r\n\t\treturn mapArrayWidth * this._tileWidth\r\n\t}\r\n\r\n\tpublic getMapLength(mapArrayLength: number): number {\r\n\t\treturn mapArrayLength * this._tileLength\r\n\t}\r\n}","import Map from './mapper.component'\r\nimport Builder from './builder.component'\r\n\r\nclass RandomBuilding {\r\n\r\n\tprivate _map: Map\r\n\tprivate _builder: Builder = new Builder\r\n\r\n\tconstructor() {\r\n\t\tthis._map = new Map(25, 25, 10, 2, (4 + Math.floor(Math.random() * 7)), 2, 4)\r\n\t}\r\n\r\n\tget map() {\r\n\t\treturn this._map\r\n\t}\r\n\r\n\tpublic colorMap(): string {\r\n\t\treturn this._builder.showData(this._map) + this._builder.build2DMap(this._map)\r\n\t}\r\n}\r\n\r\nconst building = new RandomBuilding();\r\n\r\nconsole.log(building.map.map);\r\nconsole.log(\"column on 15, 17: \", building.map.getColumn(15, 17))\r\n\r\ndocument.querySelector('#world').innerHTML = building.colorMap()","export class MapGenerationFunctions {\r\n\r\n\tconstructor() {}\r\n\r\n\tpublic calculateAdditionalBlockIterations(maximumBlockIterations: number) {\r\n\t\treturn 2 + Math.floor(Math.random() * maximumBlockIterations)\r\n\t}\r\n}\r\n\r\nexport enum TileColor {\r\n\tRed = 125 + Math.floor(Math.random() * 75),\r\n\tGreen = 170 + Math.floor(Math.random() * 40),\r\n\tBlue = 180 + Math.floor(Math.random() * 30)\r\n}\r\n\r\nexport enum BuildingHeightVariations {\r\n\tTallCenter = 'tallcenter', \r\n\tTallSurrounds = 'tallsurrounds', \r\n\tRandom = 'random'\r\n}","import { MapGenerationFunctions, TileColor, BuildingHeightVariations } from './mapGenerationFunctions.component'\r\nimport { Tile, TileType } from './tile.component'\r\n\r\nexport default class Map {\r\n\r\n\tprivate _mapWidth: number\r\n\tprivate _mapLength: number\r\n\tprivate _mapMaxHeight: number\r\n\tprivate _averageBuildingSize: number\r\n\tprivate _blockHeight: number\r\n\tprivate _maximumBlockIterations: number\r\n\tprivate _additionalBlockIterations: number\r\n\tprivate _mapEdgeWidth: number\r\n\tprivate _highestPoint: number\r\n\tprivate _startBlockXfromCenterDeviation: number\r\n\tprivate _world: any[][]\r\n\tprivate _blockHeightsArray: number[]\r\n\tprivate _blockGroupCollection: any[]\r\n\tprivate _blockGroups: any[]\r\n\tprivate _startBlockEdges: number[]\r\n\tprivate _additionalBlockEdges: number[]\r\n\tprivate _mapGenerationFunctions: MapGenerationFunctions = new MapGenerationFunctions()\r\n\tprivate _blockHeightVariationLabels = [BuildingHeightVariations.TallCenter, BuildingHeightVariations.TallSurrounds, BuildingHeightVariations.Random];\r\n\tprivate _blockHeightVariation = this._blockHeightVariationLabels[Math.floor(Math.random() * 3)];\r\n\r\n\tconstructor(\t\r\n\t\t\tmapWidth: number, \r\n\t\t\tmapLength: number, \r\n\t\t\tmapMaxHeight: number, \r\n\t\t\tmapEdgeWidth: number,\r\n\t\t\taverageBuildingSize: number,\r\n\t\t\tblockHeight: number,\r\n\t\t\tmaximumBlockIterations: number)\r\n\t{\r\n\t\tthis._mapWidth = mapWidth\r\n\t\tthis._mapLength = mapLength\r\n\t\tthis._mapMaxHeight = mapMaxHeight\r\n\t\tthis._mapEdgeWidth = mapEdgeWidth\r\n\t\tthis._averageBuildingSize = averageBuildingSize\r\n\t\tthis._blockHeight = blockHeight\r\n\t\tthis._maximumBlockIterations = maximumBlockIterations\r\n\t\tthis._additionalBlockIterations = this._mapGenerationFunctions.calculateAdditionalBlockIterations(maximumBlockIterations)\r\n\t\tthis._blockGroups = []\r\n\r\n\t\tlet mapLengthHalf = Math.floor(mapLength / 2)\r\n\t\tlet mapWidthHalf = Math.floor(mapWidth / 2)\r\n\t\tlet startBlockXfromCenterDeviation = 6\r\n\t\tlet startblockLength = (this._averageBuildingSize + 1) + Math.floor(Math.random() * 6)\r\n\t\tlet startblockWidth = this._averageBuildingSize + Math.floor(Math.random() * 5)\r\n\t\tlet startblockXfromCenter = 6 + Math.floor(Math.random() * startBlockXfromCenterDeviation)\r\n\t\tlet startblockLengthHalf = Math.floor(startblockLength / 2)\r\n\t\tlet startblockWidthHalf = Math.floor(startblockWidth / 2)\r\n\t\tlet startingPositionX = Math.floor(this._mapWidth / 2) - Math.floor(startblockXfromCenter / 2)\r\n\r\n\t\tthis._world = []\r\n\t\tlet i = 0\r\n\t\tlet tileHeight = 0\r\n\t\tlet firstBlockHeight\r\n\r\n\t\tif (this._blockHeightVariation == BuildingHeightVariations.TallCenter) {\r\n\t\t\tfirstBlockHeight = blockHeight * 2;\r\n\t\t} else if (this._blockHeightVariation == BuildingHeightVariations.TallSurrounds) {\r\n\t\t\tfirstBlockHeight = 1 + Math.round(Math.random());\r\n\t\t\tblockHeight = firstBlockHeight;\r\n\t\t} else {\r\n\t\t\tfirstBlockHeight = blockHeight;\r\n\t\t}\r\n\r\n\t\tfor (let y = 0; y < this.mapLength; y++) {\r\n\r\n\t\t\tthis._world[y] = []\r\n\r\n\t\t\tfor (let x = 0; x < this.mapWidth; x++) {\r\n\r\n\t\t\t\tlet thisBlockGroup = 0\r\n\r\n\t\t\t\tlet column = new Column(false, x, y, 0)\r\n\r\n\t\t\t\tif (y >= mapLengthHalf && y <= (mapLengthHalf + startblockLengthHalf) ) {\r\n\r\n\t\t\t\t\tif (x > startingPositionX && x <= (startingPositionX + startblockWidth) ) {\r\n\r\n\t\t\t\t\t\tthisBlockGroup = 1\r\n\t\t\t\t\t\tlet tileStack = []\r\n\r\n\t\t\t\t\t\tfor (let h = 0; h < firstBlockHeight; h++) {\r\n\r\n\t\t\t\t\t\t\tlet thisPillar = 0\r\n\t\t\t\t\t\t\tlet thisWindowed = 0\r\n\t\t\t\t\t\t\tlet isRoof = (h === firstBlockHeight-1) ? true : false\r\n\r\n\t\t\t\t\t\t\ttileStack.push(\r\n\t\t\t\t\t\t\t\tnew Tile(\r\n\t\t\t\t\t\t\t\t\ti, \r\n\t\t\t\t\t\t\t\t\tx, \r\n\t\t\t\t\t\t\t\t\ty, \r\n\t\t\t\t\t\t\t\t\th, \r\n\t\t\t\t\t\t\t\t\tTileType.Body,\r\n\t\t\t\t\t\t\t\t\tTileColor.Red, \r\n\t\t\t\t\t\t\t\t\tTileColor.Green, \r\n\t\t\t\t\t\t\t\t\tTileColor.Blue,\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t'roof':\t\t\tisRoof,\r\n\t\t\t\t\t\t\t\t\t\t'pillar': \t\tthisPillar,\r\n\t\t\t\t\t\t\t\t\t\t'windowed': \tthisWindowed,\r\n\t\t\t\t\t\t\t\t\t\t'tower': \t\tfalse\r\n\t\t\t\t\t\t\t\t\t})\t\t\t\r\n\t\t\t\t\t\t\t\t)\r\n\r\n\t\t\t\t\t\t\tif (this._blockGroups.indexOf(thisBlockGroup) == -1) {\r\n\t\t\t\t\t\t\t\tthis._blockGroups[thisBlockGroup] = new Array( [y,x] );\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis._blockGroups[thisBlockGroup].push([y,x]);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\ti++;\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tcolumn = new Column(true, x, y, firstBlockHeight)\r\n\r\n\t\t\t\t\t\tcolumn.blockGroup = thisBlockGroup\r\n\t\t\t\t\t\tcolumn.height = firstBlockHeight\r\n\t\t\t\t\t\tcolumn.corner = false\r\n\t\t\t\t\t\tcolumn.tileStack = tileStack\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._world[y][x] = column;\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.setEdges()\r\n\t}\r\n\r\n\tget mapWidth(): number {\r\n\t\treturn this._mapWidth\r\n\t}\r\n\r\n\tget mapLength(): number {\r\n\t\treturn this._mapLength\r\n\t}\r\n\r\n\tget map(): any[] {\r\n\t\treturn this._world\r\n\t}\r\n\r\n\tpublic getColumn(x, y): Column {\r\n\t\treturn this._world[y][x]\r\n\t}\r\n\r\n\tpublic getTiles(x, y): Tile[] {\r\n\t\treturn this._world[y][x].tileStack\r\n\t}\r\n\r\n\tpublic getTile(x, y, h): Tile {\r\n\t\treturn this._world[y][x].getTile(h)\r\n\t}\r\n\r\n\tpublic getTopTile(x, y): Tile {\r\n\t\tlet height = this._world[y][x].height\r\n\t\treturn this._world[y][x].getTile(height-1)\r\n\t}\r\n\r\n\tsetEdges(): void {\r\n\r\n\t\tfor (let y = 0; y < this.mapLength; y++) {\r\n\t\t\tfor (let x = 0; x < this.mapWidth; x++) {\r\n\t\t\t\t\r\n\t\t\t\tif (y > 0 && x > 0 && y < this.mapLength-1 && x < this.mapWidth-1 && this._world[y][x].isDefined) {\r\n\r\n\t\t\t\t\tif (!this._world[y-1][x].isDefined) {\r\n\t\t\t\t\t\tthis._world[y][x].edge.top = true\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (!this._world[y+1][x].isDefined) {\r\n\t\t\t\t\t\tthis._world[y][x].edge.bottom = true\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (!this._world[y][x-1].isDefined) {\r\n\t\t\t\t\t\tthis._world[y][x].edge.left = true\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (!this._world[y][x+1].isDefined) {\r\n\t\t\t\t\t\tthis._world[y][x].edge.right = true\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( (this._world[y][x].edge['top'] && this._world[y][x].edge['right']) ||\r\n\t\t\t\t\t\t (this._world[y][x].edge['top'] && this._world[y][x].edge['left']) ||\r\n\t\t\t\t\t\t (this._world[y][x].edge['bottom'] && this._world[y][x].edge['right']) ||\r\n\t\t\t\t\t\t (this._world[y][x].edge['bottom'] && this._world[y][x].edge['left']) ) {\r\n\t\t\t\t\t\tthis._world[y][x].corner = true\r\n\t\t\t\t\t}\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nclass Column {\r\n\r\n\t_defined: boolean\r\n\t_x: number\r\n\t_y: number\r\n\t_height: number\r\n\t_blockGroup: number\r\n\t_corner: boolean\r\n\t_edge: object = { 'top': false, 'right': false, 'bottom': false, 'left': false }\r\n\t_tileStack: Tile[] = []\r\n\r\n\tconstructor(private defined: boolean, private colX: number, private colY: number, private colHeight: number) {\r\n\t\tthis._defined = defined\r\n\t\tthis._x = colX\r\n\t\tthis._y = colY\r\n\t\tthis._height = colHeight\r\n\t}\r\n\r\n\tset x(x: number) {\r\n\t\tthis._x = x\r\n\t}\r\n\r\n\tset y(y: number) {\r\n\t\tthis._y = y\r\n\t}\r\n\r\n\tset height(height: number) {\r\n\t\tthis._height = height\r\n\t}\r\n\r\n\tset blockGroup(groupNum: number) {\r\n\t\tthis._blockGroup = groupNum\r\n\t}\r\n\r\n\tset corner(corner: boolean) {\r\n\t\tthis._corner = corner\r\n\t}\r\n\r\n\tset edge(edge: object) {\r\n\t\tthis._edge = edge\r\n\t}\r\n\r\n\tset tileStack(tiles: Tile[]) {\r\n\t\tthis._tileStack = tiles\r\n\t}\r\n\r\n\tget isDefined(): boolean {\r\n\t\treturn this._defined\r\n\t}\r\n\r\n\tget x(): number {\r\n\t\treturn this._x\r\n\t}\r\n\r\n\tget y(): number {\r\n\t\treturn this._y\r\n\t}\r\n\r\n\tget height(): number {\r\n\t\treturn this._height\r\n\t}\r\n\r\n\tget blockGroup(): number {\r\n\t\treturn this._blockGroup\r\n\t}\r\n\r\n\tget corner(): boolean {\r\n\t\treturn this._corner\r\n\t}\r\n\r\n\tget edge(): object {\r\n\t\treturn this._edge\r\n\t}\r\n\r\n\tget tileStack(): Tile[] {\r\n\t\treturn this._tileStack\r\n\t}\r\n\r\n\tpublic getTile(height: number): Tile {\r\n\t\treturn this._tileStack[height]\r\n\t}\r\n}\r\n\r\nclass BlockGroup {\r\n\r\n\tblockgroups: object[]\r\n\r\n}","import { TileColor } from './mapGenerationFunctions.component'\r\n\r\nexport class Tile {\r\n\t\r\n\t_id: number\r\n\t_x: number\r\n\t_y: number\r\n\t_h: number\r\n\t_tileType: TileType\r\n\t_colorRed: TileColor\r\n\t_colorGreen: TileColor\r\n\t_colorBlue: TileColor\r\n\t_options?: object = {}\r\n\r\n\tconstructor(\t\t\t\r\n\t\t\tid: number,\r\n\t\t\tx: number,\r\n\t\t\ty: number,\r\n\t\t\th: number,\r\n\t\t\ttileType: TileType,\r\n\t\t\tcolorRed: TileColor,\r\n\t\t\tcolorGreen: TileColor,\r\n\t\t\tcolorBlue: TileColor,\r\n\t\t\toptions?: object)\r\n\t{\r\n\t\tthis._id = id\r\n\t\tthis._x = x\r\n\t\tthis._y = y\r\n\t\tthis._h = h\r\n\t\tthis._tileType = tileType\r\n\t\tthis._colorRed = colorRed\r\n\t\tthis._colorGreen = colorGreen\r\n\t\tthis._colorBlue = colorBlue\r\n\r\n\t\tif (options) {\r\n\t\t\tthis._options = options\r\n\t\t}\r\n\t}\r\n\r\n\tget id(): number {\r\n\t\treturn this._id\r\n\t}\r\n\r\n\tget x(): number {\r\n\t\treturn this._x\r\n\t}\r\n\r\n\tget y(): number {\r\n\t\treturn this._y\r\n\t}\t\r\n\r\n\tget type(): TileType {\r\n\t\treturn this._tileType\r\n\t}\r\n\r\n\tget options(): object {\r\n\t\tif (this._tileType != TileType.None) {\r\n\t\t\treturn this._options\r\n\t\t} else {\r\n\t\t\treturn { 'defined': false }\r\n\t\t}\r\n\t}\r\n\r\n\tpublic getColor(): object {\r\n\t\treturn {\r\n\t\t\t'r': this._colorRed,\r\n\t\t\t'g': this._colorGreen,\r\n\t\t\t'b': this._colorBlue\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nexport enum TileType {\r\n\tNone = 'none',\r\n\tBody = 'body',\r\n\tTower = 'tower',\r\n\tRoof = 'roof'\r\n}"]}